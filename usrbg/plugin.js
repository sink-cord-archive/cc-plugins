(function(c,g,o,a,i,h,F,b){"use strict";function v(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function N(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var u=N(g),d=v(b);const[l,P,{premiumIconWrapper:_},{footer:m},{bodyInnerWrapper:B},{avatarPositionPremium:z,avatarWrapperNormal:A},{TextBadge:S}]=i.batchFind(({findByProps:e,findByDisplayName:t,find:r})=>{t("UserBanner",!1),r(n=>n.type?.displayName==="UserPopoutContainer"),e("premiumIconWrapper"),e("wumpusWrapper"),e("bodyInnerWrapper"),e("avatarPositionPremium"),e("TextBadge")});var j=e=>{const t=o.after("default",l,([{user:n}],{props:s})=>{const y=e.get(n.id)?.img;!a.persist.ghost.classic||!y||(s.style={display:"contents"},s.children.push(u.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundImage:`url(${y})`,filter:"brightness(.75)",borderRadius:"8px"}}),u.createElement("div",{className:s.className})))}),r=o.injectCSS(`.${m}{background:none}.${m},.${B}{opacity:.75}`);return()=>{t(),r()}},E=e=>{const t=o.after("type",P,(n,{props:{user:s}})=>{e.has(s.id)&&(s.banner??="_")}),r=o.findAndPatch(()=>i.findByDisplayName("UserProfileModalHeader",!1),n=>o.after("default",n,([{user:s}])=>{e.has(s.id)&&(s.banner??="_")}));return()=>{t(),r()}},U=e=>o.after("default",l,([{user:t}],r)=>{if(!(a.persist.ghost.classic||t.banner!=="_"))return r.props.style.backgroundImage=`url(${e.get(t.id).img})`,r.props.children[0]=u.createElement(S,{color:"rgba(32, 34, 37, 0.8)",className:_,text:"USRBG"}),r});const w="https://raw.githubusercontent.com/Discord-Custom-Covers/usrbg/master/dist/usrbg.json",I=()=>fetch(w).then(e=>e.json()),O=e=>new Map(e.map(t=>[t.uid,t]));var R=()=>I().then(O);const $=i.findByDisplayName("FormText"),C=i.findByDisplayName("Switch");i.findByDisplayName("TextInput"),i.findByDisplayName("Select",!1).SingleSelect;const D=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),W=({k:e,depends:t,children:r})=>d.default.createElement("div",{style:D(t)},d.default.createElement(C,{checked:a.persist.ghost[e],disabled:t!==void 0&&!a.persist.ghost[t],onChange:n=>a.persist.store[e]=n}),d.default.createElement($,{children:r})),M=e=>t=>(h.useNest(a.persist),e(t));((e,t=a.persist)=>{for(const r in e)t.ghost[r]===void 0&&(t.store[r]=e[r])})({classic:!1});var T=M(()=>u.createElement(W,{k:"classic"},"Use classic style instead of mimicking Nitro"));let f=!1,p=[];async function x(){const e=await R();f||(p=[U(e),E(e),j(e)])}function L(){f=!0,window._.forEachRight(p,e=>e())}return c.onLoad=x,c.onUnload=L,c.settings=T,Object.defineProperty(c,"__esModule",{value:!0}),c})({},cumcord.modules.common.React,cumcord.patcher,cumcord.pluginData,cumcord.modules.webpack,cumcord.utils,cumcord.plugins,cumcord.modules.common.React);
