(function(r,i,l,n,m,f){"use strict";function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(s){if(s!=="default"){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}}),t.default=e,Object.freeze(t)}var g=p(m);const[h,{getCustomEmojiById:v},{getLastSelectedGuildId:b},a,j,y,{selected:E}]=l.batchFind(({findByProps:e,findByDisplayName:t})=>{t("TextInput"),e("getCustomEmojiById"),e("getLastSelectedGuildId"),e("canUseEmojisEverywhere"),e("sendMessage"),e("uploadFiles"),e("childWrapper","selected")});var I=()=>{const e=i.instead("canUseEmojisEverywhere",a,()=>!0),t=i.instead("canUseAnimatedEmojis",a,()=>!0);return()=>{e(),t()}};const z=()=>document.querySelector('[data-list-item-id="guildsnav___home"]').classList.contains(E),M=()=>Number.isSafeInteger(parseInt(n.persist.ghost.size))?n.persist.ghost.size:64,O=/<a?:(\w+):(\d+)>/i;function w(e,t){const s=e.matchAll(/<a?:(\w+):(\d+)>/gi),o=[];for(const u of s){const c=v(u[2]);(c.guildId!=b()||c.animated||z())&&(e=e.replace(u[0],""),o.push(`${c.url.split("?")[0]}?size=${t}`))}return[e.trim(),o]}var d=e=>{if(!e.content.match(O))return;const[t,s]=w(e.content,M());e.content=t,s.length>0&&(e.content+=`
`+s.join(`
`)),e.invalidEmojis=[]},S=()=>{const e=i.before("sendMessage",j,s=>d(s[1])),t=i.before("uploadFiles",y,s=>d(s[0].parsedMessage));return()=>{e(),t()}},U=()=>(f.useNest(n.persist),g.createElement(h,{placeholder:"Emote size in pixels, falls back to 64 if invalid",onChange:e=>n.persist.store.size=e,value:n.persist.ghost.size}));const B=[I(),S()],N=()=>_.forEachRight(B,e=>e());return r.onUnload=N,r.settings=U,Object.defineProperty(r,"__esModule",{value:!0}),r})({},cumcord.patcher,cumcord.modules.webpack,cumcord.pluginData,cumcord.modules.common.React,cumcord.utils);
