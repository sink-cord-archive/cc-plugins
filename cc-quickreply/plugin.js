(function(n,u,i){"use strict";const{getChannelId:l}=u.findByProps("getChannelId","getLastSelectedChannelId","getVoiceChannelId"),{getChannel:D}=u.findByProps("getChannel","getDMUserIds"),{getMessages:h}=u.findByProps("getRawMessages");let t=-1,c=l(),d,y=Symbol("quickreply_deletePendingReply_int");function P(){return D(l())}async function A(e,f,r,s){typeof s=="undefined"&&(s=e.guild_id!==null),i.FluxDispatcher.dirtyDispatch({type:n.ActionTypes.CREATE_PENDING_REPLY,channel:e,message:f,shouldMention:r,showMentionToggle:s})}async function a(e){i.FluxDispatcher.dirtyDispatch({type:n.ActionTypes.DELETE_PENDING_REPLY,channelId:l(),...e})}function E(e){c!==e.channelId&&(c=e.channelId,t=-1)}function p(e){d!==e.message.id&&(d=e.message.id)}function o(e){d=void 0,e[y]||(t=-1)}async function g(e){if(!e.ctrlKey||e.key!=="ArrowUp"&&e.key!=="ArrowDown")return;let r=(await h(l())).toArray().reverse(),s=r.findIndex(L=>L.id===d)||0;if(e.key==="ArrowUp"?t=s+1:e.key==="ArrowDown"&&(t=s-1),t>r.length&&(t=r.length),t<0)return a();let I=r[t];a({[y]:!0}),A(P(),I,!0)}var C={onLoad(){i.FluxDispatcher.subscribe(n.ActionTypes.CHANNEL_SELECT,E),i.FluxDispatcher.subscribe(n.ActionTypes.CREATE_PENDING_REPLY,p),i.FluxDispatcher.subscribe(n.ActionTypes.DELETE_PENDING_REPLY,o),window.addEventListener("keydown",g)},onUnload(){i.FluxDispatcher.unsubscribe(n.ActionTypes.CHANNEL_SELECT,E),i.FluxDispatcher.unsubscribe(n.ActionTypes.CREATE_PENDING_REPLY,p),i.FluxDispatcher.unsubscribe(n.ActionTypes.DELETE_PENDING_REPLY,o),window.removeEventListener("keydown",g)}};return C})(cumcord.modules.common.constants,cumcord.modules.webpackModules,cumcord.modules.common);
