(function(u,f,p,l,z,y,i){"use strict";function S(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var w=S(u);const h=window._,b=(e,t)=>{t.store[e]=t.ghost[e]},O=e=>{const t=parseFloat(e.slice(0,-1));switch(h.last(e)){case"s":return t*1e3;case"m":return t*1e3*60;case"h":return t*1e3*60*60;case"d":return t*1e3*60*60*24;case"w":return t*1e3*60*60*24*7;case"y":return t*1e3*60*60*24*365;default:throw new Error(`time unit ${h.last(e)} is not recognised`)}},x=(e,t)=>(r,n,s,o=Date.now())=>{t.ghost[e].set(r,[n,o+O(s)]),b(e,t)};function g(e,t){const r=Date.now(),n=t.ghost[e];for(const[s,o]of n.entries()){if(!Array.isArray(o)||o.length!==2||typeof o[1]!="number")throw new Error("cacheName does not point to a cumcache store");o[1]>=r&&n.delete(s)}b(e,t)}const P=(e,t)=>new Proxy(t.ghost[e],{get:(r,n)=>t.ghost[e].get(n)?.[0],set:(r,n,s)=>{throw Error("Setting to the cumcache store is not allowed.")},deleteProperty:(r,n)=>t.ghost[e].delete(n)});function v(e="cumcache",t=u.persist){t.ghost[e]||(t.store[e]=new Map);const r=setInterval(()=>g(e,t),5e3);return g(e,t),[()=>clearInterval(r),x(e,t),P(e,t),()=>g(e,t)]}function T(e,t,r=u.persist){const[n,s,o,a]=v(e,r),d=new Proxy(o,{get:(m,c)=>o[c],deleteProperty:(m,c)=>delete o[c],set:(m,c,q)=>(s(c,q,t),!0)});return[n,d,a]}var N=(e,t=!1,r=!1)=>{const n=o=>typeof o?.type=="string"||r&&!o?.type?.displayName?n(o.return):o?.type,s=n(f.getReactInstance(e));return t?p.find(o=>o?.default===s):s},j=(e,t)=>{let r=e.some(o=>l.loaded.ghost.hasOwnProperty(o))?t():null;const n=(o,{path:a})=>{e.includes(a[0])&&(r?.(),r=t())},s=(o,{path:a})=>{e.includes(a[0])&&(r?.(),r=null)};return l.loaded.on("SET",n),l.loaded.on("DELETE",s),()=>{r?.(),l.loaded.off("SET",n),l.loaded.off("DELETE",s)}},B=Object.freeze({__proto__:null,cumcache:v,boundCumcache:T,findByDomNode:N,depend:j});const k=e=>{let t=Object.keys(e);return e.__proto__&&t.push(...k(e.__proto__)),t},C=e=>{if(f.logger.warn("!! THIS FUNCTION CAN BE VERY SLOW AND RAM INTENSIVE, FOR DEV ONLY !!"),!e)return{method:"unfindable"};if(e.displayName||e.default?.displayName){const r=e.displayName??e.default.displayName,n=p.findAll(s=>(e.displayName?s?.displayName:s?.default?.displayName)===r);return n[0]===e?["displayName",!!e.displayName,r]:["displayNameAll",!!e.displayName,r,n.findIndex(s=>s===e)]}return((r,n)=>{const s=k(r);for(const a of s)if(findByProps(a)===r)return["props",[a],n];let o=[];for(const a of s){const d=p.findByPropsAll(a).findIndex(m=>m===r);d!==-1&&o.push([a,d])}return o.sort((a,d)=>a[1]-d[1]),["propsAll",[o[0][0]],o[0][1],n]})(e,!1)};var A=e=>{const t=a=>a.map(JSON.stringify).join(", "),r=a=>a?".default":"",n=a=>a?"":", false",s=a=>(f.logger.log("Copied module find code to clipboard."),f.copyText(a),a),o=C(e);switch(o[0]){case"unfindable":return!1;case"props":return s(`findByProps(${t(o[1])})${r(o[2])}`);case"propsAll":return s(`findByPropsAll(${t(o[1])})[${o[2]}]${r(o[3])}`);case"displayName":return s(`findByDisplayName(${JSON.stringify(o[2])}${n(o[1])})`);case"displayNameAll":return o[1]?s(`findByDisplayNameAll(${JSON.stringify(o[2])})[${o[3]}]`):s(`(() => {
    const mod = findByDisplayNameAll(${JSON.stringify(o[2])})[${o[3]}];
    return find(m => m?.default === mod);
})()`)}return o};const E=e=>(e.startsWith(".")&&(e=e.substring(1)),p.findAll(t=>typeof t=="object"&&Object.values(t).some(r=>typeof r=="string"&&r.includes(e)))),I=e=>(typeof e=="string"&&(e=document.querySelector(e)),A(N(e,!1,!0)));var M=()=>(window.dk={cctools:B,bestFindMethod:A,autoModuleFind:I,findClassNameModuleAll:E,findClassNameModule:e=>E(e)[0]},()=>delete window.dk),$=()=>{window.DiscordNative&&DiscordNative.window.setDevtoolsCallbacks(()=>{},()=>{})},L=()=>(Object.assign(window,y.common),()=>{for(const e in y.common)delete window[e]}),R=()=>(u.persist.ghost.otp?Object.assign(window,{injectCSS:i.patcher.injectCSS,after:(e,t,r,n=!0)=>i.patcher.after(e,t,r,n),before:(e,t,r,n=!0)=>i.patcher.before(e,t,r,n),instead:(e,t,r,n=!0)=>i.patcher.instead(e,t,r,n)}):Object.assign(window,i.patcher),()=>{for(const e in i.patcher)delete window[e]}),V=()=>(Object.assign(window,y.webpack),()=>{for(const e in y.webpack)delete window[e]});const J=M();Array.isArray(w.default.persist.ghost.enabledModules)||(w.default.persist.store.enabledModules=["webpack","common","patcher","callbacks"]);const U={webpack:[V,"Exposes webpack modules to window"],common:[L,"Exposes common modules (react etc) to window"],patcher:[R,"Exposes patcher to window"],callbacks:[$,"Disables spam logs on devtools open"]};let D=[];const W=w.default.persist.ghost.enabledModules;for(const e of W)D.push(U[e]?.[0]());var Y={onUnload(){_.forEachRight(D,e=>e?.()),J()}};return Y})(cumcord.pluginData,cumcord.utils,cumcord.modules.webpack,cumcord.plugins,cumcord.patcher,cumcord.modules,cumcord);
