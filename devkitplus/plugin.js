(function(g,i,J,m,d,y,z,U,S,c,V){"use strict";function P(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function W(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(s){if(s!=="default"){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}}),t.default=e,Object.freeze(t)}var j=P(J),a=P(z),f=W(V);i.persist.ghost.startupDev&&j.default?.isEnabled===!1&&j.default.toggleDevMode();const B=window._,x=(e,t)=>{t.set({path:[e],value:t.ghost[e]})},Y=e=>{const t=parseFloat(e.slice(0,-1));switch(B.last(e)){case"s":return t*1e3;case"m":return t*1e3*60;case"h":return t*1e3*60*60;case"d":return t*1e3*60*60*24;case"w":return t*1e3*60*60*24*7;case"y":return t*1e3*60*60*24*365;default:throw new Error(`time unit ${B.last(e)} is not recognised`)}},q=(e,t)=>(s,o,n,r=Date.now())=>{t.ghost[e].set(s,[o,r+Y(n)]),x(e,t)};function v(e,t){const s=Date.now(),o=t.ghost[e];for(const[n,r]of o.entries()){if(!Array.isArray(r)||r.length!==2||typeof r[1]!="number")throw new Error("cacheName does not point to a cumcache store");r[1]>=s&&o.delete(n)}x(e,t)}const H=(e,t)=>new Proxy(t.ghost[e],{get:(s,o)=>t.ghost[e].get(o)?.[0],set:()=>{throw Error("Setting to the cumcache store is not allowed.")},deleteProperty:(s,o)=>t.ghost[e].delete(o)});function D(e="cumcache",t=i.persist){t.ghost[e]||(t.store[e]=new Map);const s=setInterval(()=>v(e,t),5e3);return v(e,t),[()=>clearInterval(s),q(e,t),H(e,t),()=>v(e,t)]}function G(e,t,s=i.persist){const[o,n,r,l]=D(e,s),p=new Proxy(r,{get:(E,h)=>r[h],deleteProperty:(E,h)=>delete r[h],set:(E,h,ue)=>(n(h,ue,t),!0)});return[o,p,l]}var I=(e,t=!1,s=!1)=>{const o=r=>typeof r?.type=="string"||s&&!r?.type?.displayName?o(r.return):r?.type,n=o(m.getReactInstance(e));return t?d.find(r=>r?.default===n):n},K=(e,t)=>{let s=e.some(r=>y.loaded.ghost.hasOwnProperty(r))?t():null;const o=(r,{path:l})=>{e.includes(l[0])&&(s?.(),s=t())},n=(r,{path:l})=>{e.includes(l[0])&&(s?.(),s=null)};return y.loaded.on("SET",o),y.loaded.on("DELETE",n),()=>{s?.(),y.loaded.off("SET",o),y.loaded.off("DELETE",n)}};const w=d.findByDisplayName("FormText"),Q=d.findByDisplayName("Switch"),X=d.findByDisplayName("TextInput"),Z=d.findByDisplayName("Select",!1).SingleSelect,N=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),u=({k:e,depends:t,children:s})=>a.default.createElement("div",{style:N(t)},a.default.createElement(Q,{checked:i.persist.ghost[e],disabled:t!==void 0&&!i.persist.ghost[t],onChange:o=>i.persist.store[e]=o}),a.default.createElement(w,{children:s})),M=({k:e,depends:t,children:s})=>a.default.createElement("div",{style:N(t)},a.default.createElement(X,{value:i.persist.ghost[e],disabled:t!==void 0&&!i.persist.ghost[t],onChange:o=>i.persist.store[e]=o}),a.default.createElement(w,{children:s})),R=({k:e,options:t,depends:s,children:o})=>a.default.createElement("div",{style:N(s)},a.default.createElement(Z,{options:t,value:i.persist.ghost[e],isDisabled:s!==void 0&&!i.persist.ghost[s],onChange:n=>i.persist.store[e]=n}),a.default.createElement(w,{children:o})),b=e=>t=>(m.useNest(i.persist),e(t)),T=(e,t=i.persist)=>{for(const s in e)t.ghost[s]===void 0&&(t.store[s]=e[s])};var ee=Object.freeze({__proto__:null,SSwitch:u,SText:M,SSelect:R,dependPersist:b,setDefaults:T}),te=Object.freeze({__proto__:null,cumcache:D,boundCumcache:G,findByDomNode:I,depend:K,settings:ee,SSwitch:u,SText:M,SSelect:R,dependPersist:b,setDefaults:T});const F=e=>{let t=Object.keys(e);return e.__proto__&&t.push(...F(e.__proto__)),t},se=e=>{if(m.logger.warn("!! THIS FUNCTION CAN BE VERY SLOW AND RAM INTENSIVE, FOR DEV ONLY !!"),!e)return{method:"unfindable"};if(e.displayName||e.default?.displayName){const s=e.displayName??e.default.displayName,o=d.findAll(n=>(e.displayName?n?.displayName:n?.default?.displayName)===s);return o[0]===e?["displayName",!!e.displayName,s]:["displayNameAll",!!e.displayName,s,o.findIndex(n=>n===e)]}return((s,o)=>{const n=F(s);for(const l of n)if(findByProps(l)===s)return["props",[l],o];let r=[];for(const l of n){const p=d.findByPropsAll(l).findIndex(E=>E===s);p!==-1&&r.push([l,p])}return r.sort((l,p)=>l[1]-p[1]),["propsAll",[r[0][0]],r[0][1],o]})(e,!1)};var L=e=>{const t=l=>l.map(JSON.stringify).join(", "),s=l=>l?".default":"",o=l=>l?"":", false",n=l=>(m.logger.log("Copied module find code to clipboard."),m.copyText(l),l),r=se(e);switch(r[0]){case"unfindable":return!1;case"props":return n(`findByProps(${t(r[1])})${s(r[2])}`);case"propsAll":return n(`findByPropsAll(${t(r[1])})[${r[2]}]${s(r[3])}`);case"displayName":return n(`findByDisplayName(${JSON.stringify(r[2])}${o(r[1])})`);case"displayNameAll":return r[1]?n(`findByDisplayNameAll(${JSON.stringify(r[2])})[${r[3]}]`):n(`getModule(findByDisplayNameAll(${JSON.stringify(r[2])})[${r[3]}])`)}return r};const k=e=>(e.startsWith(".")&&(e=e.slice(1)),d.findAll(t=>typeof t=="object"&&Object.values(t).some(s=>typeof s=="string"&&s.includes(e)))),re=e=>L(I(typeof e=="string"?document.querySelector(e):e,!1,!0));let O=[];const oe=(e,t,s=!1)=>{const o=U.after(e,t,(n,r)=>console.log("|| RECON: ",e," ||",n,r),s);return O.push(o),o};window.dk={cctools:te,bestFindMethod:L,autoModuleFind:re,findClassNameModuleAll:k,findClassNameModule:e=>k(e)[0],recon:oe,unrecon:()=>{O.forEach(e=>e()),O=[]}};var ne=()=>delete window.dk;const A=()=>{i.persist.ghost.disableCallbacks&&DiscordNative.window.setDevtoolsCallbacks(()=>{},()=>{})};window.DiscordNative&&(i.persist.on("SET",A),A());var le=window.DiscordNative?()=>i.persist.off("SET",A):void 0;const ie=()=>{const e=i.persist.ghost.otp?{...c.patcher,after:(s,o,n,r=!0)=>c.patcher.after(s,o,n,r),before:(s,o,n,r=!0)=>c.patcher.before(s,o,n,r),instead:(s,o,n,r=!0)=>c.patcher.instead(s,o,n,r)}:c.patcher,t={...S.webpack,...S.common,...S.internal,...c.utils,...e};return Object.assign(window,t),()=>Object.keys(t).forEach(s=>delete window[s])};let $;const C=()=>{$?.(),i.persist.ghost.assign&&($=ie())};i.persist.on("SET",C),C();var ae=()=>{i.persist.off("SET",C),$?.()};T({assign:!0,otp:!1,startupDev:!0,disableCallbacks:!0});var de=b(()=>f.createElement(f.Fragment,null,f.createElement(u,{k:"assign"},"Assign modules, utils, patcher to window"),f.createElement(u,{k:"otp",depends:"apply"},"Make exported patcher functions one time by default"),f.createElement(u,{k:"startupDev"},"Enable Cumcord dev mode on start"),f.createElement(u,{k:"disableCallbacks"},'Disable DevTools "Wait!" logs')));const ce=[ne,le,ae],fe=()=>_.forEachRight(ce,e=>e?.());return g.onUnload=fe,g.settings=de,Object.defineProperty(g,"__esModule",{value:!0}),g})({},cumcord.pluginData,cumcord.dev,cumcord.utils,cumcord.modules.webpack,cumcord.plugins,cumcord.modules.common.React,cumcord.patcher,cumcord.modules,cumcord,cumcord.modules.common.React);
