(function(g,i,k,m,d,y,J,v,c,z){"use strict";function C(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function U(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(s){if(s!=="default"){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}}),t.default=e,Object.freeze(t)}var P=C(k),a=C(J),f=U(z);i.persist.ghost.startupDev&&P.default?.isEnabled===!1&&P.default.toggleDevMode();const j=window._,B=(e,t)=>{t.set({path:[e],value:t.ghost[e]})},V=e=>{const t=parseFloat(e.slice(0,-1));switch(j.last(e)){case"s":return t*1e3;case"m":return t*1e3*60;case"h":return t*1e3*60*60;case"d":return t*1e3*60*60*24;case"w":return t*1e3*60*60*24*7;case"y":return t*1e3*60*60*24*365;default:throw new Error(`time unit ${j.last(e)} is not recognised`)}},W=(e,t)=>(s,o,n,r=Date.now())=>{t.ghost[e].set(s,[o,r+V(n)]),B(e,t)};function E(e,t){const s=Date.now(),o=t.ghost[e];for(const[n,r]of o.entries()){if(!Array.isArray(r)||r.length!==2||typeof r[1]!="number")throw new Error("cacheName does not point to a cumcache store");r[1]>=s&&o.delete(n)}B(e,t)}const Y=(e,t)=>new Proxy(t.ghost[e],{get:(s,o)=>t.ghost[e].get(o)?.[0],set:()=>{throw Error("Setting to the cumcache store is not allowed.")},deleteProperty:(s,o)=>t.ghost[e].delete(o)});function x(e="cumcache",t=i.persist){t.ghost[e]||(t.store[e]=new Map);const s=setInterval(()=>E(e,t),5e3);return E(e,t),[()=>clearInterval(s),W(e,t),Y(e,t),()=>E(e,t)]}function q(e,t,s=i.persist){const[o,n,r,l]=x(e,s),p=new Proxy(r,{get:(S,h)=>r[h],deleteProperty:(S,h)=>delete r[h],set:(S,h,de)=>(n(h,de,t),!0)});return[o,p,l]}var D=(e,t=!1,s=!1)=>{const o=r=>typeof r?.type=="string"||s&&!r?.type?.displayName?o(r.return):r?.type,n=o(m.getReactInstance(e));return t?d.find(r=>r?.default===n):n},H=(e,t)=>{let s=e.some(r=>y.loaded.ghost.hasOwnProperty(r))?t():null;const o=(r,{path:l})=>{e.includes(l[0])&&(s?.(),s=t())},n=(r,{path:l})=>{e.includes(l[0])&&(s?.(),s=null)};return y.loaded.on("SET",o),y.loaded.on("DELETE",n),()=>{s?.(),y.loaded.off("SET",o),y.loaded.off("DELETE",n)}};const w=d.findByDisplayName("FormText"),G=d.findByDisplayName("Switch"),K=d.findByDisplayName("TextInput"),Q=d.findByDisplayName("Select",!1).SingleSelect,N=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),u=({k:e,depends:t,children:s})=>a.default.createElement("div",{style:N(t)},a.default.createElement(G,{checked:i.persist.ghost[e],disabled:t!==void 0&&!i.persist.ghost[t],onChange:o=>i.persist.store[e]=o}),a.default.createElement(w,{children:s})),I=({k:e,depends:t,children:s})=>a.default.createElement("div",{style:N(t)},a.default.createElement(K,{value:i.persist.ghost[e],disabled:t!==void 0&&!i.persist.ghost[t],onChange:o=>i.persist.store[e]=o}),a.default.createElement(w,{children:s})),M=({k:e,options:t,depends:s,children:o})=>a.default.createElement("div",{style:N(s)},a.default.createElement(Q,{options:t,value:i.persist.ghost[e],isDisabled:s!==void 0&&!i.persist.ghost[s],onChange:n=>i.persist.store[e]=n}),a.default.createElement(w,{children:o})),b=e=>t=>(m.useNest(i.persist),e(t)),T=(e,t=i.persist)=>{for(const s in e)t.ghost[s]===void 0&&(t.store[s]=e[s])};var X=Object.freeze({__proto__:null,SSwitch:u,SText:I,SSelect:M,dependPersist:b,setDefaults:T}),Z=Object.freeze({__proto__:null,cumcache:x,boundCumcache:q,findByDomNode:D,depend:H,settings:X,SSwitch:u,SText:I,SSelect:M,dependPersist:b,setDefaults:T});const R=e=>{let t=Object.keys(e);return e.__proto__&&t.push(...R(e.__proto__)),t},ee=e=>{if(m.logger.warn("!! THIS FUNCTION CAN BE VERY SLOW AND RAM INTENSIVE, FOR DEV ONLY !!"),!e)return{method:"unfindable"};if(e.displayName||e.default?.displayName){const s=e.displayName??e.default.displayName,o=d.findAll(n=>(e.displayName?n?.displayName:n?.default?.displayName)===s);return o[0]===e?["displayName",!!e.displayName,s]:["displayNameAll",!!e.displayName,s,o.findIndex(n=>n===e)]}return((s,o)=>{const n=R(s);for(const l of n)if(findByProps(l)===s)return["props",[l],o];let r=[];for(const l of n){const p=d.findByPropsAll(l).findIndex(S=>S===s);p!==-1&&r.push([l,p])}return r.sort((l,p)=>l[1]-p[1]),["propsAll",[r[0][0]],r[0][1],o]})(e,!1)};var F=e=>{const t=l=>l.map(JSON.stringify).join(", "),s=l=>l?".default":"",o=l=>l?"":", false",n=l=>(m.logger.log("Copied module find code to clipboard."),m.copyText(l),l),r=ee(e);switch(r[0]){case"unfindable":return!1;case"props":return n(`findByProps(${t(r[1])})${s(r[2])}`);case"propsAll":return n(`findByPropsAll(${t(r[1])})[${r[2]}]${s(r[3])}`);case"displayName":return n(`findByDisplayName(${JSON.stringify(r[2])}${o(r[1])})`);case"displayNameAll":return r[1]?n(`findByDisplayNameAll(${JSON.stringify(r[2])})[${r[3]}]`):n(`getModule(findByDisplayNameAll(${JSON.stringify(r[2])})[${r[3]}])`)}return r};const L=e=>(e.startsWith(".")&&(e=e.slice(1)),d.findAll(t=>typeof t=="object"&&Object.values(t).some(s=>typeof s=="string"&&s.includes(e)))),te=e=>F(D(typeof e=="string"?document.querySelector(e):e,!1,!0));window.dk={cctools:Z,bestFindMethod:F,autoModuleFind:te,findClassNameModuleAll:L,findClassNameModule:e=>L(e)[0]};var se=()=>delete window.dk;const O=()=>{i.persist.ghost.disableCallbacks&&DiscordNative.window.setDevtoolsCallbacks(()=>{},()=>{})};window.DiscordNative&&(i.persist.on("SET",O),O());var re=window.DiscordNative?()=>i.persist.off("SET",O):void 0;const oe=()=>{const e=i.persist.ghost.otp?{...c.patcher,after:(s,o,n,r=!0)=>c.patcher.after(s,o,n,r),before:(s,o,n,r=!0)=>c.patcher.before(s,o,n,r),instead:(s,o,n,r=!0)=>c.patcher.instead(s,o,n,r)}:c.patcher,t={...v.webpack,...v.common,...v.internal,...c.utils,...e};return Object.assign(window,t),()=>Object.keys(t).forEach(s=>delete window[s])};let A;const $=()=>{A?.(),i.persist.ghost.assign&&(A=oe())};i.persist.on("SET",$),$();var ne=()=>{i.persist.off("SET",$),A?.()};T({assign:!0,otp:!1,startupDev:!0,disableCallbacks:!0});var le=b(()=>f.createElement(f.Fragment,null,f.createElement(u,{k:"assign"},"Assign modules, utils, patcher to window"),f.createElement(u,{k:"otp",depends:"apply"},"Make exported patcher functions one time by default"),f.createElement(u,{k:"startupDev"},"Enable Cumcord dev mode on start"),f.createElement(u,{k:"disableCallbacks"},'Disable DevTools "Wait!" logs')));const ie=[se,re,ne],ae=()=>_.forEachRight(ie,e=>e?.());return g.onUnload=ae,g.settings=le,Object.defineProperty(g,"__esModule",{value:!0}),g})({},cumcord.pluginData,cumcord.dev,cumcord.utils,cumcord.modules.webpack,cumcord.plugins,cumcord.modules.common.React,cumcord.modules,cumcord,cumcord.modules.common.React);
