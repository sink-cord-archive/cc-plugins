(function(c,i,o,d,n){"use strict";const{getMember:m}=i.findByProps("getMember"),{getUser:p}=i.findByProps("getUser","getCurrentUser"),f=i.find(r=>r.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1);var g=()=>o.after("type",f,([r],t)=>{if(c.persist.ghost.msg===!1)return;const s=r.channel.guild_id,e=r.message.author.id,u=m(s,e),N=p(e),h=d.findInReactTree(t,k=>k?.childrenHeader)?.childrenHeader.props.author;if(!(!h||!u?.nick))return h.nick=`${u.nick} (${N.username})`,t}),E=()=>o.after("render",i.findByDisplayName("VoiceUsers").prototype,(r,t)=>{if(c.persist.ghost.vc!==!1&&!!t?.props?.children){for(let s=0;s<t.props.children.length;s++){const e=t.props.children[0][s];e?.props?.nick&&(e.props.nick=`${e.props.nick} (${e.props.user.username})`)}return t}});const a=i.findByDisplayName("FormText"),l=i.findByDisplayName("Switch");var y=()=>(d.useNest(c.persist),n.React.createElement(n.React.Fragment,null,n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(l,{checked:c.persist.ghost.vc??!0,onChange:r=>c.persist.store.vc=r}),n.React.createElement(a,null,"Show usernames in Voice Chat")),n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(l,{checked:c.persist.ghost.ml??!0,onChange:r=>c.persist.store.ml=r}),n.React.createElement(a,null,"Show usernames in Member List")),n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(l,{checked:c.persist.ghost.msg??!0,onChange:r=>c.persist.store.msg=r}),n.React.createElement(a,null,"Show usernames in Messages")))),R=()=>cumcord.patcher.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),S=()=>o.after("default",i.findByDisplayName("ConnectedChannelMembers",!1),(r,t)=>{if(c.persist.ghost.ml===!1||!t?.props?.children?.props?.children?.props?.rows)return;const s=t.props.children.props.children.props.rows;for(let e=0;e<s.length;e++)s[e]?.type!=="MEMBER"||s[e].YSINK_USERN_PATCHED||(s[e].YSINK_USERN_PATCHED=!0,s[e].nick&&(s[e].nick=`${s[e].nick} (${s[e].user.username})`));return t}),v=()=>{const r=[R(),g(),E(),S()];return{onUnload:()=>_.forEachRight(r,t=>t()),settings:y}};return v})(cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.utils,cumcord.modules.common);
