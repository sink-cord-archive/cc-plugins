(function(i,s,u,a,o,d,$,h){"use strict";function g(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function p(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var c=p(d),m=g(h);const[S,x,L,{getMember:E},{getUser:y},b,v]=o.batchFind(({findByProps:e,findByDisplayName:t,find:r})=>{t("VoiceUsers"),t("FormText"),t("Switch"),e("getMember"),e("getUser","_dispatcher"),r(n=>n.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1),t("ConnectedChannelMembers",!1)});var R=u.after("type",b,([{channel:e,message:t}],r)=>{if(!s.persist.ghost.msg)return;const n=a.findInReactTree(r,F=>F?.childrenHeader)?.childrenHeader.props.author;if(!n)return;const l=E(e.guild_id,t.author.id),P=y(t.author.id);return l?.nick&&(n.nick=`${l.nick} (${P.username})`),r}),w=u.after("render",S.prototype,(e,t)=>{if(!(!s.persist.ghost.vc||!t?.props?.children?.[0])){for(const r of t.props.children)r?.props?.nick&&(r.props.nick+=` (${r.props.user.username})`);return t}}),M=()=>u.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),C=u.after("default",v,(e,t)=>{if(!s.persist.ghost.ml)return;const r=a.findInReactTree(t,n=>n?.rows)?.rows;if(!!r){for(const n of r)n.YSINK_USERN_PATCHED=!0,n?.type==="MEMBER"&&!n.YSINK_USERN_PATCHED&&n.nick&&(n.nick+=` (${n.user.username})`);return t}});const O=o.findByDisplayName("FormText"),T=o.findByDisplayName("Switch");o.findByDisplayName("TextInput"),o.findByDisplayName("Select",!1).SingleSelect;const j=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),f=({k:e,depends:t,children:r})=>m.default.createElement("div",{style:j(t)},m.default.createElement(T,{checked:s.persist.ghost[e],disabled:t!==void 0&&!s.persist.ghost[t],onChange:n=>s.persist.store[e]=n}),m.default.createElement(O,{children:r})),I=e=>t=>(a.useNest(s.persist),e(t));((e,t=s.persist)=>{for(const r in e)t.ghost[r]===void 0&&(t.store[r]=e[r])})({vc:!0,ml:!0,msg:!0});var N=I(()=>c.createElement(c.Fragment,null,c.createElement(f,{k:"vc"},"Show usernames in Voice Chat"),c.createElement(f,{k:"ml"},"Show usernames in Member List"),c.createElement(f,{k:"msg"},"Show usernames in Member List")));const U=[M(),R,w,C],k=()=>_.forEachRight(U,e=>e());return i.onUnload=k,i.settings=N,Object.defineProperty(i,"__esModule",{value:!0}),i})({},cumcord.pluginData,cumcord.patcher,cumcord.utils,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.plugins,cumcord.modules.common.React);
