(function(o,c,i,m,f){"use strict";function p(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}}),n.default=e,Object.freeze(n)}var s=p(f);const{getMember:h}=c.findByProps("getMember"),{getUser:g}=c.findByProps("getUser","getCurrentUser"),y=c.find(e=>e.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1);var E=()=>i.after("type",y,([e],n)=>{if(o.persist.ghost.msg===!1)return;const t=e.channel.guild_id,r=e.message.author.id,d=h(t,r),k=g(r),u=m.findInReactTree(n,M=>M?.childrenHeader)?.childrenHeader.props.author;if(!(!u||!d?.nick))return u.nick=`${d.nick} (${k.username})`,n}),v=()=>i.after("render",c.findByDisplayName("VoiceUsers").prototype,(e,n)=>{if(o.persist.ghost.vc!==!1&&!!n?.props?.children?.[0]){for(let t=0;t<n.props.children.length;t++){const r=n.props.children[0][t];r?.props?.nick&&(r.props.nick=`${r.props.nick} (${r.props.user.username})`)}return n}});const a=c.findByDisplayName("FormText"),l=c.findByDisplayName("Switch");var N=()=>(m.useNest(o.persist),s.createElement(s.Fragment,null,s.createElement("div",{className:"ysink_usern_row"},s.createElement(l,{checked:o.persist.ghost.vc??!0,onChange:e=>o.persist.store.vc=e}),s.createElement(a,null,"Show usernames in Voice Chat")),s.createElement("div",{className:"ysink_usern_row"},s.createElement(l,{checked:o.persist.ghost.ml??!0,onChange:e=>o.persist.store.ml=e}),s.createElement(a,null,"Show usernames in Member List")),s.createElement("div",{className:"ysink_usern_row"},s.createElement(l,{checked:o.persist.ghost.msg??!0,onChange:e=>o.persist.store.msg=e}),s.createElement(a,null,"Show usernames in Messages")))),S=()=>i.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),C=()=>i.after("default",c.findByDisplayName("ConnectedChannelMembers",!1),(e,n)=>{if(o.persist.ghost.ml===!1)return;const t=m.findInReactTree(n,r=>r?.rows)?.rows;if(t){for(let r=0;r<t.length;r++)t[r]?.type!=="MEMBER"||t[r].YSINK_USERN_PATCHED||(t[r].YSINK_USERN_PATCHED=!0,t[r].nick&&(t[r].nick=`${t[r].nick} (${t[r].user.username})`));return n}}),R=()=>{const e=[S(),E(),v(),C()];return{onUnload:()=>_.forEachRight(e,n=>n()),settings:N}};return R})(cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.utils,cumcord.modules.common.React);
