(function(i,s,a,m,o,l,D,p){"use strict";function h(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var c=g(l),u=h(p);const[y,F,$,{getMember:S},{getUser:E},b,v]=o.batchFind(({findByProps:e,findByDisplayName:t,find:r})=>{t("VoiceUsers"),t("FormText"),t("Switch"),e("getMember"),e("getUser","_dispatcher"),r(n=>n.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1),t("ConnectedChannelMembers",!1)});var R=a.after("type",b,([{channel:e,message:t}],r)=>{if(!s.persist.ghost.msg)return;const n=m.findInReactTree(r,k=>k?.childrenHeader)?.childrenHeader.props.author;if(!n)return;const f=S(e.guild_id,t.author.id),U=E(t.author.id);return f?.nick&&(n.nick=`${f.nick} (${U.username})`),r}),M=a.after("render",y.prototype,(e,t)=>{if(!(!s.persist.ghost.vc||!t?.props?.children?.[0])){for(const r of t.props.children)r?.props?.nick&&(r.props.nick+=` (${r.props.user.username})`);return t}}),N=()=>a.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),w=a.after("default",v,(e,t)=>{if(!s.persist.ghost.ml)return;const r=m.findInReactTree(t,n=>n?.rows)?.rows;if(r){for(const n of r)n.YSINK_USERN_PATCHED=!0,n?.type==="MEMBER"&&!n.YSINK_USERN_PATCHED&&n.nick&&(n.nick+=` (${n.user.username})`);return t}});const C=o.findByDisplayName("FormText"),O=o.findByDisplayName("Switch");o.findByDisplayName("TextInput"),o.findByDisplayName("Select",!1).SingleSelect;const T=e=>({display:"flex",alignItems:"center",gap:".5rem",marginBottom:"1rem",marginLeft:e!==void 0?"1rem":0}),d=({k:e,depends:t,children:r})=>u.default.createElement("div",{style:T(t)},u.default.createElement(O,{checked:s.persist.ghost[e],disabled:t!==void 0&&!s.persist.ghost[t],onChange:n=>s.persist.store[e]=n}),u.default.createElement(C,{children:r})),P=e=>t=>(m.useNest(s.persist),e(t));((e,t=s.persist)=>{for(const r in e)t.ghost[r]===void 0&&(t.store[r]=e[r])})({vc:!0,ml:!0,msg:!0});var j=P(()=>c.createElement(c.Fragment,null,c.createElement(d,{k:"vc"},"Show usernames in Voice Chat"),c.createElement(d,{k:"ml"},"Show usernames in Member List"),c.createElement(d,{k:"msg"},"Show usernames in Member List")));const B=[N(),R,M,w],I=()=>_.forEachRight(B,e=>e());return i.onUnload=I,i.settings=j,Object.defineProperty(i,"__esModule",{value:!0}),i})({},cumcord.pluginData,cumcord.patcher,cumcord.utils,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.plugins,cumcord.modules.common.React);
