(function(n,i,o,l,t){"use strict";const{getMember:d}=i.findByProps("getMember"),{getUser:u}=i.findByProps("getUser","getCurrentUser"),m=i.find(e=>e.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1);var h=()=>o.after("type",m,([{channel:{guild_id:e},message:{author:{id:r}}}],s)=>{if(n.persist.ghost.msg===!1)return;const c=d(e,r),v=u(r);return c?.nick&&s?.props.children?.props.children?.props.childrenHeader?.props.author&&(s.props.children.props.children.props.childrenHeader.props.author.nick=`${c.nick} (${v.username})`),s}),f=()=>o.after("render",i.findByDisplayName("VoiceUsers").prototype,(e,r)=>{if(n.persist.ghost.vc!==!1&&!!r){for(let s=0;s<r.props.children.length;s++){const c=r.props.children[0][s];c.props.nick&&(c.props.nick=`${c.props.nick} (${c.props.user.username})`)}return r}});const a=i.findByDisplayName("FormText"),p=i.findByDisplayName("Switch");var g=()=>(l.useNest(n.persist),t.React.createElement(t.React.Fragment,null,t.React.createElement("div",{className:"ysink_usern_row"},t.React.createElement(p,{checked:n.persist.ghost.vc??!0,onChange:e=>n.persist.store.vc=e}),t.React.createElement(a,null,"Show usernames in Voice Chat")),t.React.createElement("div",{className:"ysink_usern_row"},t.React.createElement(p,{checked:n.persist.ghost.ml??!0,onChange:e=>n.persist.store.ml=e}),t.React.createElement(a,null,"Show usernames in Member List")),t.React.createElement("div",{className:"ysink_usern_row"},t.React.createElement(p,{checked:n.persist.ghost.msg??!0,onChange:e=>n.persist.store.msg=e}),t.React.createElement(a,null,"Show usernames in Messages")))),y=()=>cumcord.patcher.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),E=()=>o.after("render",i.findByDisplayName("MemberListItem").prototype,(e,r)=>{if(n.persist.ghost.ml===!1||!r?._owner?.pendingProps)return;const s=r?._owner?.pendingProps;return s.nick&&(s.nick=`${s.nick} (${s.user.username})`),r}),R=()=>{const e=[y(),h(),f(),E()];return{onUnload:()=>_.forEachRight(e,r=>r()),settings:g}};return R})(cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.utils,cumcord.modules.common);
