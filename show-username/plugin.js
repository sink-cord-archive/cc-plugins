(function(c,o,i,a,f){"use strict";function h(e){if(e&&e.__esModule)return e;var s=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}}),s.default=e,Object.freeze(s)}var n=h(f);const{getMember:g}=o.findByProps("getMember"),{getUser:p}=o.findByProps("getUser","getCurrentUser"),y=o.find(e=>e.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1);var E=()=>i.after("type",y,([e],s)=>{if(c.persist.ghost.msg===!1)return;const t=e.channel.guild_id,r=e.message.author.id,l=g(t,r),k=p(r),d=a.findInReactTree(s,M=>M?.childrenHeader)?.childrenHeader.props.author;if(!(!d||!l?.nick))return d.nick=`${l.nick} (${k.username})`,s}),v=()=>i.after("render",o.findByDisplayName("VoiceUsers").prototype,(e,s)=>{if(c.persist.ghost.vc!==!1&&!!s?.props?.children){for(let t=0;t<s.props.children.length;t++){const r=s.props.children[0][t];r?.props?.nick&&(r.props.nick=`${r.props.nick} (${r.props.user.username})`)}return s}});const m=o.findByDisplayName("FormText"),u=o.findByDisplayName("Switch");var S=()=>(a.useNest(c.persist),n.createElement(n.Fragment,null,n.createElement("div",{className:"ysink_usern_row"},n.createElement(u,{checked:c.persist.ghost.vc??!0,onChange:e=>c.persist.store.vc=e}),n.createElement(m,null,"Show usernames in Voice Chat")),n.createElement("div",{className:"ysink_usern_row"},n.createElement(u,{checked:c.persist.ghost.ml??!0,onChange:e=>c.persist.store.ml=e}),n.createElement(m,null,"Show usernames in Member List")),n.createElement("div",{className:"ysink_usern_row"},n.createElement(u,{checked:c.persist.ghost.msg??!0,onChange:e=>c.persist.store.msg=e}),n.createElement(m,null,"Show usernames in Messages")))),N=()=>i.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),C=()=>i.after("default",o.findByDisplayName("ConnectedChannelMembers",!1),(e,s)=>{if(c.persist.ghost.ml===!1)return;const t=a.findInReactTree(s,r=>r?.rows)?.rows;if(!!t){for(let r=0;r<t.length;r++)t[r]?.type!=="MEMBER"||t[r].YSINK_USERN_PATCHED||(t[r].YSINK_USERN_PATCHED=!0,t[r].nick&&(t[r].nick=`${t[r].nick} (${t[r].user.username})`));return s}}),R=()=>{const e=[N(),E(),v(),C()];return{onUnload:()=>_.forEachRight(e,s=>s()),settings:S}};return R})(cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.utils,cumcord.modules.common.React);
