(function(i,c,o,p,n){"use strict";const{getMember:d}=c.findByProps("getMember"),{getUser:u}=c.findByProps("getUser","getCurrentUser"),h=c.find(s=>s.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1);var m=()=>o.after("type",h,([{channel:{guild_id:s},message:{author:{id:t}}}],r)=>{if(i.persist.ghost.msg===!1)return;const e=d(s,t),S=u(t);return e?.nick&&r?.props.children?.props.children?.props.childrenHeader?.props.author&&(r.props.children.props.children.props.childrenHeader.props.author.nick=`${e.nick} (${S.username})`),r}),f=()=>o.after("render",c.findByDisplayName("VoiceUsers").prototype,(s,t)=>{if(i.persist.ghost.vc!==!1&&!!t?.props?.children){for(let r=0;r<t.props.children.length;r++){const e=t.props.children[0][r];e?.props?.nick&&(e.props.nick=`${e.props.nick} (${e.props.user.username})`)}return t}});const a=c.findByDisplayName("FormText"),l=c.findByDisplayName("Switch");var g=()=>(p.useNest(i.persist),n.React.createElement(n.React.Fragment,null,n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(l,{checked:i.persist.ghost.vc??!0,onChange:s=>i.persist.store.vc=s}),n.React.createElement(a,null,"Show usernames in Voice Chat")),n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(l,{checked:i.persist.ghost.ml??!0,onChange:s=>i.persist.store.ml=s}),n.React.createElement(a,null,"Show usernames in Member List")),n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(l,{checked:i.persist.ghost.msg??!0,onChange:s=>i.persist.store.msg=s}),n.React.createElement(a,null,"Show usernames in Messages")))),E=()=>cumcord.patcher.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),y=()=>o.after("default",c.findByDisplayName("ConnectedChannelMembers",!1),(s,t)=>{if(i.persist.ghost.ml===!1||!t?.props?.children?.props?.children?.props?.rows)return;const r=t.props.children.props.children.props.rows;for(let e=0;e<r.length;e++)r[e]?.type!=="MEMBER"||r[e].YSINK_USERN_PATCHED||(r[e].YSINK_USERN_PATCHED=!0,r[e].nick&&(r[e].nick=`${r[e].nick} (${r[e].user.username})`));return t}),R=()=>{const s=[E(),m(),f(),y()];return{onUnload:()=>_.forEachRight(s,t=>t()),settings:g}};return R})(cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.utils,cumcord.modules.common);
