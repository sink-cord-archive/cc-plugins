(function(c,s,i,a,d,f){"use strict";function l(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,Object.freeze(r)}var o=l(f);const[h,p,g,{getMember:E},{getUser:b},S,y]=d.batchFind(({findByProps:e,findByDisplayName:r,find:t})=>{r("VoiceUsers"),r("FormText"),r("Switch"),e("getMember"),e("getUser","_dispatcher"),t(n=>n.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1),r("ConnectedChannelMembers",!1)});var k=i.after("type",S,([{channel:e,message:r}],t)=>{if(!s.persist.ghost.msg)return;const n=a.findInReactTree(t,P=>P?.childrenHeader)?.childrenHeader.props.author;if(!n)return;const u=E(e.guild_id,r.author.id),N=b(r.author.id);return u?.nick&&(n.nick=`${u.nick} (${N.username})`),t}),v=i.after("render",h.prototype,(e,r)=>{if(!(!s.persist.ghost.vc||!r?.props?.children?.[0])){for(const t of r.props.children)t?.props?.nick&&(t.props.nick+=` (${t.props.user.username})`);return r}}),M=()=>i.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),w=i.after("default",y,(e,r)=>{if(!s.persist.ghost.ml)return;const t=a.findInReactTree(r,n=>n?.rows)?.rows;if(t){for(const n of t)n.YSINK_USERN_PATCHED=!0,n?.type==="MEMBER"&&!n.YSINK_USERN_PATCHED&&n.nick&&(n.nick+=` (${n.user.username})`);return r}});const m=({k:e,children:r})=>o.createElement("div",{className:"ysink_usern_row"},o.createElement(g,{checked:s.persist.ghost[e],onChange:t=>s.persist.store[e]=t}),o.createElement(p,null,r));var R=()=>(a.useNest(s.persist),o.createElement(o.Fragment,null,o.createElement(m,{k:"vc"},"Show usernames in Voice Chat"),o.createElement(m,{k:"ml"},"Show usernames in Member List"),o.createElement(m,{k:"msg"},"Show usernames in Member List")));s.persist.ghost.vc??=!0,s.persist.ghost.ml??=!0,s.persist.ghost.msg??=!0;const C=[M(),k,v,w],O=()=>_.forEachRight(C,e=>e());return c.onUnload=O,c.settings=R,Object.defineProperty(c,"__esModule",{value:!0}),c})({},cumcord.pluginData,cumcord.patcher,cumcord.utils,cumcord.modules.webpack,cumcord.modules.common.React);
