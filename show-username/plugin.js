(function(c,i,a,o,n){"use strict";const{getMember:h}=i.findByProps("getMember"),{getUser:f}=i.findByProps("getUser","getCurrentUser"),g=i.find(s=>s.type?.toString().indexOf("MESSAGE_A11Y_ROLE_DESCRIPTION")>-1);var p=()=>a.after("type",g,([s],t)=>{if(c.persist.ghost.msg===!1)return;const r=s.channel.guild_id,e=s.message.author.id,u=h(r,e),N=f(e),m=o.findInReactTree(t,k=>k?.childrenHeader)?.childrenHeader.props.author;if(!(!m||!u?.nick))return m.nick=`${u.nick} (${N.username})`,t}),E=()=>a.after("render",i.findByDisplayName("VoiceUsers").prototype,(s,t)=>{if(c.persist.ghost.vc!==!1&&!!t?.props?.children){for(let r=0;r<t.props.children.length;r++){const e=t.props.children[0][r];e?.props?.nick&&(e.props.nick=`${e.props.nick} (${e.props.user.username})`)}return t}});const l=i.findByDisplayName("FormText"),d=i.findByDisplayName("Switch");var y=()=>(o.useNest(c.persist),n.React.createElement(n.React.Fragment,null,n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(d,{checked:c.persist.ghost.vc??!0,onChange:s=>c.persist.store.vc=s}),n.React.createElement(l,null,"Show usernames in Voice Chat")),n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(d,{checked:c.persist.ghost.ml??!0,onChange:s=>c.persist.store.ml=s}),n.React.createElement(l,null,"Show usernames in Member List")),n.React.createElement("div",{className:"ysink_usern_row"},n.React.createElement(d,{checked:c.persist.ghost.msg??!0,onChange:s=>c.persist.store.msg=s}),n.React.createElement(l,null,"Show usernames in Messages")))),R=()=>cumcord.patcher.injectCSS(".ysink_usern_row{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}"),S=()=>a.after("default",i.findByDisplayName("ConnectedChannelMembers",!1),(s,t)=>{if(c.persist.ghost.ml===!1)return;const r=o.findInReactTree(t,e=>e?.rows)?.rows;if(!!r){for(let e=0;e<r.length;e++)r[e]?.type!=="MEMBER"||r[e].YSINK_USERN_PATCHED||(r[e].YSINK_USERN_PATCHED=!0,r[e].nick&&(r[e].nick=`${r[e].nick} (${r[e].user.username})`));return t}}),v=()=>{const s=[R(),p(),E(),S()];return{onUnload:()=>_.forEachRight(s,t=>t()),settings:y}};return v})(cumcord.pluginData,cumcord.modules.webpack,cumcord.patcher,cumcord.utils,cumcord.modules.common);
