(function(c,f,_,s,u){"use strict";var g=()=>cumcord.patcher.injectCSS(".ysink_palette_modal{position:absolute;top:5rem;left:0;width:100vw;display:flex;align-items:center;background:none!important;box-shadow:none!important}.ysink_palette_palette{width:50rem;background-color:var(--background-secondary);color:#fff;padding:.75rem 0;border-radius:0;overflow:unset!important}.ysink_palette_item{padding:.3rem .3rem .3rem 1rem}.ysink_palette_item.ysink_palette_selected{background-color:#0005}.ysink_palette_input_wrapper{margin:0 .5rem 1rem;border:#ffffff33 solid 1px;display:flex;align-items:center;padding-left:.5rem}.ysink_palette_input{flex:1;margin-left:.5rem}.ysink_palette_input input{border:none!important;background:none!important;padding:0!important}"),k=({entry:e,selected:n})=>s.React.createElement("div",{className:n?"ysink_palette_item ysink_palette_selected":"ysink_palette_item"},e.label);const h=(e,n)=>{let a=[];return n.forEach((t,l)=>{let i=e.findIndex(p=>p.id==l);l!=-1&&(a.push([e[i],t]),e.splice(i,1))}),a=a.sort((t,l)=>l[1]-t[1]).map(t=>t[0]),a.concat(e)};var b=(e,n,a)=>{if(!a||a=="")return h(e,n);let t=e.filter(l=>l.label.toLowerCase().includes(a));return h(t,n)};const E=s.React.useState,{openModal:v}=c.findByProps("openModal"),y=c.findByProps("ModalCloseButton");c.findByDisplayName("Flex"),c.findByDisplayName("Header");const C=c.findByDisplayName("TextInput"),w=({e,nest:n,defaultEntries:a})=>{f.useNest(n);let[t,l]=E({selected:0,search:""});const i=b(a.concat(n.ghost.customEntries),n.ghost.usageCounts,t.search);console.log(n.ghost,a,i,t);const p=o=>{let r=t.selected;l({selected:r,search:o})},d=o=>{let r=t.search;l({selected:o,search:r})},B=o=>{switch(o.which){case 38:t.selected>0?d(t.selected-1):d(i.length-1);break;case 40:t.selected<i.length-1?d(t.selected+1):d(0);break;case 13:e.onClose();let r=i[t.selected],m=n.ghost.usageCounts,M=m.get(r.id)??0;m.set(r.id,M+1),n.store.usageCounts=m,r.action();break;default:document.getElementsByClassName("ysink_palette_input")[0].children[0].focus();break}};return s.React.createElement(_.ErrorBoundary,null,s.React.createElement(y.ModalRoot,{transitionState:e.transitionState,size:"small",className:"ysink_palette_modal",onKeyDown:B},s.React.createElement(y.ModalContent,{className:"ysink_palette_palette"},s.React.createElement("div",{className:"ysink_palette_input_wrapper"},">",s.React.createElement(C,{className:"ysink_palette_input",placeholder:"Search Actions",type:"text",value:t.search,onChange:o=>p(o)})),i.map((o,r)=>s.React.createElement(k,{entry:o,selected:r==t.selected})))))};var x=(e,n)=>v(a=>s.React.createElement(w,{e:a,nest:e,defaultEntries:n})),N=(e,n)=>{let a=t=>{(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.which==80&&x(e,n)};return document.addEventListener("keyup",a),()=>{document.removeEventListener("keyup",a)}},R=[{id:"notcum",label:"Not cum",action:()=>u.showToast({title:"You chose: Not cum",duration:5e3})},{id:"abitcum",label:"A bit cum",action:()=>u.showToast({title:"You chose: A bit cum",duration:5e3})},{id:"cum",label:"Cum",action:()=>u.showToast({title:"You chose: Cum",duration:5e3})}].map(e=>({source:"builtin",id:e.id,label:e.label,action:e.action})),S=({persist:e,id:n})=>{let a=[];return{onLoad(){Array.isArray(e.ghost.customEntries)||(e.store.customEntries=[]),e.ghost.usageCounts||(e.store.usageCounts=new Map),a.push(g(),N(e,R))},onUnload:()=>a.forEach(t=>t())}};return S})(cumcord.modules.webpack,cumcord.utils,cumcord.ui.components,cumcord.modules.common,cumcord.ui.toasts);
