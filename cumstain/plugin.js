(function(He,E,xe,ht,ft,Ce,le,Ye,ir,se,Ge,dt,mt){"use strict";function or(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function cr(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var h=cr(ft),z=or(ir);const lr=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,ur=/^\\@/;function hr(e){try{return JSON.parse(e)}catch{}}function fr(e){const t=e.split(`
`)[0],r=t.substring(t.lastIndexOf("//META")+6,t.lastIndexOf("*//")),s=hr(r);if(!s)throw new Error("META could not be parsed.");if(!s.name)throw new Error("META missing name data.");return s}function dr(e){const t=e.split("/**",2)[1].split("*/",1)[0],r={};let s="",n="";for(const o of t.split(lr))if(o.length!==0)if(o.charAt(0)==="@"&&o.charAt(1)!==" "){s!==""&&(r[s]=n);const u=o.indexOf(" ");s=o.substr(1,u-1),n=o.substr(u+1)}else n+=` ${o.replace("\\n",`
`).replace(ur,"@")}`;return r[s]=n.trim(),r}var mr=e=>{const t=e.split(`
`)[0];if(t.includes("//META"))return fr(e);if(t.includes("/**"))return dr(e);throw new Error("META was not found.")};const Ve={},ue={};async function qe(e){return Ve[e]||(ue[e]||(ue[e]=[fetch(e).then(async t=>{Ve[e]=[t.status,t.status===200?await t.text():void 0]}),0]),ue[e][1]++,await ue[e][0],ue[e][1]--,ue[e][1]===0&&delete ue[e]),Ve[e]}async function gt(e){const[t,r]=await qe(e);return[t,r?JSON.parse(r):void 0]}async function gr(e,t){const r=new URL(e,t).href,[s,n]=await qe(r);if(s!==200)throw new Error(`BD theme existed in cache with non-200 status ${s}`);return{url:r,CSS:()=>Promise.resolve(n),compat:!0,repoUrl:t,...mr(n)}}async function pr(e,t){const r=new URL(e,t).href;let s=new URL(e,t).pathname.split("/");s.splice(s.length-1,1,"cumcord_theme.json");const n=new URL(s.join("/"),new URL(e,t).origin).href,[o,u]=await gt(n);if(o!==200)throw new Error(`CC manifest existed in cache with non-200 status ${o}`);return{url:r,compat:!1,...u,repoUrl:t,CSS:async()=>{const[a,m]=await qe(r);if(a!==200)throw new Error(`CC CSS existed in cache with non-200 status ${a}`);return m}}}var _e=async(e,t)=>{try{return await pr(e,t)}catch(r){try{return await gr(e,t)}catch(s){console.error(r,s);let n=new Error("Failed to fetch theme - both CC and BD either failed to fetch or failed to parse");throw n.e1=r,n.e2=s,n}}};const Ee=new Map;async function Me(e){if(!e?.url||!await e.CSS())throw new Error("theme was missing either id or css.");const t=xe.injectCSS(await e.CSS());Ee.set(e.url,t);const r=E.persist.ghost.themes.findIndex(n=>n.url===e.url);let s={...e};delete s.CSS,s.enabled=!0,r===-1?E.persist.ghost.themes.push(s):E.persist.ghost.themes[r]=s,E.persist.store.themes=E.persist.ghost.themes}function Je(e){if(!e?.url)throw new Error("theme was missing id.");Ee.get(e.url)?.(),Ee.delete(e.url);const t=E.persist.ghost.themes.findIndex(s=>s.url===e.url);let r={...e};r.enabled=!1,t===-1?E.persist.ghost.themes.push(r):E.persist.ghost.themes[t]=r,E.persist.store.themes=E.persist.ghost.themes}function pt(e){try{Je(e)}catch(t){if(t.message!=="theme was not loaded.")throw t}E.persist.store.themes=E.persist.ghost.themes.filter(t=>t.url!==e.url)}async function vr(e){Ee.get(e.url)?.(await e.CSS());let t={...e};t.enabled=!0;const r=E.persist.ghost.themes.findIndex(s=>s.url===e.url);r!==-1&&(E.persist.ghost.themes[r]=t,E.persist.store.themes=E.persist.ghost.themes)}function yr(){Ee.forEach(e=>e?.()),Ee.clear()}var _r=()=>{let e=!1;return E.persist.ghost.themes&&E.persist.ghost.themes.filter(t=>t.enabled).forEach(t=>_e(t.url,t.repoUrl).then(r=>e||Me(r))),()=>{yr(),e=!0}};const vt=(e,t)=>()=>h.createElement("img",{src:e,className:`ysink_stain_badge ysink_stain_${t}`}),Er=vt("https://betterdiscord.app/resources/branding/logo_small.svg","bd"),wr=vt("https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg","cc"),[yt,$e,Qe,he,br,Sr,kr,xr,_t,Et,wt,{thin:Cr},Ne,{openModal:Mr}]=ht.batchFind(({findByProps:e,findByDisplayName:t})=>{t("FormTitle"),t("FormText"),t("FormSection"),e("BorderColors"),t("Switch"),e("BadgeShapes"),t("Flex"),t("Select",!1),t("TextInput"),t("SmallMediaCarousel"),t("SearchBar"),e("scrollerBase","thin"),e("ModalCloseButton"),e("openModalLazy")});var Ar=({media:e})=>h.createElement("div",{class:"ysink_stain_carousel"},e?h.createElement(Et,{items:(typeof e=="string"?[e]:e).map(t=>({type:1,src:t})),autoplayInterval:5e3}):h.createElement("div",{className:"ysink_stain_noimg"},h.createElement($e,{className:"ysink_stain_noimgtxt"},"No Image"),h.createElement(Et,{items:[{type:1,src:""}]})));const Ir=({e,media:t})=>h.createElement(le.ErrorBoundary,null,h.createElement(Ne.ModalRoot,{transitionState:e.transitionState,size:"large"},h.createElement(Ne.ModalHeader,{separator:!1},h.createElement("div",{style:{flex:1}}),h.createElement(Ne.ModalCloseButton,{onClick:e.onClose})),h.createElement(Ne.ModalContent,null,h.createElement("div",{style:{marginBottom:"1rem"}},h.createElement(Ar,{media:t})))));var Rr=e=>Mr(t=>h.createElement(Ir,{e:t,media:e}));const Tr=({onClick:e})=>h.createElement("svg",{onClick:e,className:"ysink_stain_delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},h.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),h.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),h.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}));function bt(e){for(const t of E.persist.ghost.themes)if(t.url===e&&t.enabled)return!0;return!1}const Or=e=>E.persist.ghost.themes.some(t=>t.url===e);var St=({theme:e,deleteHook:t,gap:r})=>(Ce.useNest(E.persist,!1,(s,{path:n})=>n[0]==="themes"),h.createElement("div",{className:"ysink_stain_card ysink_stain_tcard",style:{marginBottom:r}},h.createElement("div",{className:"ysink_stain_tmedia",style:{backgroundImage:e.media&&`url(${Array.isArray(e.media)?e.media[0]:e.media})`},onClick:()=>e.media&&Rr(e.media)},e.media?h.createElement("div",{className:"ysink_stain_tview"},"VIEW MEDIA"):h.createElement("div",null,"NO MEDIA")),h.createElement("div",{className:"ysink_stain_title"},e.compat?h.createElement(Er,null):h.createElement(wr,null),e.name),h.createElement("div",{className:"ysink_stain_tdesc"},e.description),h.createElement("div",{className:"ysink_stain_tacts"},Or(e.url)?h.createElement(Tr,{onClick:()=>{pt(e),t?.()}}):[],h.createElement(br,{checked:bt(e.url),onChange:async()=>bt(e.url)?Je(e):Me(await _e(e.url))})),h.createElement("div",{className:"ysink_stain_taulic"},e.author?`by ${e.author} `:"",e.license?`under ${e.license}`:""))),$r=()=>{Ce.useNest(E.persist);let[e,t]=h.useState("");return h.createElement(le.ErrorBoundary,null,h.createElement("div",{className:"ysink_stain_row"},h.createElement(_t,{className:"ysink_stain_input",placeholder:"Theme import URL",type:"text",value:e,onChange:r=>t(r)}),h.createElement(he,{className:"ysink_stain_button",onClick:()=>{_e(e).then(async r=>{await Me(r),Ye.showToast({title:`Loaded theme ${r.name}`,duration:5e3}),t("")},()=>Ye.showToast({title:"Failed to fetch theme - check URL",duration:5e3}))}},"Install")))};function ee(e){return Array.isArray?Array.isArray(e):Ct(e)==="[object Array]"}const Nr=1/0;function Lr(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Nr?"-0":t}function zr(e){return e==null?"":Lr(e)}function q(e){return typeof e=="string"}function kt(e){return typeof e=="number"}function Fr(e){return e===!0||e===!1||Pr(e)&&Ct(e)=="[object Boolean]"}function xt(e){return typeof e=="object"}function Pr(e){return xt(e)&&e!==null}function W(e){return e!=null}function De(e){return!e.trim().length}function Ct(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Rs="Extended search is not available",Kr="Incorrect 'index' type",Br=e=>`Invalid value for key ${e}`,jr=e=>`Pattern length exceeds max of ${e}.`,Ur=e=>`Missing ${e} property in key`,Wr=e=>`Property 'weight' in key '${e}' must be a positive integer`,Mt=Object.prototype.hasOwnProperty;class Hr{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(s=>{let n=At(s);r+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(s=>{s.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function At(e){let t=null,r=null,s=null,n=1,o=null;if(q(e)||ee(e))s=e,t=It(e),r=Xe(e);else{if(!Mt.call(e,"name"))throw new Error(Ur("name"));const u=e.name;if(s=u,Mt.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(Wr(u));t=It(u),r=Xe(u),o=e.getFn}return{path:t,id:r,weight:n,src:s,getFn:o}}function It(e){return ee(e)?e:e.split(".")}function Xe(e){return ee(e)?e.join("."):e}function Yr(e,t){let r=[],s=!1;const n=(o,u,a)=>{if(!!W(o))if(!u[a])r.push(o);else{let m=u[a];const i=o[m];if(!W(i))return;if(a===u.length-1&&(q(i)||kt(i)||Fr(i)))r.push(zr(i));else if(ee(i)){s=!0;for(let f=0,y=i.length;f<y;f+=1)n(i[f],u,a+1)}else u.length&&n(i,u,a+1)}};return n(e,q(t)?t.split("."):t,0),s?r:r[0]}var S={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:Yr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Gr=/[^ ]+/g;function Vr(e=1,t=3){const r=new Map,s=Math.pow(10,t);return{get(n){const o=n.match(Gr).length;if(r.has(o))return r.get(o);const u=1/Math.pow(o,.5*e),a=parseFloat(Math.round(u*s)/s);return r.set(o,a),a},clear(){r.clear()}}}class Ze{constructor({getFn:t=S.getFn,fieldNormWeight:r=S.fieldNormWeight}={}){this.norm=Vr(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,q(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();q(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!W(t)||De(t))return;let s={v:t,i:r,n:this.norm.get(t)};this.records.push(s)}_addObject(t,r){let s={i:r,$:{}};this.keys.forEach((n,o)=>{let u=n.getFn?n.getFn(t):this.getFn(t,n.path);if(!!W(u)){if(ee(u)){let a=[];const m=[{nestedArrIndex:-1,value:u}];for(;m.length;){const{nestedArrIndex:i,value:f}=m.pop();if(!!W(f))if(q(f)&&!De(f)){let y={v:f,i,n:this.norm.get(f)};a.push(y)}else ee(f)&&f.forEach((y,w)=>{m.push({nestedArrIndex:w,value:y})})}s.$[o]=a}else if(q(u)&&!De(u)){let a={v:u,n:this.norm.get(u)};s.$[o]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Rt(e,t,{getFn:r=S.getFn,fieldNormWeight:s=S.fieldNormWeight}={}){const n=new Ze({getFn:r,fieldNormWeight:s});return n.setKeys(e.map(At)),n.setSources(t),n.create(),n}function qr(e,{getFn:t=S.getFn,fieldNormWeight:r=S.fieldNormWeight}={}){const{keys:s,records:n}=e,o=new Ze({getFn:t,fieldNormWeight:r});return o.setKeys(s),o.setIndexRecords(n),o}function Le(e,{errors:t=0,currentLocation:r=0,expectedLocation:s=0,distance:n=S.distance,ignoreLocation:o=S.ignoreLocation}={}){const u=t/e.length;if(o)return u;const a=Math.abs(s-r);return n?u+a/n:a?1:u}function Jr(e=[],t=S.minMatchCharLength){let r=[],s=-1,n=-1,o=0;for(let u=e.length;o<u;o+=1){let a=e[o];a&&s===-1?s=o:!a&&s!==-1&&(n=o-1,n-s+1>=t&&r.push([s,n]),s=-1)}return e[o-1]&&o-s>=t&&r.push([s,o-1]),r}const fe=32;function Qr(e,t,r,{location:s=S.location,distance:n=S.distance,threshold:o=S.threshold,findAllMatches:u=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,includeMatches:m=S.includeMatches,ignoreLocation:i=S.ignoreLocation}={}){if(t.length>fe)throw new Error(jr(fe));const f=t.length,y=e.length,w=Math.max(0,Math.min(s,y));let C=o,A=w;const T=a>1||m,M=T?Array(y):[];let k;for(;(k=e.indexOf(t,A))>-1;){let v=Le(t,{currentLocation:k,expectedLocation:w,distance:n,ignoreLocation:i});if(C=Math.min(v,C),A=k+f,T){let x=0;for(;x<f;)M[k+x]=1,x+=1}}A=-1;let l=[],c=1,d=f+y;const g=1<<f-1;for(let v=0;v<f;v+=1){let x=0,b=d;for(;x<b;)Le(t,{errors:v,currentLocation:w+b,expectedLocation:w,distance:n,ignoreLocation:i})<=C?x=b:d=b,b=Math.floor((d-x)/2+x);d=b;let R=Math.max(1,w-b+1),I=u?y:Math.min(w+b,y)+f,F=Array(I+2);F[I+1]=(1<<v)-1;for(let P=I;P>=R;P-=1){let Q=P-1,te=r[e.charAt(Q)];if(T&&(M[Q]=+!!te),F[P]=(F[P+1]<<1|1)&te,v&&(F[P]|=(l[P+1]|l[P])<<1|1|l[P+1]),F[P]&g&&(c=Le(t,{errors:v,currentLocation:Q,expectedLocation:w,distance:n,ignoreLocation:i}),c<=C)){if(C=c,A=Q,A<=w)break;R=Math.max(1,2*w-A)}}if(Le(t,{errors:v+1,currentLocation:w,expectedLocation:w,distance:n,ignoreLocation:i})>C)break;l=F}const p={isMatch:A>=0,score:Math.max(.001,c)};if(T){const v=Jr(M,a);v.length?m&&(p.indices=v):p.isMatch=!1}return p}function Dr(e){let t={};for(let r=0,s=e.length;r<s;r+=1){const n=e.charAt(r);t[n]=(t[n]||0)|1<<s-r-1}return t}class Tt{constructor(t,{location:r=S.location,threshold:s=S.threshold,distance:n=S.distance,includeMatches:o=S.includeMatches,findAllMatches:u=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,isCaseSensitive:m=S.isCaseSensitive,ignoreLocation:i=S.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:n,includeMatches:o,findAllMatches:u,minMatchCharLength:a,isCaseSensitive:m,ignoreLocation:i},this.pattern=m?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(w,C)=>{this.chunks.push({pattern:w,alphabet:Dr(w),startIndex:C})},y=this.pattern.length;if(y>fe){let w=0;const C=y%fe,A=y-C;for(;w<A;)f(this.pattern.substr(w,fe),w),w+=fe;if(C){const T=y-fe;f(this.pattern.substr(T),T)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,includeMatches:s}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let A={isMatch:!0,score:0};return s&&(A.indices=[[0,t.length-1]]),A}const{location:n,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:m,ignoreLocation:i}=this.options;let f=[],y=0,w=!1;this.chunks.forEach(({pattern:A,alphabet:T,startIndex:M})=>{const{isMatch:k,score:l,indices:c}=Qr(t,A,T,{location:n+M,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:m,includeMatches:s,ignoreLocation:i});k&&(w=!0),y+=l,k&&c&&(f=[...f,...c])});let C={isMatch:w,score:w?y/this.chunks.length:1};return w&&s&&(C.indices=f),C}}class ae{constructor(t){this.pattern=t}static isMultiMatch(t){return Ot(t,this.multiRegex)}static isSingleMatch(t){return Ot(t,this.singleRegex)}search(){}}function Ot(e,t){const r=e.match(t);return r?r[1]:null}class Xr extends ae{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Zr extends ae{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class en extends ae{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class tn extends ae{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class rn extends ae{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class nn extends ae{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class $t extends ae{constructor(t,{location:r=S.location,threshold:s=S.threshold,distance:n=S.distance,includeMatches:o=S.includeMatches,findAllMatches:u=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,isCaseSensitive:m=S.isCaseSensitive,ignoreLocation:i=S.ignoreLocation}={}){super(t);this._bitapSearch=new Tt(t,{location:r,threshold:s,distance:n,includeMatches:o,findAllMatches:u,minMatchCharLength:a,isCaseSensitive:m,ignoreLocation:i})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Nt extends ae{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,s;const n=[],o=this.pattern.length;for(;(s=t.indexOf(this.pattern,r))>-1;)r=s+o,n.push([s,r-1]);const u=!!n.length;return{isMatch:u,score:u?0:1,indices:n}}}const et=[Xr,Nt,en,tn,nn,rn,Zr,$t],Lt=et.length,sn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,an="|";function on(e,t={}){return e.split(an).map(r=>{let s=r.trim().split(sn).filter(o=>o&&!!o.trim()),n=[];for(let o=0,u=s.length;o<u;o+=1){const a=s[o];let m=!1,i=-1;for(;!m&&++i<Lt;){const f=et[i];let y=f.isMultiMatch(a);y&&(n.push(new f(y,t)),m=!0)}if(!m)for(i=-1;++i<Lt;){const f=et[i];let y=f.isSingleMatch(a);if(y){n.push(new f(y,t));break}}}return n})}const cn=new Set([$t.type,Nt.type]);class ln{constructor(t,{isCaseSensitive:r=S.isCaseSensitive,includeMatches:s=S.includeMatches,minMatchCharLength:n=S.minMatchCharLength,ignoreLocation:o=S.ignoreLocation,findAllMatches:u=S.findAllMatches,location:a=S.location,threshold:m=S.threshold,distance:i=S.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:s,minMatchCharLength:n,findAllMatches:u,ignoreLocation:o,location:a,threshold:m,distance:i},this.pattern=r?t:t.toLowerCase(),this.query=on(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n}=this.options;t=n?t:t.toLowerCase();let o=0,u=[],a=0;for(let m=0,i=r.length;m<i;m+=1){const f=r[m];u.length=0,o=0;for(let y=0,w=f.length;y<w;y+=1){const C=f[y],{isMatch:A,indices:T,score:M}=C.search(t);if(A){if(o+=1,a+=M,s){const k=C.constructor.type;cn.has(k)?u=[...u,...T]:u.push(T)}}else{a=0,o=0,u.length=0;break}}if(o){let y={isMatch:!0,score:a/o};return s&&(y.indices=u),y}}return{isMatch:!1,score:1}}}const tt=[];function un(...e){tt.push(...e)}function rt(e,t){for(let r=0,s=tt.length;r<s;r+=1){let n=tt[r];if(n.condition(e,t))return new n(e,t)}return new Tt(e,t)}const ze={AND:"$and",OR:"$or"},nt={PATH:"$path",PATTERN:"$val"},st=e=>!!(e[ze.AND]||e[ze.OR]),hn=e=>!!e[nt.PATH],fn=e=>!ee(e)&&xt(e)&&!st(e),zt=e=>({[ze.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Ft(e,t,{auto:r=!0}={}){const s=n=>{let o=Object.keys(n);const u=hn(n);if(!u&&o.length>1&&!st(n))return s(zt(n));if(fn(n)){const m=u?n[nt.PATH]:o[0],i=u?n[nt.PATTERN]:n[m];if(!q(i))throw new Error(Br(m));const f={keyId:Xe(m),pattern:i};return r&&(f.searcher=rt(i,t)),f}let a={children:[],operator:o[0]};return o.forEach(m=>{const i=n[m];ee(i)&&i.forEach(f=>{a.children.push(s(f))})}),a};return st(e)||(e=zt(e)),s(e)}function dn(e,{ignoreFieldNorm:t=S.ignoreFieldNorm}){e.forEach(r=>{let s=1;r.matches.forEach(({key:n,norm:o,score:u})=>{const a=n?n.weight:null;s*=Math.pow(u===0&&a?Number.EPSILON:u,(a||1)*(t?1:o))}),r.score=s})}function mn(e,t){const r=e.matches;t.matches=[],!!W(r)&&r.forEach(s=>{if(!W(s.indices)||!s.indices.length)return;const{indices:n,value:o}=s;let u={indices:n,value:o};s.key&&(u.key=s.key.src),s.idx>-1&&(u.refIndex=s.idx),t.matches.push(u)})}function gn(e,t){t.score=e.score}function pn(e,t,{includeMatches:r=S.includeMatches,includeScore:s=S.includeScore}={}){const n=[];return r&&n.push(mn),s&&n.push(gn),e.map(o=>{const{idx:u}=o,a={item:t[u],refIndex:u};return n.length&&n.forEach(m=>{m(o,a)}),a})}class we{constructor(t,r={},s){this.options={...S,...r},this.options.useExtendedSearch,this._keyStore=new Hr(this.options.keys),this.setCollection(t,s)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Ze))throw new Error(Kr);this._myIndex=r||Rt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!W(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let s=0,n=this._docs.length;s<n;s+=1){const o=this._docs[s];t(o,s)&&(this.removeAt(s),s-=1,n-=1,r.push(o))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:o,sortFn:u,ignoreFieldNorm:a}=this.options;let m=q(t)?q(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return dn(m,{ignoreFieldNorm:a}),o&&m.sort(u),kt(r)&&r>-1&&(m=m.slice(0,r)),pn(m,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(t){const r=rt(t,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:o,i:u,n:a})=>{if(!W(o))return;const{isMatch:m,score:i,indices:f}=r.searchIn(o);m&&n.push({item:o,idx:u,matches:[{score:i,value:o,norm:a,indices:f}]})}),n}_searchLogical(t){const r=Ft(t,this.options),s=(a,m,i)=>{if(!a.children){const{keyId:y,searcher:w}=a,C=this._findMatches({key:this._keyStore.get(y),value:this._myIndex.getValueForItemAtKeyId(m,y),searcher:w});return C&&C.length?[{idx:i,item:m,matches:C}]:[]}const f=[];for(let y=0,w=a.children.length;y<w;y+=1){const C=a.children[y],A=s(C,m,i);if(A.length)f.push(...A);else if(a.operator===ze.AND)return[]}return f},n=this._myIndex.records,o={},u=[];return n.forEach(({$:a,i:m})=>{if(W(a)){let i=s(r,a,m);i.length&&(o[m]||(o[m]={idx:m,item:a,matches:[]},u.push(o[m])),i.forEach(({matches:f})=>{o[m].matches.push(...f)}))}}),u}_searchObjectList(t){const r=rt(t,this.options),{keys:s,records:n}=this._myIndex,o=[];return n.forEach(({$:u,i:a})=>{if(!W(u))return;let m=[];s.forEach((i,f)=>{m.push(...this._findMatches({key:i,value:u[f],searcher:r}))}),m.length&&o.push({idx:a,item:u,matches:m})}),o}_findMatches({key:t,value:r,searcher:s}){if(!W(r))return[];let n=[];if(ee(r))r.forEach(({v:o,i:u,n:a})=>{if(!W(o))return;const{isMatch:m,score:i,indices:f}=s.searchIn(o);m&&n.push({score:i,key:t,value:o,idx:u,norm:a,indices:f})});else{const{v:o,n:u}=r,{isMatch:a,score:m,indices:i}=s.searchIn(o);a&&n.push({score:m,key:t,value:o,norm:u,indices:i})}return n}}we.version="6.6.2",we.createIndex=Rt,we.parseIndex=qr,we.config=S,we.parseQuery=Ft,un(ln);const vn={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]};var Pt=(e,t)=>!t||t==""?e:new we(e,vn).search(t).map(r=>r.item),Kt=({query:e,onChange:t})=>h.createElement(wt,{className:"ysink_stain_searchbar",query:e,onQueryChange:t,placeholder:"Search themes...",size:wt.Sizes.MEDIUM}),Bt=({filterMode:e,setFilterMode:t})=>h.createElement(xr.SingleSelect,{options:[{value:0,label:"Show All"},{value:1,label:"CC Only"},{value:2,label:"BD Only"}],value:e,onChange:t,isDisabled:!1,className:"ysink_stain_dropdown"});const jt=({title:e,subtitle:t,onClick:r,btnText:s})=>h.createElement(Qe,{className:"ysink_stain_nosplash"},h.createElement(yt,{tag:"h2"},e),h.createElement($e,null,t),h.createElement(he,{className:"ysink_stain_button",color:he.Colors.GREEN,sizes:he.Sizes.LARGE,onClick:r},s)),yn=({goToRepos:e})=>h.createElement(jt,{title:"No Repos",subtitle:"Add one in the repo manager!",onClick:e,btnText:"Open repo manager"}),_n=({goToStore:e})=>h.createElement(jt,{title:"No Themes",subtitle:"Paste a link in above, or head over to the store",onClick:e,btnText:"Get some themes"});var Ut=()=>{const[e,t]=ft.useState(0);return()=>t(-e)},En=({goTo:e})=>{Ce.useNest(E.persist,!1,(u,{path:a})=>a[0]==="themes");const[t,r]=h.useState("");let[s,n]=h.useState(0);const o=Ut();return h.createElement(le.ErrorBoundary,null,h.createElement($r,null),h.createElement("div",{className:"ysink_stain_search_row"},h.createElement(Kt,{query:t,onChange:r}),h.createElement(Bt,{filterMode:s,setFilterMode:n})),E.persist.ghost.themes.length===0?h.createElement(_n,{goToStore:()=>e(1)}):h.createElement("div",{className:"ysink_stain_cardcontainer"},Pt(E.persist.ghost.themes,t).filter(u=>s===0||s===1&&!u.compat||s===2&&u.compat).map(u=>h.createElement(St,{key:u.url,theme:u,deleteHook:o}))))},Fe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wn=function(){function e(t,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),bn=z.default,Ae=Sn(bn);function Sn(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function kn(e,t){var r={};for(var s in e)t.indexOf(s)>=0||!Object.prototype.hasOwnProperty.call(e,s)||(r[s]=e[s]);return r}function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Mn=13,An=9,In=8,Rn=89,Pe=90,Tn=77,Yt=57,Gt=219,Vt=222,qt=192,On=27,Jt=100,$n=3e3,Nn="navigator"in Fe&&/Win/i.test(navigator.platform),at="navigator"in Fe&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Ke="npm__react-simple-code-editor__textarea",Ln=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+Ke+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+Ke+` {
    color: transparent !important;
  }

  .`+Ke+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,Qt=function(e){Cn(t,e);function t(){var r,s,n,o;xn(this,t);for(var u=arguments.length,a=Array(u),m=0;m<u;m++)a[m]=arguments[m];return o=(s=(n=Ht(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),n),n.state={capture:!0},n._recordCurrentState=function(){var i=n._input;if(!!i){var f=i.value,y=i.selectionStart,w=i.selectionEnd;n._recordChange({value:f,selectionStart:y,selectionEnd:w})}},n._getLines=function(i,f){return i.substring(0,f).split(`
`)},n._recordChange=function(i){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=n._history,w=y.stack,C=y.offset;if(w.length&&C>-1){n._history.stack=w.slice(0,C+1);var A=n._history.stack.length;if(A>Jt){var T=A-Jt;n._history.stack=w.slice(T,A),n._history.offset=Math.max(n._history.offset-T,0)}}var M=Date.now();if(f){var k=n._history.stack[n._history.offset];if(k&&M-k.timestamp<$n){var l=/[^a-z0-9]([a-z0-9]+)$/i,c=n._getLines(k.value,k.selectionStart).pop().match(l),d=n._getLines(i.value,i.selectionStart).pop().match(l);if(c&&d&&d[1].startsWith(c[1])){n._history.stack[n._history.offset]=ie({},i,{timestamp:M});return}}}n._history.stack.push(ie({},i,{timestamp:M})),n._history.offset++},n._updateInput=function(i){var f=n._input;!f||(f.value=i.value,f.selectionStart=i.selectionStart,f.selectionEnd=i.selectionEnd,n.props.onValueChange(i.value))},n._applyEdits=function(i){var f=n._input,y=n._history.stack[n._history.offset];y&&f&&(n._history.stack[n._history.offset]=ie({},y,{selectionStart:f.selectionStart,selectionEnd:f.selectionEnd})),n._recordChange(i),n._updateInput(i)},n._undoEdit=function(){var i=n._history,f=i.stack,y=i.offset,w=f[y-1];w&&(n._updateInput(w),n._history.offset=Math.max(y-1,0))},n._redoEdit=function(){var i=n._history,f=i.stack,y=i.offset,w=f[y+1];w&&(n._updateInput(w),n._history.offset=Math.min(y+1,f.length-1))},n._handleKeyDown=function(i){var f=n.props,y=f.tabSize,w=f.insertSpaces,C=f.ignoreTabKey,A=f.onKeyDown;if(!(A&&(A(i),i.defaultPrevented))){i.keyCode===On&&i.target.blur();var T=i.target,M=T.value,k=T.selectionStart,l=T.selectionEnd,c=(w?" ":"	").repeat(y);if(i.keyCode===An&&!C&&n.state.capture)if(i.preventDefault(),i.shiftKey){var d=n._getLines(M,k),g=d.length-1,p=n._getLines(M,l).length-1,v=M.split(`
`).map(function($,re){return re>=g&&re<=p&&$.startsWith(c)?$.substring(c.length):$}).join(`
`);if(M!==v){var x=d[g];n._applyEdits({value:v,selectionStart:x.startsWith(c)?k-c.length:k,selectionEnd:l-(M.length-v.length)})}}else if(k!==l){var b=n._getLines(M,k),R=b.length-1,I=n._getLines(M,l).length-1,F=b[R];n._applyEdits({value:M.split(`
`).map(function($,re){return re>=R&&re<=I?c+$:$}).join(`
`),selectionStart:/\S/.test(F)?k+c.length:k,selectionEnd:l+c.length*(I-R+1)})}else{var J=k+c.length;n._applyEdits({value:M.substring(0,k)+c+M.substring(l),selectionStart:J,selectionEnd:J})}else if(i.keyCode===In){var P=k!==l,Q=M.substring(0,k);if(Q.endsWith(c)&&!P){i.preventDefault();var te=k-c.length;n._applyEdits({value:M.substring(0,k-c.length)+M.substring(l),selectionStart:te,selectionEnd:te})}}else if(i.keyCode===Mn){if(k===l){var be=n._getLines(M,k).pop(),O=be.match(/^\s+/);if(O&&O[0]){i.preventDefault();var U=`
`+O[0],Y=k+U.length;n._applyEdits({value:M.substring(0,k)+U+M.substring(l),selectionStart:Y,selectionEnd:Y})}}}else if(i.keyCode===Yt||i.keyCode===Gt||i.keyCode===Vt||i.keyCode===qt){var B=void 0;i.keyCode===Yt&&i.shiftKey?B=["(",")"]:i.keyCode===Gt?i.shiftKey?B=["{","}"]:B=["[","]"]:i.keyCode===Vt?i.shiftKey?B=['"','"']:B=["'","'"]:i.keyCode===qt&&!i.shiftKey&&(B=["`","`"]),k!==l&&B&&(i.preventDefault(),n._applyEdits({value:M.substring(0,k)+B[0]+M.substring(k,l)+B[1]+M.substring(l),selectionStart:k,selectionEnd:l+2}))}else(at?i.metaKey&&i.keyCode===Pe:i.ctrlKey&&i.keyCode===Pe)&&!i.shiftKey&&!i.altKey?(i.preventDefault(),n._undoEdit()):(at?i.metaKey&&i.keyCode===Pe&&i.shiftKey:Nn?i.ctrlKey&&i.keyCode===Rn:i.ctrlKey&&i.keyCode===Pe&&i.shiftKey)&&!i.altKey?(i.preventDefault(),n._redoEdit()):i.keyCode===Tn&&i.ctrlKey&&(at?i.shiftKey:!0)&&(i.preventDefault(),n.setState(function($){return{capture:!$.capture}}))}},n._handleChange=function(i){var f=i.target,y=f.value,w=f.selectionStart,C=f.selectionEnd;n._recordChange({value:y,selectionStart:w,selectionEnd:C},!0),n.props.onValueChange(y)},n._history={stack:[],offset:-1},s),Ht(n,o)}return wn(t,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var s=this,n=this.props,o=n.value,u=n.style,a=n.padding,m=n.highlight,i=n.textareaId,f=n.textareaClassName,y=n.autoFocus,w=n.disabled,C=n.form,A=n.maxLength,T=n.minLength,M=n.name,k=n.placeholder,l=n.readOnly,c=n.required,d=n.onClick,g=n.onFocus,p=n.onBlur,v=n.onKeyUp;n.onKeyDown,n.onValueChange,n.tabSize,n.insertSpaces,n.ignoreTabKey;var x=n.preClassName,b=kn(n,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),R={paddingTop:a,paddingRight:a,paddingBottom:a,paddingLeft:a},I=m(o);return Ae.createElement("div",ie({},b,{style:ie({},Ie.container,u)}),Ae.createElement("textarea",{ref:function(J){return s._input=J},style:ie({},Ie.editor,Ie.textarea,R),className:Ke+(f?" "+f:""),id:i,value:o,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:d,onKeyUp:v,onFocus:g,onBlur:p,disabled:w,form:C,maxLength:A,minLength:T,name:M,placeholder:k,readOnly:l,required:c,autoFocus:y,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Ae.createElement("pre",ie({className:x,"aria-hidden":"true",style:ie({},Ie.editor,Ie.highlight,R)},typeof I=="string"?{dangerouslySetInnerHTML:{__html:I+"<br />"}}:{children:I})),Ae.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:Ln}}))}},{key:"session",get:function(){return{history:this._history}},set:function(s){this._history=s.history}}]),t}(Ae.Component);Qt.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var zn=Wt.default=Qt,Ie={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},it={exports:{}};(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(s){var n=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,o=0,u={},a={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function l(c){return c instanceof m?new m(c.type,l(c.content),c.alias):Array.isArray(c)?c.map(l):c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++o}),l.__id},clone:function l(c,d){d=d||{};var g,p;switch(a.util.type(c)){case"Object":if(p=a.util.objId(c),d[p])return d[p];g={},d[p]=g;for(var v in c)c.hasOwnProperty(v)&&(g[v]=l(c[v],d));return g;case"Array":return p=a.util.objId(c),d[p]?d[p]:(g=[],d[p]=g,c.forEach(function(x,b){g[b]=l(x,d)}),g);default:return c}},getLanguage:function(l){for(;l;){var c=n.exec(l.className);if(c)return c[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,c){l.className=l.className.replace(RegExp(n,"gi"),""),l.classList.add("language-"+c)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(g){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(g.stack)||[])[1];if(l){var c=document.getElementsByTagName("script");for(var d in c)if(c[d].src==l)return c[d]}return null}},isActive:function(l,c,d){for(var g="no-"+c;l;){var p=l.classList;if(p.contains(c))return!0;if(p.contains(g))return!1;l=l.parentElement}return!!d}},languages:{plain:u,plaintext:u,text:u,txt:u,extend:function(l,c){var d=a.util.clone(a.languages[l]);for(var g in c)d[g]=c[g];return d},insertBefore:function(l,c,d,g){g=g||a.languages;var p=g[l],v={};for(var x in p)if(p.hasOwnProperty(x)){if(x==c)for(var b in d)d.hasOwnProperty(b)&&(v[b]=d[b]);d.hasOwnProperty(x)||(v[x]=p[x])}var R=g[l];return g[l]=v,a.languages.DFS(a.languages,function(I,F){F===R&&I!=l&&(this[I]=v)}),v},DFS:function l(c,d,g,p){p=p||{};var v=a.util.objId;for(var x in c)if(c.hasOwnProperty(x)){d.call(c,x,c[x],g||x);var b=c[x],R=a.util.type(b);R==="Object"&&!p[v(b)]?(p[v(b)]=!0,l(b,d,null,p)):R==="Array"&&!p[v(b)]&&(p[v(b)]=!0,l(b,d,x,p))}}},plugins:{},highlightAll:function(l,c){a.highlightAllUnder(document,l,c)},highlightAllUnder:function(l,c,d){var g={callback:d,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",g),g.elements=Array.prototype.slice.apply(g.container.querySelectorAll(g.selector)),a.hooks.run("before-all-elements-highlight",g);for(var p=0,v;v=g.elements[p++];)a.highlightElement(v,c===!0,g.callback)},highlightElement:function(l,c,d){var g=a.util.getLanguage(l),p=a.languages[g];a.util.setLanguage(l,g);var v=l.parentElement;v&&v.nodeName.toLowerCase()==="pre"&&a.util.setLanguage(v,g);var x=l.textContent,b={element:l,language:g,grammar:p,code:x};function R(F){b.highlightedCode=F,a.hooks.run("before-insert",b),b.element.innerHTML=b.highlightedCode,a.hooks.run("after-highlight",b),a.hooks.run("complete",b),d&&d.call(b.element)}if(a.hooks.run("before-sanity-check",b),v=b.element.parentElement,v&&v.nodeName.toLowerCase()==="pre"&&!v.hasAttribute("tabindex")&&v.setAttribute("tabindex","0"),!b.code){a.hooks.run("complete",b),d&&d.call(b.element);return}if(a.hooks.run("before-highlight",b),!b.grammar){R(a.util.encode(b.code));return}if(c&&s.Worker){var I=new Worker(a.filename);I.onmessage=function(F){R(F.data)},I.postMessage(JSON.stringify({language:b.language,code:b.code,immediateClose:!0}))}else R(a.highlight(b.code,b.grammar,b.language))},highlight:function(l,c,d){var g={code:l,grammar:c,language:d};if(a.hooks.run("before-tokenize",g),!g.grammar)throw new Error('The language "'+g.language+'" has no grammar.');return g.tokens=a.tokenize(g.code,g.grammar),a.hooks.run("after-tokenize",g),m.stringify(a.util.encode(g.tokens),g.language)},tokenize:function(l,c){var d=c.rest;if(d){for(var g in d)c[g]=d[g];delete c.rest}var p=new y;return w(p,p.head,l),f(l,p,c,p.head,0),A(p)},hooks:{all:{},add:function(l,c){var d=a.hooks.all;d[l]=d[l]||[],d[l].push(c)},run:function(l,c){var d=a.hooks.all[l];if(!(!d||!d.length))for(var g=0,p;p=d[g++];)p(c)}},Token:m};s.Prism=a;function m(l,c,d,g){this.type=l,this.content=c,this.alias=d,this.length=(g||"").length|0}m.stringify=function l(c,d){if(typeof c=="string")return c;if(Array.isArray(c)){var g="";return c.forEach(function(R){g+=l(R,d)}),g}var p={type:c.type,content:l(c.content,d),tag:"span",classes:["token",c.type],attributes:{},language:d},v=c.alias;v&&(Array.isArray(v)?Array.prototype.push.apply(p.classes,v):p.classes.push(v)),a.hooks.run("wrap",p);var x="";for(var b in p.attributes)x+=" "+b+'="'+(p.attributes[b]||"").replace(/"/g,"&quot;")+'"';return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+x+">"+p.content+"</"+p.tag+">"};function i(l,c,d,g){l.lastIndex=c;var p=l.exec(d);if(p&&g&&p[1]){var v=p[1].length;p.index+=v,p[0]=p[0].slice(v)}return p}function f(l,c,d,g,p,v){for(var x in d)if(!(!d.hasOwnProperty(x)||!d[x])){var b=d[x];b=Array.isArray(b)?b:[b];for(var R=0;R<b.length;++R){if(v&&v.cause==x+","+R)return;var I=b[R],F=I.inside,J=!!I.lookbehind,P=!!I.greedy,Q=I.alias;if(P&&!I.pattern.global){var te=I.pattern.toString().match(/[imsuy]*$/)[0];I.pattern=RegExp(I.pattern.source,te+"g")}for(var be=I.pattern||I,O=g.next,U=p;O!==c.tail&&!(v&&U>=v.reach);U+=O.value.length,O=O.next){var Y=O.value;if(c.length>l.length)return;if(!(Y instanceof m)){var B=1,$;if(P){if($=i(be,U,l,J),!$||$.index>=l.length)break;var ge=$.index,re=$.index+$[0].length,H=U;for(H+=O.value.length;ge>=H;)O=O.next,H+=O.value.length;if(H-=O.value.length,U=H,O.value instanceof m)continue;for(var G=O;G!==c.tail&&(H<re||typeof G.value=="string");G=G.next)B++,H+=G.value.length;B--,Y=l.slice(U,H),$.index-=U}else if($=i(be,0,Y,J),!$)continue;var ge=$.index,D=$[0],pe=Y.slice(0,ge),Te=Y.slice(ge+D.length),Se=U+Y.length;v&&Se>v.reach&&(v.reach=Se);var ve=O.prev;pe&&(ve=w(c,ve,pe),U+=pe.length),C(c,ve,B);var Oe=new m(x,F?a.tokenize(D,F):D,Q,D);if(O=w(c,ve,Oe),Te&&w(c,O,Te),B>1){var ke={cause:x+","+R,reach:Se};f(l,c,d,O.prev,U,ke),v&&ke.reach>v.reach&&(v.reach=ke.reach)}}}}}}function y(){var l={value:null,prev:null,next:null},c={value:null,prev:l,next:null};l.next=c,this.head=l,this.tail=c,this.length=0}function w(l,c,d){var g=c.next,p={value:d,prev:c,next:g};return c.next=p,g.prev=p,l.length++,p}function C(l,c,d){for(var g=c.next,p=0;p<d&&g!==l.tail;p++)g=g.next;c.next=g,g.prev=c,l.length-=p}function A(l){for(var c=[],d=l.head.next;d!==l.tail;)c.push(d.value),d=d.next;return c}if(!s.document)return s.addEventListener&&(a.disableWorkerMessageHandler||s.addEventListener("message",function(l){var c=JSON.parse(l.data),d=c.language,g=c.code,p=c.immediateClose;s.postMessage(a.highlight(g,a.languages[d],d)),p&&s.close()},!1)),a;var T=a.util.currentScript();T&&(a.filename=T.src,T.hasAttribute("data-manual")&&(a.manual=!0));function M(){a.manual||a.highlightAll()}if(!a.manual){var k=document.readyState;k==="loading"||k==="interactive"&&T&&T.defer?document.addEventListener("DOMContentLoaded",M):window.requestAnimationFrame?window.requestAnimationFrame(M):window.setTimeout(M,16)}return a}(t);e.exports&&(e.exports=r),typeof Fe!="undefined"&&(Fe.Prism=r)})(it),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(Prism);const Fn=e=>E.persist.store.quickCSS=e,Pn=_.debounce(Fn,250);var Kn=()=>{const[e,t]=h.useState(E.persist.ghost.quickCSS);return h.createElement(le.ErrorBoundary,null,h.createElement(zn,{className:"ysink_stain_cssedit",value:e??"",onValueChange:r=>{t(r),Pn(r)},highlight:r=>it.exports.highlight(r,it.exports.languages.css),padding:10}),h.createElement("link",{href:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@master/themes/prism-atom-dark.css",rel:"stylesheet"}))};async function Bn(e){const t=new URL("repo.json",e).href,[r,s]=await gt(t);if(r!==200)throw new Error(`Repo manifest existed in cache with non-200 status ${r}`);if(!s.themes||s.themes?.length===0)throw new Error("No themes found in repo");if(!s.meta)throw new Error("No repo metadata");if(!s?.meta.name)throw new Error("Repo did not have a name");return s}var Be=async e=>{const t=await Bn(e),r=await Promise.all(t.themes.map(s=>_e(s,e)));return{manifest:t,themes:r}};const Dt=["https://cumcordthemes.github.io/Cumsock/"],jn=Dt;var Un=async()=>{Array.isArray(E.persist.ghost.repos)||(E.persist.ghost.repos=[]);for(const e of Dt)if(!E.persist.ghost.repos.find(t=>t.url===e.url)){try{await Be(e)}catch{continue}E.persist.ghost.repos.push(e)}E.persist.set({path:["repos"],value:E.persist.ghost.repos})},Wn=({repo:e})=>{const[t,r]=h.useState(void 0);return h.useEffect(async()=>{t||r(await Be(e))}),h.createElement("div",{className:"ysink_stain_card ysink_stain_row"},h.createElement("div",null,h.createElement("div",{className:"ysink_stain_title"},t?.manifest.meta.name,jn.includes(e)?h.createElement(Sr.TextBadge,{className:"ysink_stain_officialbadge",text:"official repo",color:"var(--info-positive-foreground)"}):[]),h.createElement($e,null,e)),h.createElement(he,{color:he.Colors.RED,className:"ysink_stain_button",onClick:()=>E.persist.store.repos=E.persist.ghost.repos.filter(s=>s!=e)},"Remove Repo"))};async function Hn(e){try{return await Be(e),!0}catch{return!1}}async function Xt(e,t,r){return e.endsWith("/")||(e+="/"),E.persist.ghost.repos.includes(e)?(r("You already have this repo!"),!1):await Hn(e)?(E.persist.ghost.repos.push(e),E.persist.set({path:["repos"]}),t("Added repo"),!0):(r("Repo was invalid"),!1)}const Yn=e=>E.persist.ghost.themes.some(t=>t.url===e);async function Gn(e,t,r){if(Yn(e))return r("Theme is already installed!");const s=await _e(e).catch(r);!s||Me(s).then(t,r)}const Zt=e=>Ye.showToast({title:e,duration:5e3});var Vn=()=>{const[e,t]=h.useState("");return Ce.useNest(E.persist),h.createElement(le.ErrorBoundary,null,h.createElement(Qe,null,h.createElement(kr,{basis:"auto",grow:1,shrink:1,className:"ysink_stain_row"},h.createElement(_t,{placeholder:"https://example.com/repo",type:"text",value:e,onChange:r=>t(r)}),h.createElement(he,{className:"ysink_stain_button",onClick:async()=>{await Xt(e,Zt,Zt)&&t("")}},"Add")),h.createElement("div",{className:"ysink_stain_divide"}),h.createElement("div",{className:"ysink_stain_cardcontainer"},E.persist.ghost.repos.map(r=>h.createElement(Wn,{repo:r})))))};function de(){return de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},de.apply(this,arguments)}function qn(e,t){if(e==null)return{};var r={},s=Object.keys(e),n,o;for(o=0;o<s.length;o++)n=s[o],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}var Jn=["bottom","height","left","right","top","width"],Qn=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),Jn.some(function(s){return t[s]!==r[s]})},oe=new Map,er,Dn=function e(){var t=[];oe.forEach(function(r,s){var n=s.getBoundingClientRect();Qn(n,r.rect)&&(r.rect=n,t.push(r))}),t.forEach(function(r){r.callbacks.forEach(function(s){return s(r.rect)})}),er=window.requestAnimationFrame(e)};function Xn(e,t){return{observe:function(){var s=oe.size===0;oe.has(e)?oe.get(e).callbacks.push(t):oe.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),s&&Dn()},unobserve:function(){var s=oe.get(e);if(s){var n=s.callbacks.indexOf(t);n>=0&&s.callbacks.splice(n,1),s.callbacks.length||oe.delete(e),oe.size||cancelAnimationFrame(er)}}}}var je=typeof window!="undefined"?z.default.useLayoutEffect:z.default.useEffect;function Zn(e,t){t===void 0&&(t={width:0,height:0});var r=z.default.useState(e.current),s=r[0],n=r[1],o=z.default.useReducer(es,t),u=o[0],a=o[1],m=z.default.useRef(!1);return je(function(){e.current!==s&&n(e.current)}),je(function(){if(s&&!m.current){m.current=!0;var i=s.getBoundingClientRect();a({rect:i})}},[s]),z.default.useEffect(function(){if(!!s){var i=Xn(s,function(f){a({rect:f})});return i.observe(),function(){i.unobserve()}}},[s]),u}function es(e,t){var r=t.rect;return e.height!==r.height||e.width!==r.width?r:e}var ts=function(){return 50},rs=function(t){return t},ns=function(t,r){var s=r?"offsetWidth":"offsetHeight";return t[s]},ss=function(t){for(var r=Math.max(t.start-t.overscan,0),s=Math.min(t.end+t.overscan,t.size-1),n=[],o=r;o<=s;o++)n.push(o);return n};function as(e){var t,r=e.size,s=r===void 0?0:r,n=e.estimateSize,o=n===void 0?ts:n,u=e.overscan,a=u===void 0?1:u,m=e.paddingStart,i=m===void 0?0:m,f=e.paddingEnd,y=f===void 0?0:f,w=e.parentRef,C=e.horizontal,A=e.scrollToFn,T=e.useObserver,M=e.initialRect,k=e.onScrollElement,l=e.scrollOffsetFn,c=e.keyExtractor,d=c===void 0?rs:c,g=e.measureSize,p=g===void 0?ns:g,v=e.rangeExtractor,x=v===void 0?ss:v,b=C?"width":"height",R=C?"scrollLeft":"scrollTop",I=z.default.useRef({scrollOffset:0,measurements:[]}),F=z.default.useState(0),J=F[0],P=F[1];I.current.scrollOffset=J;var Q=T||Zn,te=Q(w,M),be=te[b];I.current.outerSize=be;var O=z.default.useCallback(function(N){w.current&&(w.current[R]=N)},[w,R]),U=A||O;A=z.default.useCallback(function(N){U(N,O)},[O,U]);var Y=z.default.useState({}),B=Y[0],$=Y[1],re=z.default.useCallback(function(){return $({})},[]),H=z.default.useRef([]),G=z.default.useMemo(function(){var N=H.current.length>0?Math.min.apply(Math,H.current):0;H.current=[];for(var j=I.current.measurements.slice(0,N),L=N;L<s;L++){var V=d(L),K=B[V],ne=j[L-1]?j[L-1].end:i,X=typeof K=="number"?K:o(L),Z=ne+X;j[L]={index:L,start:ne,size:X,end:Z,key:V}}return j},[o,B,i,s,d]),ge=(((t=G[s-1])==null?void 0:t.end)||i)+y;I.current.measurements=G,I.current.totalSize=ge;var D=k?k.current:w.current,pe=z.default.useRef(l);pe.current=l,je(function(){if(!D){P(0);return}var N=function(L){var V=pe.current?pe.current(L):D[R];P(V)};return N(),D.addEventListener("scroll",N,{capture:!1,passive:!0}),function(){D.removeEventListener("scroll",N)}},[D,R]);var Te=os(I.current),Se=Te.start,ve=Te.end,Oe=z.default.useMemo(function(){return x({start:Se,end:ve,overscan:a,size:G.length})},[Se,ve,a,G.length,x]),ke=z.default.useRef(p);ke.current=p;var Ms=z.default.useMemo(function(){for(var N=[],j=function(ne,X){var Z=Oe[ne],Ue=G[Z],ye=de(de({},Ue),{},{measureRef:function(We){if(We){var lt=ke.current(We,C);if(lt!==ye.size){var ar=I.current.scrollOffset;ye.start<ar&&O(ar+(lt-ye.size)),H.current.push(Z),$(function(Is){var ut;return de(de({},Is),{},(ut={},ut[ye.key]=lt,ut))})}}}});N.push(ye)},L=0,V=Oe.length;L<V;L++)j(L);return N},[Oe,O,C,G]),sr=z.default.useRef(!1);je(function(){sr.current&&$({}),sr.current=!0},[o]);var ot=z.default.useCallback(function(N,j){var L=j===void 0?{}:j,V=L.align,K=V===void 0?"start":V,ne=I.current,X=ne.scrollOffset,Z=ne.outerSize;K==="auto"&&(N<=X?K="start":N>=X+Z?K="end":K="start"),K==="start"?A(N):K==="end"?A(N-Z):K==="center"&&A(N-Z/2)},[A]),ct=z.default.useCallback(function(N,j){var L=j===void 0?{}:j,V=L.align,K=V===void 0?"auto":V,ne=qn(L,["align"]),X=I.current,Z=X.measurements,Ue=X.scrollOffset,ye=X.outerSize,ce=Z[Math.max(0,Math.min(N,s-1))];if(!!ce){if(K==="auto")if(ce.end>=Ue+ye)K="end";else if(ce.start<=Ue)K="start";else return;var We=K==="center"?ce.start+ce.size/2:K==="end"?ce.end:ce.start;ot(We,de({align:K},ne))}},[ot,s]),As=z.default.useCallback(function(){for(var N=arguments.length,j=new Array(N),L=0;L<N;L++)j[L]=arguments[L];ct.apply(void 0,j),requestAnimationFrame(function(){ct.apply(void 0,j)})},[ct]);return{virtualItems:Ms,totalSize:ge,scrollToOffset:ot,scrollToIndex:As,measure:re}}var is=function(t,r,s,n){for(;t<=r;){var o=(t+r)/2|0,u=s(o);if(u<n)t=o+1;else if(u>n)r=o-1;else return o}return t>0?t-1:0};function os(e){for(var t=e.measurements,r=e.outerSize,s=e.scrollOffset,n=t.length-1,o=function(i){return t[i].start},u=is(0,n,o,s),a=u;a<n&&t[a].end<s+r;)a++;return{start:u,end:a}}var cs=({items:e,children:t,keySel:r,height:s,className:n})=>{const o=h.useRef(),u=as({parentRef:o,size:e.length,keyExtractor:a=>r(e[a])});return h.createElement("div",{ref:o,style:{overflow:"auto",height:s},className:n},h.createElement("div",{style:{height:u.totalSize,width:"100%",position:"relative"}},u.virtualItems.map(a=>h.createElement("div",{ref:a.measureRef,key:a.key,style:{position:"absolute",top:0,left:0,width:"100%",height:a.height,transform:`translateY(${a.start}px)`}},t(e[a.index])))))};const ls=()=>Promise.all(E.persist.ghost.repos.map(Be)),us=async()=>(await ls()).flatMap(e=>e.themes),hs=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((r,s)=>r===t[s]);var fs=({goTo:e})=>{Ce.useNest(E.persist,!1,(f,{path:y})=>y[0]==="repos");const[t,r]=h.useState(""),[s,n]=h.useState([]),[o,u]=h.useState(void 0),[a,m]=h.useState(0);h.useEffect(()=>{(!hs(s,E.persist.ghost.repos)||!o)&&(n(E.persist.ghost.repos),us().then(u))});const i=Ut();return h.createElement(le.ErrorBoundary,null,h.createElement("div",{className:"ysink_stain_search_row"},h.createElement(Kt,{query:t,onChange:r}),h.createElement(Bt,{filterMode:a,setFilterMode:m})),E.persist.ghost.repos.length===0?h.createElement(yn,{goToRepos:()=>e(2)}):h.createElement(cs,{className:Cr,height:"50rem",keySel:f=>f.url,items:Pt(_.uniqBy(o??[],f=>f.url),t).filter(f=>a===0||a===1&&!f.compat||a===2&&f.compat)},f=>h.createElement(St,{theme:f,deleteHook:i,gap:".5rem"})))},ds=({items:e})=>{let[t,r]=h.useState(0);return h.createElement("div",{className:"ysink_stain_tabbar_root"},h.createElement("div",{className:"ysink_stain_tabbar"},e.map((s,n)=>h.createElement("button",{className:"ysink_stain_button"+(n===t?" ysink_stain_selected":""),onClick:()=>r(n)},h.createElement($e,null,s.text)))),h.createElement("div",{className:"ysink_stain_divide"}),h.createElement("div",{className:"ysink_stain_tabbar_content"},h.createElement(e[t].component,{goTo:r})))},ms=()=>h.createElement(le.ErrorBoundary,null,h.createElement(Qe,null,h.createElement(yt,{tag:"h1"},"Cumstain Settings"),h.createElement(ds,{items:[{text:"Installed",component:En},{text:"Store",component:fs},{text:"Repos",component:Vn},{text:"Quick CSS",component:Kn}]}))),gs=()=>xe.findAndPatch(()=>ht.findByDisplayName("SettingsView"),e=>xe.after("getPredicateSections",e.prototype,(t,r)=>{if(r[1]?.section!="My Account")return;let s=r.findIndex(n=>n.section=="CUMCORD_PLUGINS")+1;return r.splice(s,0,{section:"ysink_stain_CUMSTAIN",label:"Themes",element:ms}),r})),ps=()=>{const e=xe.injectCSS(E.persist.ghost.quickCSS),t=(r,{path:[s]})=>{s==="quickCSS"&&e(E.persist.ghost.quickCSS)};return E.persist.on("SET",t),()=>{e(),E.persist.off("SET",t)}};const Re=e=>E.persist.ghost.themes.find(t=>t.url===e),tr=e=>!!Re(e)?.enabled,rr=e=>tr(e.url)?vr(e):Me(e),vs=async e=>await rr(await _e(e)),ys=e=>pt(Re(e)),_s=async e=>{if(!Re(e))throw new Error(`Theme with ID ${e} was not installed`);tr(e)?Je(Re(e)):await rr(Re(e))},me=async()=>{if(!window.cumstain){Ge.error("|| CUMSTAIN || API was not found, so nests could not be updated.");return}for(const e in cumstain.installed.ghost)delete cumstain.installed.ghost[e],cumstain.installed.delete(e);for(const e of E.persist.ghost.themes)cumstain.installed.store[e.url]={enabled:e.enabled,manifest:e};for(const[e,t]of Object.entries(cumstain.installed.ghost))t.enabled?cumstain.enabled.store[e]=t:(delete cumstain.enabled.ghost[e],cumstain.installed.delete(e))};var Es=()=>(window.cumstain={installed:se.nests.make({}),enabled:se.nests.make({}),importTheme:vs,removeTheme:ys,toggleTheme:_s},me(),E.persist.on(se.nests.Events.UPDATE,me),E.persist.on(se.nests.Events.SET,me),E.persist.on(se.nests.Events.DELETE,me),Ge.log("|| CUMSTAIN || Initialised window.cumstain API"),()=>{E.persist.off(se.nests.Events.UPDATE,me),E.persist.off(se.nests.Events.SET,me),E.persist.off(se.nests.Events.DELETE,me),window.cumstain=void 0,delete window.cumstain,Ge.log("|| CUMSTAIN || Disposed window.cumstain API")});const nr="User confirmation declined";function ws(e,{ok:t,error:r}){if(typeof e?.repo!="string")return r("You must supply a repo");mt.showConfirmationModal({type:"confirm",confirmText:"Add Repo",header:"[Cumstain] Add Repo?",content:`A web page or another app on your PC just tried to add the following theme repo: \`${e.repo}\`. Allow this?`}).then(s=>{s?Xt(e.repo,t,r).catch(n=>r("Unhandled error: "+n)):r(nr)})}function bs(e,{ok:t,error:r}){if(typeof e?.url!="string")return r("You must supply a theme url");mt.showConfirmationModal({type:"confirm",confirmText:"Install Theme",header:"[Cumstain] Install theme?",content:`A web page or another app on your PC just tried to install the following theme: \`${e.url}\`. Allow this?`}).then(s=>{s?Gn(e.url,t,r).catch(n=>r("Unhandled error: "+n)):r(nr)})}var Ss=()=>[dt.addHandler("ysink_stain_addrepo",ws),dt.addHandler("ysink_stain_addtheme",bs)],ks=()=>xe.injectCSS(".ysink_stain_card{background:var(--background-secondary-alt);padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;width:100%!important;color:var(--text-normal)}.ysink_stain_title{display:flex;align-items:center;font-size:1rem;color:var(--interactive-active)}.ysink_stain_cardcontainer>*{margin-bottom:.5rem}.ysink_stain_divide{margin:.5rem 0;width:100%;height:1px;border-top:thin solid var(--background-modifier-accent)}.ysink_stain_row{display:flex;gap:1rem}.ysink_stain_row>:not(:last-child){flex:1}.ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(255,255,255,.2666666667)}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(0,0,0,.2)}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_search_row{display:flex;gap:.75rem;margin:.75rem 0}.ysink_stain_search_row .ysink_stain_dropdown{height:2.25rem;flex-basis:10rem;padding-top:.3rem}.ysink_stain_search_row .ysink_stain_searchbar{margin:unset;flex:1}.ysink_stain_tcard{display:grid;grid-template-columns:auto 1fr min-content;grid-template-rows:auto 1fr;align-items:center}.ysink_stain_tcard .ysink_stain_tmedia{grid-row:1/3;height:4rem;width:7rem;margin-right:1rem;background-size:cover}.ysink_stain_tcard .ysink_stain_tmedia *{display:flex;justify-content:center;align-items:center;height:100%}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview{z-index:1;transition:opacity .25s ease;backdrop-filter:brightness(.3);cursor:pointer}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview:not(:hover){opacity:0}.ysink_stain_tcard .ysink_stain_tdesc{grid-area:2/2}.ysink_stain_tcard .ysink_stain_tacts{grid-column:3;justify-self:right}.ysink_stain_tcard .ysink_stain_tacts>*{display:inline-block}.ysink_stain_tcard .ysink_stain_taulic{text-align:right;min-width:8rem}.ysink_stain_delete{margin-right:.5rem;fill:var(--interactive-normal);cursor:pointer}.ysink_stain_badge{width:1.5rem;height:1.5rem;margin-right:.5rem;border-radius:50%}.ysink_stain_badge.ysink_stain_bd{padding:.25rem;background:#040405}.ysink_stain_badge.ysink_stain_cc{padding:.1rem;background:#7289DA}.ysink_stain_cssedit{background:#1d1f21;color:#c5c8c6;border-radius:.3rem;font-family:var(--font-code);font-size:.9rem;line-height:1.1rem}.ysink_stain_nosplash{display:flex;flex-direction:column;align-items:center;margin-top:15rem;gap:.5rem}.ysink_stain_nosplash h2{margin-bottom:0}.ysink_stain_nosplash>*{flex:0}.ysink_stain_nosplash .ysink_stain_button{margin-top:2rem}.ysink_stain_officialbadge{display:inline;margin-left:.5rem}#ysink_stain_cumstain-tab{padding-bottom:0}");Array.isArray(E.persist.ghost.repos)||Un(),Array.isArray(E.persist.ghost.themes)||(E.persist.store.themes=[]);const xs=[ps(),_r(),Es(),...Ss(),gs(),ks()],Cs=()=>_.forEachRight(xs,e=>e());return He.onUnload=Cs,Object.defineProperty(He,"__esModule",{value:!0}),He})({},cumcord.pluginData,cumcord.patcher,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.utils,cumcord.ui.components,cumcord.ui.toasts,cumcord.modules.common.React,cumcord.modules.internal,cumcord.utils.logger,cumcord.websocket,cumcord.ui.modals);
