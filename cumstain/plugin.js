(function(w,ie,Rt,k,X,ee,_e,u,Ct,me){"use strict";function ve(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var A=ve(w),bt=ve(Rt),wt=ve(Ct);function Ee(t){if(!t?.id||!t.CSS)throw new Error("theme was missing either id or css.");const e=ie.injectCSS(t.CSS);A.default.state.ghost.unpatchCache.set(t.id,e);const s=A.default.persist.ghost.themes.findIndex(n=>n.id===t.id);let r={...t};r.enabled=!0,s===-1?A.default.persist.ghost.themes.push(r):A.default.persist.ghost.themes[s]=r,A.default.persist.store.themes=A.default.persist.ghost.themes}function Ke(t){if(!t?.id)throw new Error("theme was missing id.");A.default.state.ghost.unpatchCache.get(t.id)?.(),A.default.state.ghost.unpatchCache.delete(t.id);const s=A.default.persist.ghost.themes.findIndex(n=>n.id===t.id);let r={...t};r.enabled=!1,s===-1?A.default.persist.ghost.themes.push(r):A.default.persist.ghost.themes[s]=r,A.default.persist.store.themes=A.default.persist.ghost.themes}function Mt(t){try{Ke(t)}catch(e){if(e.message!=="theme was not loaded.")throw e}A.default.persist.store.themes=A.default.persist.ghost.themes.filter(e=>e.id!==t.id)}function Nt(){A.default.state.ghost.unpatchCache.forEach(t=>t?.()),A.default.state.ghost.unpatchCache.clear()}var At=()=>(w.persist.ghost.themes&&w.persist.ghost.themes.filter(t=>t.enabled).forEach(Ee),Nt),It=()=>(A.default.persist.ghost.repos||(A.default.persist.store.repos=[]),A.default.persist.ghost.themes||(A.default.persist.store.themes=[]),A.default.state=bt.default.make({unpatchCache:new Map}),()=>{A.default.state=void 0,delete A.default.state});const Tt=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,Dt=/^\\@/;function Ft(t){try{return JSON.parse(t)}catch{}}function Lt(t){const e=t.split(`
`)[0];if(e.includes("//META"))return Bt(t);if(e.includes("/**"))return Ot(t);throw new Error("META was not found.")}function Bt(t){const e=t.split(`
`)[0],s=e.substring(e.lastIndexOf("//META")+6,e.lastIndexOf("*//")),r=Ft(s);if(!r)throw new Error("META could not be parsed.");if(!r.name)throw new Error("META missing name data.");return r}function Ot(t){const e=t.split("/**",2)[1].split("*/",1)[0],s={};let r="",n="";for(const l of e.split(Tt))if(l.length!==0)if(l.charAt(0)==="@"&&l.charAt(1)!==" "){s[r]=n;const h=l.indexOf(" ");r=l.substr(1,h-1),n=l.substr(h+1)}else n+=" "+l.replace("\\n",`
`).replace(Dt,"@");return s[r]=n.trim(),delete s[""],s}async function $t(t,e){const s=await(await fetch(new URL(t,e).href)).text();return{id:t,CSS:s,compat:!0,...Lt(s)}}async function zt(t,e){const s=await(await fetch(new URL(t,e).href)).text();let r=new URL(t,e).pathname.split("/");r.splice(r.length-1,1,"cumcord_theme.json");const n=new URL(r.join("/"),new URL(t,e).origin),l=await(await fetch(n.href)).json();return{id:t,CSS:s,compat:!1,...l}}var Se=async(t,e)=>{try{return await zt(t,e)}catch(s){try{return await $t(t,e)}catch(r){let n=new Error("Failed to fetch theme - both CC and BD either failed to fetch or failed to parse");throw n.e1=s,n.e2=r,n}}};async function Pt(t){const e=new URL("repo.json",t).href,s=await(await fetch(e)).json();if(!s.themes||s.themes?.length===0)throw new Error("No themes found in repo");if(!s.meta)throw new Error("No repo metadata");if(!s?.meta.name)throw new Error("Repo did not have a name");return s}var oe=async t=>{const e=await Pt(t),s=await Promise.all(e.themes.map(r=>Se(r,t)));return{manifest:e,themes:s}};const{useEffect:Kt}=u.React,Ut=k.findByDisplayName("FormTitle"),jt=k.findByDisplayName("FormText");k.findByDisplayName("FormDivider");const Ue=k.findByProps("Sizes","Colors","Looks","DropdownSizes");var Ht=({repo:t})=>{const[e,s]=u.React.useState(void 0);return Kt(async()=>{e||s(await oe(t))}),u.React.createElement("div",{className:"ysink_stain_card ysink_stain_repocard"},u.React.createElement("div",{className:"ysink_stain_row"},u.React.createElement("div",null,u.React.createElement(Ut,{tag:"p",className:"ysink_stain_title"},e?.manifest.meta.name),u.React.createElement(jt,null,t)),u.React.createElement(Ue,{color:Ue.Colors.RED,className:"ysink_stain_button",onClick:()=>w.persist.store.repos=w.persist.ghost.repos.filter(r=>r!=t)},"Remove Repo")))};const{useState:Wt}=u.React,le=k.findByProps("ModalCloseButton"),je=k.findByProps("Sizes","Tags"),ke=k.findByDisplayName("Flex"),{openModal:Yt}=k.findByProps("openModalLazy"),Gt=k.findByDisplayName("FormSection"),Vt=k.findByDisplayName("FormDivider"),qt=k.findByDisplayName("TextInput"),Qt=k.findByProps("Sizes","Colors","Looks","DropdownSizes");async function Jt(t){try{return await oe(t),!0}catch{return!1}}const xe=t=>_e.showToast({title:t,duration:5e3});async function Xt(t){if(t.endsWith("/")||(t+="/"),w.persist.ghost.repos.find(e=>e.url==t)!==void 0)return xe("You already have this repo!"),!1;if(await Jt(t)){let e=w.persist.ghost.repos;return t.split("/"),e.push(t),w.persist.store.repos=e,xe("Added repo"),!0}else return xe("Repo was invalid"),!1}const Zt=({e:t})=>{const[e,s]=Wt("");return ee.useNest(w.persist),u.React.createElement(X.ErrorBoundary,null,u.React.createElement(le.ModalRoot,{transitionState:t.transitionState,size:"large",className:"ysink_stain_modal"},u.React.createElement(le.ModalHeader,{separator:!1},u.React.createElement(ke.Child,{basis:"auto",grow:1,shrink:1,wrap:!1},u.React.createElement(je,{tag:"h2",size:je.Sizes.SIZE_20},"Repo Manager")),u.React.createElement(ke.Child,{basis:"auto",grow:0,shrink:1,wrap:!1},u.React.createElement(le.ModalCloseButton,{onClick:t.onClose}))),u.React.createElement(le.ModalContent,null,u.React.createElement(Gt,null,u.React.createElement(ke,{basis:"auto",grow:1,shrink:1,className:"ysink_stain_row"},u.React.createElement(qt,{className:"ysink_stain_input",placeholder:"https://example.com/repo",type:"text",value:e,onChange:r=>s(r)}),u.React.createElement(Qt,{className:"ysink_stain_button",onClick:async()=>{await Xt(e)&&s("")}},"Add")),u.React.createElement(Vt,{className:"ysink_stain_divide"}),w.persist.ghost.repos.map(r=>u.React.createElement(Ht,{repo:r}))))))};var He=()=>Yt(t=>u.React.createElement(Zt,{e:t}));const en=u.React.useState,tn=u.React.createElement,nn=k.findByDisplayName("FormText"),sn=k.findByDisplayName("FormDivider");var rn=({items:t})=>{let[e,s]=en(0);return u.React.createElement("div",{className:"ysink_stain_tabbar_root"},u.React.createElement("div",{className:"ysink_stain_tabbar"},t.map((r,n)=>u.React.createElement("button",{className:"ysink_stain_button"+(n===e?" ysink_stain_selected":""),onClick:()=>s(n)},u.React.createElement(nn,null,r.text)))),u.React.createElement(sn,{className:"ysink_stain_divide"}),u.React.createElement("div",{className:"ysink_stain_tabbar_content"},tn(t[e].component,{goTo:s})))},an=()=>u.React.createElement("img",{src:"https://betterdiscord.app/resources/branding/logo_small.svg",className:"ysink_stain_badge ysink_stain_bd"}),on=()=>u.React.createElement("img",{src:"https://avatars.githubusercontent.com/u/81397549",className:"ysink_stain_badge ysink_stain_cc"}),ln=({theme:t,onClick:e})=>u.React.createElement("svg",{onClick:e,className:"ysink_stain_delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},u.React.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),u.React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),u.React.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}));const cn=k.findByDisplayName("FormText"),We=k.findByDisplayName("SmallMediaCarousel");var un=({media:t})=>u.React.createElement("div",{class:"ysink_stain_carousel"},t?u.React.createElement(We,{items:(typeof t=="string"?[t]:t).map(e=>({type:1,src:e})),autoplayInterval:5e3}):u.React.createElement("div",{className:"ysink_stain_noimg"},u.React.createElement(cn,{className:"ysink_stain_noimgtxt"},"No Image"),u.React.createElement(We,{items:[{type:1,src:""}]})));const hn=k.findByDisplayName("FormTitle"),Ye=k.findByDisplayName("FormText"),dn=k.findByDisplayName("FormSection"),fn=k.findByDisplayName("FormDivider"),gn=k.findByDisplayName("Switch"),Ge=t=>{for(const e of w.persist.ghost.themes)if(e.id===t&&e.enabled)return!0;return!1},pn=t=>w.persist.ghost.themes.some(e=>e.id===t);var Ve=({theme:t,deleteHook:e})=>(ee.useNest(w.persist),u.React.createElement("div",{className:"ysink_stain_card"},u.React.createElement(dn,null,u.React.createElement(un,{media:t.media}),u.React.createElement("div",{className:"ysink_stain_row"},t.compat?u.React.createElement(an,null):u.React.createElement(on,null),u.React.createElement(hn,{tag:"p",className:"ysink_stain_title"},t.name),pn(t.id)?u.React.createElement(ln,{theme:t,onClick:()=>{Mt(t),e?.()}}):[],u.React.createElement(gn,{checked:Ge(t.id),onChange:()=>Ge(t.id)?Ke(t):Ee(t)})),u.React.createElement(Ye,{className:"ysink_stain_desc"},t.description),u.React.createElement(fn,{className:"ysink_stain_divide"}),u.React.createElement(Ye,{className:"ysink_stain_author_licence"},t.author?`by ${t.author} `:"",t.license?`under ${t.license}`:""))));const{useState:yn}=u.React,_n=k.findByProps("Sizes","Colors","Looks","DropdownSizes"),mn=k.findByDisplayName("TextInput");var vn=()=>{ee.useNest(w.persist);let[t,e]=yn("");return u.React.createElement(X.ErrorBoundary,null,u.React.createElement("div",{className:"ysink_stain_installbar"},u.React.createElement(mn,{className:"ysink_stain_input",placeholder:"Theme import URL",type:"text",value:t,onChange:s=>e(s)}),u.React.createElement(_n,{className:"ysink_stain_button",onClick:()=>{Se(t).then(s=>{Ee(s),_e.showToast({title:`Loaded theme ${s.name}`,duration:5e3})},()=>_e.showToast({title:"Failed to fetch theme - check URL",duration:5e3})),e("")}},"Install")))};function K(t){return Array.isArray?Array.isArray(t):Je(t)==="[object Array]"}const En=1/0;function Sn(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-En?"-0":e}function kn(t){return t==null?"":Sn(t)}function U(t){return typeof t=="string"}function qe(t){return typeof t=="number"}function xn(t){return t===!0||t===!1||Rn(t)&&Je(t)=="[object Boolean]"}function Qe(t){return typeof t=="object"}function Rn(t){return Qe(t)&&t!==null}function z(t){return t!=null}function Re(t){return!t.trim().length}function Je(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Xs="Extended search is not available",Cn="Incorrect 'index' type",bn=t=>`Invalid value for key ${t}`,wn=t=>`Pattern length exceeds max of ${t}.`,Mn=t=>`Missing ${t} property in key`,Nn=t=>`Property 'weight' in key '${t}' must be a positive integer`,Xe=Object.prototype.hasOwnProperty;class An{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(r=>{let n=Ze(r);s+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,s+=n.weight}),this._keys.forEach(r=>{r.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ze(t){let e=null,s=null,r=null,n=1;if(U(t)||K(t))r=t,e=et(t),s=Ce(t);else{if(!Xe.call(t,"name"))throw new Error(Mn("name"));const l=t.name;if(r=l,Xe.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(Nn(l));e=et(l),s=Ce(l)}return{path:e,id:s,weight:n,src:r}}function et(t){return K(t)?t:t.split(".")}function Ce(t){return K(t)?t.join("."):t}function In(t,e){let s=[],r=!1;const n=(l,h,i)=>{if(!!z(l))if(!h[i])s.push(l);else{let g=h[i];const a=l[g];if(!z(a))return;if(i===h.length-1&&(U(a)||qe(a)||xn(a)))s.push(kn(a));else if(K(a)){r=!0;for(let d=0,y=a.length;d<y;d+=1)n(a[d],h,i+1)}else h.length&&n(a,h,i+1)}};return n(t,U(e)?e.split("."):e,0),r?s:s[0]}var x={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:In,ignoreLocation:!1,ignoreFieldNorm:!1}};const Tn=/[^ ]+/g;function Dn(t=3){const e=new Map,s=Math.pow(10,t);return{get(r){const n=r.match(Tn).length;if(e.has(n))return e.get(n);const l=1/Math.sqrt(n),h=parseFloat(Math.round(l*s)/s);return e.set(n,h),h},clear(){e.clear()}}}class be{constructor({getFn:e=x.getFn}={}){this.norm=Dn(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,r)=>{this._keysMap[s.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,U(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();U(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,r=this.size();s<r;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!z(e)||Re(e))return;let r={v:e,i:s,n:this.norm.get(e)};this.records.push(r)}_addObject(e,s){let r={i:s,$:{}};this.keys.forEach((n,l)=>{let h=this.getFn(e,n.path);if(!!z(h)){if(K(h)){let i=[];const g=[{nestedArrIndex:-1,value:h}];for(;g.length;){const{nestedArrIndex:a,value:d}=g.pop();if(!!z(d))if(U(d)&&!Re(d)){let y={v:d,i:a,n:this.norm.get(d)};i.push(y)}else K(d)&&d.forEach((y,E)=>{g.push({nestedArrIndex:E,value:y})})}r.$[l]=i}else if(!Re(h)){let i={v:h,n:this.norm.get(h)};r.$[l]=i}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function tt(t,e,{getFn:s=x.getFn}={}){const r=new be({getFn:s});return r.setKeys(t.map(Ze)),r.setSources(e),r.create(),r}function Fn(t,{getFn:e=x.getFn}={}){const{keys:s,records:r}=t,n=new be({getFn:e});return n.setKeys(s),n.setIndexRecords(r),n}function ce(t,{errors:e=0,currentLocation:s=0,expectedLocation:r=0,distance:n=x.distance,ignoreLocation:l=x.ignoreLocation}={}){const h=e/t.length;if(l)return h;const i=Math.abs(r-s);return n?h+i/n:i?1:h}function Ln(t=[],e=x.minMatchCharLength){let s=[],r=-1,n=-1,l=0;for(let h=t.length;l<h;l+=1){let i=t[l];i&&r===-1?r=l:!i&&r!==-1&&(n=l-1,n-r+1>=e&&s.push([r,n]),r=-1)}return t[l-1]&&l-r>=e&&s.push([r,l-1]),s}const q=32;function Bn(t,e,s,{location:r=x.location,distance:n=x.distance,threshold:l=x.threshold,findAllMatches:h=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,includeMatches:g=x.includeMatches,ignoreLocation:a=x.ignoreLocation}={}){if(e.length>q)throw new Error(wn(q));const d=e.length,y=t.length,E=Math.max(0,Math.min(r,y));let M=l,N=E;const I=i>1||g,b=I?Array(y):[];let R;for(;(R=t.indexOf(e,N))>-1;){let v=ce(e,{currentLocation:R,expectedLocation:E,distance:n,ignoreLocation:a});if(M=Math.min(v,M),N=R+d,I){let C=0;for(;C<d;)b[R+C]=1,C+=1}}N=-1;let c=[],o=1,f=d+y;const p=1<<d-1;for(let v=0;v<d;v+=1){let C=0,S=f;for(;C<S;)ce(e,{errors:v,currentLocation:E+S,expectedLocation:E,distance:n,ignoreLocation:a})<=M?C=S:f=S,S=Math.floor((f-C)/2+C);f=S;let D=Math.max(1,E-S+1),T=h?y:Math.min(E+S,y)+d,B=Array(T+2);B[T+1]=(1<<v)-1;for(let O=T;O>=D;O-=1){let G=O-1,Q=s[t.charAt(G)];if(I&&(b[G]=+!!Q),B[O]=(B[O+1]<<1|1)&Q,v&&(B[O]|=(c[O+1]|c[O])<<1|1|c[O+1]),B[O]&p&&(o=ce(e,{errors:v,currentLocation:G,expectedLocation:E,distance:n,ignoreLocation:a}),o<=M)){if(M=o,N=G,N<=E)break;D=Math.max(1,2*E-N)}}if(ce(e,{errors:v+1,currentLocation:E,expectedLocation:E,distance:n,ignoreLocation:a})>M)break;c=B}const m={isMatch:N>=0,score:Math.max(.001,o)};if(I){const v=Ln(b,i);v.length?g&&(m.indices=v):m.isMatch=!1}return m}function On(t){let e={};for(let s=0,r=t.length;s<r;s+=1){const n=t.charAt(s);e[n]=(e[n]||0)|1<<r-s-1}return e}class nt{constructor(e,{location:s=x.location,threshold:r=x.threshold,distance:n=x.distance,includeMatches:l=x.includeMatches,findAllMatches:h=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,isCaseSensitive:g=x.isCaseSensitive,ignoreLocation:a=x.ignoreLocation}={}){if(this.options={location:s,threshold:r,distance:n,includeMatches:l,findAllMatches:h,minMatchCharLength:i,isCaseSensitive:g,ignoreLocation:a},this.pattern=g?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(E,M)=>{this.chunks.push({pattern:E,alphabet:On(E),startIndex:M})},y=this.pattern.length;if(y>q){let E=0;const M=y%q,N=y-M;for(;E<N;)d(this.pattern.substr(E,q),E),E+=q;if(M){const I=y-q;d(this.pattern.substr(I),I)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:r}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let N={isMatch:!0,score:0};return r&&(N.indices=[[0,e.length-1]]),N}const{location:n,distance:l,threshold:h,findAllMatches:i,minMatchCharLength:g,ignoreLocation:a}=this.options;let d=[],y=0,E=!1;this.chunks.forEach(({pattern:N,alphabet:I,startIndex:b})=>{const{isMatch:R,score:c,indices:o}=Bn(e,N,I,{location:n+b,distance:l,threshold:h,findAllMatches:i,minMatchCharLength:g,includeMatches:r,ignoreLocation:a});R&&(E=!0),y+=c,R&&o&&(d=[...d,...o])});let M={isMatch:E,score:E?y/this.chunks.length:1};return E&&r&&(M.indices=d),M}}class H{constructor(e){this.pattern=e}static isMultiMatch(e){return st(e,this.multiRegex)}static isSingleMatch(e){return st(e,this.singleRegex)}search(){}}function st(t,e){const s=t.match(e);return s?s[1]:null}class $n extends H{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class zn extends H{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Pn extends H{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Kn extends H{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Un extends H{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class jn extends H{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class rt extends H{constructor(e,{location:s=x.location,threshold:r=x.threshold,distance:n=x.distance,includeMatches:l=x.includeMatches,findAllMatches:h=x.findAllMatches,minMatchCharLength:i=x.minMatchCharLength,isCaseSensitive:g=x.isCaseSensitive,ignoreLocation:a=x.ignoreLocation}={}){super(e);this._bitapSearch=new nt(e,{location:s,threshold:r,distance:n,includeMatches:l,findAllMatches:h,minMatchCharLength:i,isCaseSensitive:g,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class at extends H{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,r;const n=[],l=this.pattern.length;for(;(r=e.indexOf(this.pattern,s))>-1;)s=r+l,n.push([r,s-1]);const h=!!n.length;return{isMatch:h,score:h?0:1,indices:n}}}const we=[$n,at,Pn,Kn,jn,Un,zn,rt],it=we.length,Hn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,Wn="|";function Yn(t,e={}){return t.split(Wn).map(s=>{let r=s.trim().split(Hn).filter(l=>l&&!!l.trim()),n=[];for(let l=0,h=r.length;l<h;l+=1){const i=r[l];let g=!1,a=-1;for(;!g&&++a<it;){const d=we[a];let y=d.isMultiMatch(i);y&&(n.push(new d(y,e)),g=!0)}if(!g)for(a=-1;++a<it;){const d=we[a];let y=d.isSingleMatch(i);if(y){n.push(new d(y,e));break}}}return n})}const Gn=new Set([rt.type,at.type]);class Vn{constructor(e,{isCaseSensitive:s=x.isCaseSensitive,includeMatches:r=x.includeMatches,minMatchCharLength:n=x.minMatchCharLength,ignoreLocation:l=x.ignoreLocation,findAllMatches:h=x.findAllMatches,location:i=x.location,threshold:g=x.threshold,distance:a=x.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:r,minMatchCharLength:n,findAllMatches:h,ignoreLocation:l,location:i,threshold:g,distance:a},this.pattern=s?e:e.toLowerCase(),this.query=Yn(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let l=0,h=[],i=0;for(let g=0,a=s.length;g<a;g+=1){const d=s[g];h.length=0,l=0;for(let y=0,E=d.length;y<E;y+=1){const M=d[y],{isMatch:N,indices:I,score:b}=M.search(e);if(N){if(l+=1,i+=b,r){const R=M.constructor.type;Gn.has(R)?h=[...h,...I]:h.push(I)}}else{i=0,l=0,h.length=0;break}}if(l){let y={isMatch:!0,score:i/l};return r&&(y.indices=h),y}}return{isMatch:!1,score:1}}}const Me=[];function qn(...t){Me.push(...t)}function Ne(t,e){for(let s=0,r=Me.length;s<r;s+=1){let n=Me[s];if(n.condition(t,e))return new n(t,e)}return new nt(t,e)}const te={AND:"$and",OR:"$or"},Ae={PATH:"$path",PATTERN:"$val"},Ie=t=>!!(t[te.AND]||t[te.OR]),Qn=t=>!!t[Ae.PATH],Jn=t=>!K(t)&&Qe(t)&&!Ie(t),ot=t=>({[te.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function lt(t,e,{auto:s=!0}={}){const r=n=>{let l=Object.keys(n);const h=Qn(n);if(!h&&l.length>1&&!Ie(n))return r(ot(n));if(Jn(n)){const g=h?n[Ae.PATH]:l[0],a=h?n[Ae.PATTERN]:n[g];if(!U(a))throw new Error(bn(g));const d={keyId:Ce(g),pattern:a};return s&&(d.searcher=Ne(a,e)),d}let i={children:[],operator:l[0]};return l.forEach(g=>{const a=n[g];K(a)&&a.forEach(d=>{i.children.push(r(d))})}),i};return Ie(t)||(t=ot(t)),r(t)}function Xn(t,{ignoreFieldNorm:e=x.ignoreFieldNorm}){t.forEach(s=>{let r=1;s.matches.forEach(({key:n,norm:l,score:h})=>{const i=n?n.weight:null;r*=Math.pow(h===0&&i?Number.EPSILON:h,(i||1)*(e?1:l))}),s.score=r})}function Zn(t,e){const s=t.matches;e.matches=[],!!z(s)&&s.forEach(r=>{if(!z(r.indices)||!r.indices.length)return;const{indices:n,value:l}=r;let h={indices:n,value:l};r.key&&(h.key=r.key.src),r.idx>-1&&(h.refIndex=r.idx),e.matches.push(h)})}function es(t,e){e.score=t.score}function ts(t,e,{includeMatches:s=x.includeMatches,includeScore:r=x.includeScore}={}){const n=[];return s&&n.push(Zn),r&&n.push(es),t.map(l=>{const{idx:h}=l,i={item:e[h],refIndex:h};return n.length&&n.forEach(g=>{g(l,i)}),i})}class Z{constructor(e,s={},r){this.options={...x,...s},this.options.useExtendedSearch,this._keyStore=new An(this.options.keys),this.setCollection(e,r)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof be))throw new Error(Cn);this._myIndex=s||tt(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){!z(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let r=0,n=this._docs.length;r<n;r+=1){const l=this._docs[r];e(l,r)&&(this.removeAt(r),r-=1,n-=1,s.push(l))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:l,sortFn:h,ignoreFieldNorm:i}=this.options;let g=U(e)?U(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Xn(g,{ignoreFieldNorm:i}),l&&g.sort(h),qe(s)&&s>-1&&(g=g.slice(0,s)),ts(g,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const s=Ne(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:l,i:h,n:i})=>{if(!z(l))return;const{isMatch:g,score:a,indices:d}=s.searchIn(l);g&&n.push({item:l,idx:h,matches:[{score:a,value:l,norm:i,indices:d}]})}),n}_searchLogical(e){const s=lt(e,this.options),r=(i,g,a)=>{if(!i.children){const{keyId:d,searcher:y}=i,E=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(g,d),searcher:y});return E&&E.length?[{idx:a,item:g,matches:E}]:[]}switch(i.operator){case te.AND:{const d=[];for(let y=0,E=i.children.length;y<E;y+=1){const M=i.children[y],N=r(M,g,a);if(N.length)d.push(...N);else return[]}return d}case te.OR:{const d=[];for(let y=0,E=i.children.length;y<E;y+=1){const M=i.children[y],N=r(M,g,a);if(N.length){d.push(...N);break}}return d}}},n=this._myIndex.records,l={},h=[];return n.forEach(({$:i,i:g})=>{if(z(i)){let a=r(s,i,g);a.length&&(l[g]||(l[g]={idx:g,item:i,matches:[]},h.push(l[g])),a.forEach(({matches:d})=>{l[g].matches.push(...d)}))}}),h}_searchObjectList(e){const s=Ne(e,this.options),{keys:r,records:n}=this._myIndex,l=[];return n.forEach(({$:h,i})=>{if(!z(h))return;let g=[];r.forEach((a,d)=>{g.push(...this._findMatches({key:a,value:h[d],searcher:s}))}),g.length&&l.push({idx:i,item:h,matches:g})}),l}_findMatches({key:e,value:s,searcher:r}){if(!z(s))return[];let n=[];if(K(s))s.forEach(({v:l,i:h,n:i})=>{if(!z(l))return;const{isMatch:g,score:a,indices:d}=r.searchIn(l);g&&n.push({score:a,key:e,value:l,idx:h,norm:i,indices:d})});else{const{v:l,n:h}=s,{isMatch:i,score:g,indices:a}=r.searchIn(l);i&&n.push({score:g,key:e,value:l,norm:h,indices:a})}return n}}Z.version="6.4.6",Z.createIndex=tt,Z.parseIndex=Fn,Z.config=x,Z.parseQuery=lt,qn(Vn);const ns={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]};var ct=(t,e)=>!e||e==""?t:new Z(t,ns).search(e).map(s=>s.item);const ut=k.findByDisplayName("SearchBar");var ht=({query:t,onChange:e})=>u.React.createElement(ut,{className:"ysink_stain_searchbar",query:t,onQueryChange:e,placeholder:"Search themes...",size:ut.Sizes.MEDIUM});const{SingleSelect:ss}=k.findByDisplayName("Select",!1);var dt=({filterMode:t,setFilterMode:e})=>u.React.createElement(ss,{options:[{value:0,label:"Show All"},{value:1,label:"CC Only"},{value:2,label:"BD Only"}],value:t,onChange:e,isDisabled:!1,className:"ysink_stain_dropdown"});const rs=k.findByDisplayName("FormTitle"),as=k.findByDisplayName("FormText"),is=k.findByDisplayName("FormSection"),Te=k.findByProps("Sizes","Colors","Looks","DropdownSizes");var os=({goToStore:t})=>u.React.createElement(is,{className:"ysink_stain_nosplash"},u.React.createElement(rs,{tag:"h2"},"No Themes"),u.React.createElement(as,null,"Paste a link in above, or head over to the store"),u.React.createElement(Te,{className:"ysink_stain_button",color:Te.Colors.GREEN,sizes:Te.Sizes.LARGE,onClick:t},"Get some themes"));const{useState:ft,useReducer:ls}=u.React;var cs=({goTo:t})=>{ee.useNest(w.persist);const[e,s]=ft("");let[r,n]=ft(0);const[,l]=ls(h=>~h,0);return u.React.createElement(X.ErrorBoundary,null,u.React.createElement(vn,null),u.React.createElement("div",{className:"ysink_stain_search_row"},u.React.createElement(ht,{query:e,onChange:s}),u.React.createElement(dt,{filterMode:r,setFilterMode:n})),w.persist.ghost.themes.length===0?u.React.createElement(os,{goToStore:()=>t(1)}):u.React.createElement("div",{className:"ysink_stain_cardcontainer"},ct(w.persist.ghost.themes,e).filter(h=>r===0||r===1&&!h.compat||r===2&&h.compat).map(h=>u.React.createElement(Ve,{theme:h,deleteHook:l}))))},ue=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},gt={};Object.defineProperty(gt,"__esModule",{value:!0});var W=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},us=function(){function t(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),hs=wt.default,ne=ds(hs);function ds(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function fs(t,e){var s={};for(var r in t)e.indexOf(r)>=0||!Object.prototype.hasOwnProperty.call(t,r)||(s[r]=t[r]);return s}function gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function ps(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var ys=13,_s=9,ms=8,vs=89,he=90,Es=77,yt=57,_t=219,mt=222,vt=192,Ss=27,Et=100,ks=3e3,xs="navigator"in ue&&/Win/i.test(navigator.platform),De="navigator"in ue&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),de="npm__react-simple-code-editor__textarea",Rs=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+de+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+de+` {
    color: transparent !important;
  }

  .`+de+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,St=function(t){ps(e,t);function e(){var s,r,n,l;gs(this,e);for(var h=arguments.length,i=Array(h),g=0;g<h;g++)i[g]=arguments[g];return l=(r=(n=pt(this,(s=e.__proto__||Object.getPrototypeOf(e)).call.apply(s,[this].concat(i))),n),n.state={capture:!0},n._recordCurrentState=function(){var a=n._input;if(!!a){var d=a.value,y=a.selectionStart,E=a.selectionEnd;n._recordChange({value:d,selectionStart:y,selectionEnd:E})}},n._getLines=function(a,d){return a.substring(0,d).split(`
`)},n._recordChange=function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=n._history,E=y.stack,M=y.offset;if(E.length&&M>-1){n._history.stack=E.slice(0,M+1);var N=n._history.stack.length;if(N>Et){var I=N-Et;n._history.stack=E.slice(I,N),n._history.offset=Math.max(n._history.offset-I,0)}}var b=Date.now();if(d){var R=n._history.stack[n._history.offset];if(R&&b-R.timestamp<ks){var c=/[^a-z0-9]([a-z0-9]+)$/i,o=n._getLines(R.value,R.selectionStart).pop().match(c),f=n._getLines(a.value,a.selectionStart).pop().match(c);if(o&&f&&f[1].startsWith(o[1])){n._history.stack[n._history.offset]=W({},a,{timestamp:b});return}}}n._history.stack.push(W({},a,{timestamp:b})),n._history.offset++},n._updateInput=function(a){var d=n._input;!d||(d.value=a.value,d.selectionStart=a.selectionStart,d.selectionEnd=a.selectionEnd,n.props.onValueChange(a.value))},n._applyEdits=function(a){var d=n._input,y=n._history.stack[n._history.offset];y&&d&&(n._history.stack[n._history.offset]=W({},y,{selectionStart:d.selectionStart,selectionEnd:d.selectionEnd})),n._recordChange(a),n._updateInput(a)},n._undoEdit=function(){var a=n._history,d=a.stack,y=a.offset,E=d[y-1];E&&(n._updateInput(E),n._history.offset=Math.max(y-1,0))},n._redoEdit=function(){var a=n._history,d=a.stack,y=a.offset,E=d[y+1];E&&(n._updateInput(E),n._history.offset=Math.min(y+1,d.length-1))},n._handleKeyDown=function(a){var d=n.props,y=d.tabSize,E=d.insertSpaces,M=d.ignoreTabKey,N=d.onKeyDown;if(!(N&&(N(a),a.defaultPrevented))){a.keyCode===Ss&&a.target.blur();var I=a.target,b=I.value,R=I.selectionStart,c=I.selectionEnd,o=(E?" ":"	").repeat(y);if(a.keyCode===_s&&!M&&n.state.capture)if(a.preventDefault(),a.shiftKey){var f=n._getLines(b,R),p=f.length-1,m=n._getLines(b,c).length-1,v=b.split(`
`).map(function(L,J){return J>=p&&J<=m&&L.startsWith(o)?L.substring(o.length):L}).join(`
`);if(b!==v){var C=f[p];n._applyEdits({value:v,selectionStart:C.startsWith(o)?R-o.length:R,selectionEnd:c-(b.length-v.length)})}}else if(R!==c){var S=n._getLines(b,R),D=S.length-1,T=n._getLines(b,c).length-1,B=S[D];n._applyEdits({value:b.split(`
`).map(function(L,J){return J>=D&&J<=T?o+L:L}).join(`
`),selectionStart:/\S/.test(B)?R+o.length:R,selectionEnd:c+o.length*(T-D+1)})}else{var Y=R+o.length;n._applyEdits({value:b.substring(0,R)+o+b.substring(c),selectionStart:Y,selectionEnd:Y})}else if(a.keyCode===ms){var O=R!==c,G=b.substring(0,R);if(G.endsWith(o)&&!O){a.preventDefault();var Q=R-o.length;n._applyEdits({value:b.substring(0,R-o.length)+b.substring(c),selectionStart:Q,selectionEnd:Q})}}else if(a.keyCode===ys){if(R===c){var fe=n._getLines(b,R).pop(),F=fe.match(/^\s+/);if(F&&F[0]){a.preventDefault();var P=`
`+F[0],j=R+P.length;n._applyEdits({value:b.substring(0,R)+P+b.substring(c),selectionStart:j,selectionEnd:j})}}}else if(a.keyCode===yt||a.keyCode===_t||a.keyCode===mt||a.keyCode===vt){var $=void 0;a.keyCode===yt&&a.shiftKey?$=["(",")"]:a.keyCode===_t?a.shiftKey?$=["{","}"]:$=["[","]"]:a.keyCode===mt?a.shiftKey?$=['"','"']:$=["'","'"]:a.keyCode===vt&&!a.shiftKey&&($=["`","`"]),R!==c&&$&&(a.preventDefault(),n._applyEdits({value:b.substring(0,R)+$[0]+b.substring(R,c)+$[1]+b.substring(c),selectionStart:R,selectionEnd:c+2}))}else(De?a.metaKey&&a.keyCode===he:a.ctrlKey&&a.keyCode===he)&&!a.shiftKey&&!a.altKey?(a.preventDefault(),n._undoEdit()):(De?a.metaKey&&a.keyCode===he&&a.shiftKey:xs?a.ctrlKey&&a.keyCode===vs:a.ctrlKey&&a.keyCode===he&&a.shiftKey)&&!a.altKey?(a.preventDefault(),n._redoEdit()):a.keyCode===Es&&a.ctrlKey&&(De?a.shiftKey:!0)&&(a.preventDefault(),n.setState(function(L){return{capture:!L.capture}}))}},n._handleChange=function(a){var d=a.target,y=d.value,E=d.selectionStart,M=d.selectionEnd;n._recordChange({value:y,selectionStart:E,selectionEnd:M},!0),n.props.onValueChange(y)},n._history={stack:[],offset:-1},r),pt(n,l)}return us(e,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var r=this,n=this.props,l=n.value,h=n.style,i=n.padding,g=n.highlight,a=n.textareaId,d=n.textareaClassName,y=n.autoFocus,E=n.disabled,M=n.form,N=n.maxLength,I=n.minLength,b=n.name,R=n.placeholder,c=n.readOnly,o=n.required,f=n.onClick,p=n.onFocus,m=n.onBlur,v=n.onKeyUp;n.onKeyDown,n.onValueChange,n.tabSize,n.insertSpaces,n.ignoreTabKey;var C=n.preClassName,S=fs(n,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),D={paddingTop:i,paddingRight:i,paddingBottom:i,paddingLeft:i},T=g(l);return ne.createElement("div",W({},S,{style:W({},se.container,h)}),ne.createElement("textarea",{ref:function(Y){return r._input=Y},style:W({},se.editor,se.textarea,D),className:de+(d?" "+d:""),id:a,value:l,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:f,onKeyUp:v,onFocus:p,onBlur:m,disabled:E,form:M,maxLength:N,minLength:I,name:b,placeholder:R,readOnly:c,required:o,autoFocus:y,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),ne.createElement("pre",W({className:C,"aria-hidden":"true",style:W({},se.editor,se.highlight,D)},typeof T=="string"?{dangerouslySetInnerHTML:{__html:T+"<br />"}}:{children:T})),ne.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:Rs}}))}},{key:"session",get:function(){return{history:this._history}},set:function(r){this._history=r.history}}]),e}(ne.Component);St.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var Cs=gt.default=St,se={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},Fe={exports:{}};(function(t){var e=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(r){var n=/\blang(?:uage)?-([\w-]+)\b/i,l=0,h={},i={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function c(o){return o instanceof g?new g(o.type,c(o.content),o.alias):Array.isArray(o)?o.map(c):o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++l}),c.__id},clone:function c(o,f){f=f||{};var p,m;switch(i.util.type(o)){case"Object":if(m=i.util.objId(o),f[m])return f[m];p={},f[m]=p;for(var v in o)o.hasOwnProperty(v)&&(p[v]=c(o[v],f));return p;case"Array":return m=i.util.objId(o),f[m]?f[m]:(p=[],f[m]=p,o.forEach(function(C,S){p[S]=c(C,f)}),p);default:return o}},getLanguage:function(c){for(;c&&!n.test(c.className);)c=c.parentElement;return c?(c.className.match(n)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(p){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(p.stack)||[])[1];if(c){var o=document.getElementsByTagName("script");for(var f in o)if(o[f].src==c)return o[f]}return null}},isActive:function(c,o,f){for(var p="no-"+o;c;){var m=c.classList;if(m.contains(o))return!0;if(m.contains(p))return!1;c=c.parentElement}return!!f}},languages:{plain:h,plaintext:h,text:h,txt:h,extend:function(c,o){var f=i.util.clone(i.languages[c]);for(var p in o)f[p]=o[p];return f},insertBefore:function(c,o,f,p){p=p||i.languages;var m=p[c],v={};for(var C in m)if(m.hasOwnProperty(C)){if(C==o)for(var S in f)f.hasOwnProperty(S)&&(v[S]=f[S]);f.hasOwnProperty(C)||(v[C]=m[C])}var D=p[c];return p[c]=v,i.languages.DFS(i.languages,function(T,B){B===D&&T!=c&&(this[T]=v)}),v},DFS:function c(o,f,p,m){m=m||{};var v=i.util.objId;for(var C in o)if(o.hasOwnProperty(C)){f.call(o,C,o[C],p||C);var S=o[C],D=i.util.type(S);D==="Object"&&!m[v(S)]?(m[v(S)]=!0,c(S,f,null,m)):D==="Array"&&!m[v(S)]&&(m[v(S)]=!0,c(S,f,C,m))}}},plugins:{},highlightAll:function(c,o){i.highlightAllUnder(document,c,o)},highlightAllUnder:function(c,o,f){var p={callback:f,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",p),p.elements=Array.prototype.slice.apply(p.container.querySelectorAll(p.selector)),i.hooks.run("before-all-elements-highlight",p);for(var m=0,v;v=p.elements[m++];)i.highlightElement(v,o===!0,p.callback)},highlightElement:function(c,o,f){var p=i.util.getLanguage(c),m=i.languages[p];c.className=c.className.replace(n,"").replace(/\s+/g," ")+" language-"+p;var v=c.parentElement;v&&v.nodeName.toLowerCase()==="pre"&&(v.className=v.className.replace(n,"").replace(/\s+/g," ")+" language-"+p);var C=c.textContent,S={element:c,language:p,grammar:m,code:C};function D(B){S.highlightedCode=B,i.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,i.hooks.run("after-highlight",S),i.hooks.run("complete",S),f&&f.call(S.element)}if(i.hooks.run("before-sanity-check",S),v=S.element.parentElement,v&&v.nodeName.toLowerCase()==="pre"&&!v.hasAttribute("tabindex")&&v.setAttribute("tabindex","0"),!S.code){i.hooks.run("complete",S),f&&f.call(S.element);return}if(i.hooks.run("before-highlight",S),!S.grammar){D(i.util.encode(S.code));return}if(o&&r.Worker){var T=new Worker(i.filename);T.onmessage=function(B){D(B.data)},T.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else D(i.highlight(S.code,S.grammar,S.language))},highlight:function(c,o,f){var p={code:c,grammar:o,language:f};return i.hooks.run("before-tokenize",p),p.tokens=i.tokenize(p.code,p.grammar),i.hooks.run("after-tokenize",p),g.stringify(i.util.encode(p.tokens),p.language)},tokenize:function(c,o){var f=o.rest;if(f){for(var p in f)o[p]=f[p];delete o.rest}var m=new y;return E(m,m.head,c),d(c,m,o,m.head,0),N(m)},hooks:{all:{},add:function(c,o){var f=i.hooks.all;f[c]=f[c]||[],f[c].push(o)},run:function(c,o){var f=i.hooks.all[c];if(!(!f||!f.length))for(var p=0,m;m=f[p++];)m(o)}},Token:g};r.Prism=i;function g(c,o,f,p){this.type=c,this.content=o,this.alias=f,this.length=(p||"").length|0}g.stringify=function c(o,f){if(typeof o=="string")return o;if(Array.isArray(o)){var p="";return o.forEach(function(D){p+=c(D,f)}),p}var m={type:o.type,content:c(o.content,f),tag:"span",classes:["token",o.type],attributes:{},language:f},v=o.alias;v&&(Array.isArray(v)?Array.prototype.push.apply(m.classes,v):m.classes.push(v)),i.hooks.run("wrap",m);var C="";for(var S in m.attributes)C+=" "+S+'="'+(m.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+m.tag+' class="'+m.classes.join(" ")+'"'+C+">"+m.content+"</"+m.tag+">"};function a(c,o,f,p){c.lastIndex=o;var m=c.exec(f);if(m&&p&&m[1]){var v=m[1].length;m.index+=v,m[0]=m[0].slice(v)}return m}function d(c,o,f,p,m,v){for(var C in f)if(!(!f.hasOwnProperty(C)||!f[C])){var S=f[C];S=Array.isArray(S)?S:[S];for(var D=0;D<S.length;++D){if(v&&v.cause==C+","+D)return;var T=S[D],B=T.inside,Y=!!T.lookbehind,O=!!T.greedy,G=T.alias;if(O&&!T.pattern.global){var Q=T.pattern.toString().match(/[imsuy]*$/)[0];T.pattern=RegExp(T.pattern.source,Q+"g")}for(var fe=T.pattern||T,F=p.next,P=m;F!==o.tail&&!(v&&P>=v.reach);P+=F.value.length,F=F.next){var j=F.value;if(o.length>c.length)return;if(!(j instanceof g)){var $=1,L;if(O){if(L=a(fe,P,c,Y),!L)break;var ge=L.index,J=L.index+L[0].length,V=P;for(V+=F.value.length;ge>=V;)F=F.next,V+=F.value.length;if(V-=F.value.length,P=V,F.value instanceof g)continue;for(var ae=F;ae!==o.tail&&(V<J||typeof ae.value=="string");ae=ae.next)$++,V+=ae.value.length;$--,j=c.slice(P,V),L.index-=P}else if(L=a(fe,0,j,Y),!L)continue;var ge=L.index,pe=L[0],$e=j.slice(0,ge),xt=j.slice(ge+pe.length),ze=P+j.length;v&&ze>v.reach&&(v.reach=ze);var ye=F.prev;$e&&(ye=E(o,ye,$e),P+=$e.length),M(o,ye,$);var Js=new g(C,B?i.tokenize(pe,B):pe,G,pe);if(F=E(o,ye,Js),xt&&E(o,F,xt),$>1){var Pe={cause:C+","+D,reach:ze};d(c,o,f,F.prev,P,Pe),v&&Pe.reach>v.reach&&(v.reach=Pe.reach)}}}}}}function y(){var c={value:null,prev:null,next:null},o={value:null,prev:c,next:null};c.next=o,this.head=c,this.tail=o,this.length=0}function E(c,o,f){var p=o.next,m={value:f,prev:o,next:p};return o.next=m,p.prev=m,c.length++,m}function M(c,o,f){for(var p=o.next,m=0;m<f&&p!==c.tail;m++)p=p.next;o.next=p,p.prev=o,c.length-=m}function N(c){for(var o=[],f=c.head.next;f!==c.tail;)o.push(f.value),f=f.next;return o}if(!r.document)return r.addEventListener&&(i.disableWorkerMessageHandler||r.addEventListener("message",function(c){var o=JSON.parse(c.data),f=o.language,p=o.code,m=o.immediateClose;r.postMessage(i.highlight(p,i.languages[f],f)),m&&r.close()},!1)),i;var I=i.util.currentScript();I&&(i.filename=I.src,I.hasAttribute("data-manual")&&(i.manual=!0));function b(){i.manual||i.highlightAll()}if(!i.manual){var R=document.readyState;R==="loading"||R==="interactive"&&I&&I.defer?document.addEventListener("DOMContentLoaded",b):window.requestAnimationFrame?window.requestAnimationFrame(b):window.setTimeout(b,16)}return i}(e);t.exports&&(t.exports=s),typeof ue!="undefined"&&(ue.Prism=s)})(Fe),function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var s=t.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(Prism);const bs=k.findByProps("contentColumn").contentColumn,{useState:ws,useCallback:Ms}=u.React;var Ns=()=>{const[t,e]=ws(w.persist.ghost.quickCSS),s=n=>{w.persist.store.quickCSS=n,w.reloadCSS()},r=Ms(_.throttle(s,250,{leading:!0,trailing:!0}),[]);return u.React.createElement(X.ErrorBoundary,null,u.React.createElement("div",{class:"ysink_stain_quickcss"},u.React.createElement(Cs,{className:"ysink_stain_editorroot",value:t??"",onValueChange:n=>{e(n),r(n)},highlight:n=>Fe.exports.highlight(n,Fe.exports.languages.css),padding:10}),u.React.createElement("link",{href:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@master/themes/prism-atom-dark.css",rel:"stylesheet"}),u.React.createElement("style",null,`:root { --background-primary: #1d1f21; } .theme-light .${bs} { --text-normal: white; }`)))};const As=k.findByDisplayName("FormTitle"),Is=k.findByDisplayName("FormText"),Ts=k.findByDisplayName("FormSection"),Le=k.findByProps("Sizes","Colors","Looks","DropdownSizes");var Ds=({})=>u.React.createElement(Ts,{className:"ysink_stain_nosplash"},u.React.createElement(As,{tag:"h2"},"No Repos"),u.React.createElement(Is,null,"Add one in the repo manager!"),u.React.createElement(Le,{className:"ysink_stain_button",color:Le.Colors.GREEN,sizes:Le.Sizes.LARGE,onClick:He},"Open repo manager"));const{useState:re,useEffect:Fs,useReducer:Ls}=u.React,Bs=()=>Promise.all(w.persist.ghost.repos.map(oe)),Os=t=>t.flatMap(e=>e.themes);async function $s(){let t=await Bs();return{repos:t,themes:Os(t)}}const zs=(t,e)=>Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((s,r)=>s===e[r]);var Ps=()=>{ee.useNest(w.persist);const[t,e]=re(""),[s,r]=re([]),[n,l]=re(void 0),[h,i]=re(void 0),[g,a]=re(0);Fs(()=>{let y=()=>$s().then(({repos:E,themes:M})=>{l(E),i(M)});zs(s,w.persist.ghost.repos)||(r(w.persist.ghost.repos),y()),(!n||!h)&&y()});const[,d]=Ls(y=>~y,0);return u.React.createElement(X.ErrorBoundary,null,u.React.createElement("div",{className:"ysink_stain_search_row"},u.React.createElement(ht,{query:t,onChange:e}),u.React.createElement(dt,{filterMode:g,setFilterMode:a})),w.persist.ghost.repos.length===0?u.React.createElement(Ds,null):u.React.createElement("div",{className:"ysink_stain_cardcontainer"},ct(h??[],t).filter(y=>g===0||g===1&&!y.compat||g===2&&y.compat).map(y=>u.React.createElement(Ve,{theme:y,deleteHook:d}))))};const Ks=k.findByDisplayName("FormTitle"),Us=k.findByDisplayName("FormSection");k.findByDisplayName("FormText");const js=k.findByDisplayName("Flex"),Be=k.findByProps("Sizes","Colors","Looks","DropdownSizes");var Hs=()=>u.React.createElement(X.ErrorBoundary,null,u.React.createElement(Us,null,u.React.createElement(js,{basis:"auto",grow:1,shrink:1,className:"ysink_stain_row"},u.React.createElement(Ks,{tag:"h1"},"Cumstain Settings"),u.React.createElement(Be,{className:"ysink_stain_button",color:Be.Colors.GREEN,sizes:Be.Sizes.LARGE,onClick:He},"Repo Manager")),u.React.createElement(rn,{items:[{text:"Installed",component:cs},{text:"Store",component:Ps},{text:"Quick CSS",component:Ns}]}))),Ws=()=>ie.after("getPredicateSections",k.findByDisplayName("SettingsView").prototype,(t,e)=>{if(e[1]?.section!="My Account")return;let s=e.findIndex(r=>r.section=="CUMCORD_PLUGINS")+1;return e.splice(s,0,{section:"ysink_stain_CUMSTAIN",label:"Themes",element:Hs}),e}),Ys=()=>cumcord.patcher.injectCSS(".ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:#fff4}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:#0003}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_cardcontainer{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.ysink_stain_card{padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;display:flex;flex-direction:column;z-index:1;background-color:var(--deprecated-card-bg)}.ysink_stain_card .ysink_stain_title{font-size:1rem;padding-top:.2rem;display:inline;flex:1;margin:0}.ysink_stain_card .ysink_stain_button{display:inline;padding:0}.ysink_stain_card .ysink_stain_button>div{padding:2px 16px}.ysink_stain_card .ysink_stain_row{display:flex;margin-bottom:.5rem}.ysink_stain_card .ysink_stain_author_licence{font-style:italic}.ysink_stain_card .ysink_stain_desc{flex:1}.ysink_stain_card .ysink_stain_carousel{margin-bottom:1rem}.ysink_stain_card .ysink_stain_carousel>div:not(.ysink_stain_noimg)>:last-child,.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg>div>:last-child{height:2.25rem}.ysink_stain_card .ysink_stain_carousel>div{border-radius:.5rem}.theme-dark .ysink_stain_card .ysink_stain_carousel>:not(.ysink_stain_noimg){background:#0005}.theme-light .ysink_stain_card .ysink_stain_carousel>:not(.ysink_stain_noimg){background:#000d}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg{display:grid}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg div{grid-area:1/1}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg div:not(.ysink_stain_noimgtxt){visibility:hidden;z-index:-1}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg div.ysink_stain_noimgtxt{grid-area:1/1;font-size:1.5rem;text-align:center;padding-top:35%;text-transform:uppercase;opacity:.8}.ysink_stain_divide{margin:0 0 1rem}.ysink_stain_modal .ysink_stain_divide{margin:.5rem 0}.ysink_stain_card .ysink_stain_divide{margin:.2rem 0}.ysink_stain_delete{margin-right:.5rem;fill:var(--interactive-normal)}.ysink_stain_installbar{display:flex}.ysink_stain_installbar>*{flex:1}.ysink_stain_installbar>:last-child{flex:unset;margin-left:1rem}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_search_row{display:flex;gap:.75rem;margin:.75rem 0}.ysink_stain_search_row .ysink_stain_dropdown{height:2.25rem;flex-basis:10rem;padding-top:.3rem}.ysink_stain_search_row .ysink_stain_searchbar{margin:unset;flex:1}.ysink_stain_editorroot{background:tranparent;color:#c5c8c6;font-family:var(--font-code);font-size:.9rem;line-height:1.1rem}.ysink_stain_badge{width:1.5rem;height:1.5rem;margin-right:.5rem;border-radius:50%}.ysink_stain_badge.ysink_stain_bd{padding:.25rem;background:#040405}.ysink_stain_badge.ysink_stain_cc{padding:.1rem;background:#f8f8f8;background:#7289DA}.ysink_stain_nosplash{display:flex;flex-direction:column;align-items:center;margin-top:15rem;gap:.5rem}.ysink_stain_nosplash h2{margin-bottom:0}.ysink_stain_nosplash>*{flex:0}.ysink_stain_nosplash .ysink_stain_button{margin-top:2rem}.ysink_stain_modal .ysink_stain_row{display:flex}.ysink_stain_modal .ysink_stain_row>*{flex:1}.ysink_stain_modal .ysink_stain_row>:last-child{flex:unset;margin-left:1rem}"),Gs=()=>{const t=ie.injectCSS(A.default.persist.ghost.quickCSS);return A.default.reloadCSS=()=>t(A.default.persist.ghost.quickCSS),()=>{t(),A.default.reloadCSS=void 0,delete A.default.reloadCSS}};const kt=async()=>{me.log("|| CUMSTAIN || Started periodic theme update check");const e=(await Promise.all(w.persist.ghost.repos.map(oe))).flatMap(s=>s.themes);for(let s=0;s<w.persist.ghost.themes.length;s++){const r=w.persist.ghost.themes[s],n=e.find(l=>l.id===r.id);if(n)w.persist.ghost.themes[s]=n;else{const l=await Se(r.url).catch(()=>{});l&&(w.persist.ghost.themes[s]=l)}w.persist.store.themes[s].enabled=r.enabled,r.enabled&&w.state.ghost.unpatchCache.get(r.id)?.(w.persist.ghost.themes[s].CSS),me.log(`|| CUMSTAIN || Updated theme ${w.persist.ghost.themes[s].name}`)}me.log("|| CUMSTAIN || Completed periodic theme update check")};var Vs=()=>{setTimeout(kt,10);const t=setInterval(kt,6e5);return()=>clearInterval(t)};const Oe=k.findByDisplayName("Text");var qs=()=>ie.after("default",k.findByDisplayName("ClientDebugInfo",!1),(t,e)=>(e.props.children.push(u.React.createElement(Oe,{color:Oe.Colors.MUTED,tag:"span",size:Oe.Sizes.SIZE_12},["cumstain"," ","pre0.1"," "])),e)),Qs=({persist:t})=>{let e=[];return Array.isArray(t.ghost.repos)||(t.store.repos=[]),{onLoad:async()=>{e.push(qs(),Ys(),It(),At(),Gs(),Ws(),Vs())},onUnload:()=>e.reduceRight((s,r)=>r?.(),null)}};return Qs})(cumcord.pluginData,cumcord.patcher,cumcord.modules.internal.nests,cumcord.modules.webpack,cumcord.ui.components,cumcord.utils,cumcord.ui.toasts,cumcord.modules.common,cumcord.modules.common.React,cumcord.utils.logger);
