(function(We,w,ke,ht,dt,xe,oe,He,sr,re,Ye,ft,mt){"use strict";function ar(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function ir(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var u=ir(dt),N=ar(sr);const or=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,cr=/^\\@/;function lr(e){try{return JSON.parse(e)}catch{}}function ur(e){const t=e.split(`
`)[0],r=t.substring(t.lastIndexOf("//META")+6,t.lastIndexOf("*//")),n=lr(r);if(!n)throw new Error("META could not be parsed.");if(!n.name)throw new Error("META missing name data.");return n}function hr(e){const t=e.split("/**",2)[1].split("*/",1)[0],r={};let n="",s="";for(const a of t.split(or))if(a.length!==0)if(a.charAt(0)==="@"&&a.charAt(1)!==" "){n!==""&&(r[n]=s);const o=a.indexOf(" ");n=a.substr(1,o-1),s=a.substr(o+1)}else s+=` ${a.replace("\\n",`
`).replace(cr,"@")}`;return r[n]=s.trim(),r}var dr=e=>{const t=e.split(`
`)[0];if(t.includes("//META"))return ur(e);if(t.includes("/**"))return hr(e);throw new Error("META was not found.")};const Ge={},ce={};async function Ve(e){return Ge[e]||(ce[e]||(ce[e]=[fetch(e).then(async t=>{Ge[e]=[t.status,t.status===200?await t.text():void 0]}),0]),ce[e][1]++,await ce[e][0],ce[e][1]--,ce[e][1]===0&&delete ce[e]),Ge[e]}async function gt(e){const[t,r]=await Ve(e);return[t,r?JSON.parse(r):void 0]}async function fr(e,t){const r=new URL(e,t).href,[n,s]=await Ve(r);if(n!==200)throw new Error(`BD theme existed in cache with non-200 status ${n}`);return{url:r,CSS:()=>Promise.resolve(s),compat:!0,repoUrl:t,...dr(s)}}async function mr(e,t){const r=new URL(e,t).href;let n=new URL(e,t).pathname.split("/");n.splice(n.length-1,1,"cumcord_theme.json");const s=new URL(n.join("/"),new URL(e,t).origin).href,[a,o]=await gt(s);if(a!==200)throw new Error(`CC manifest existed in cache with non-200 status ${a}`);return{url:r,compat:!1,...o,repoUrl:t,CSS:async()=>{const[i,d]=await Ve(r);if(i!==200)throw new Error(`CC CSS existed in cache with non-200 status ${i}`);return d}}}var ye=async(e,t)=>{try{return await mr(e,t)}catch(r){try{return await fr(e,t)}catch(n){console.error(r,n);let s=new Error("Failed to fetch theme - both CC and BD either failed to fetch or failed to parse");throw s.e1=r,s.e2=n,s}}};const _e=new Map;async function Ce(e){if(!e?.url||!await e.CSS())throw new Error("theme was missing either id or css.");const t=ke.injectCSS(await e.CSS());_e.set(e.url,t);const r=w.persist.ghost.themes.findIndex(s=>s.url===e.url);let n={...e};delete n.CSS,n.enabled=!0,r===-1?w.persist.ghost.themes.push(n):w.persist.ghost.themes[r]=n,w.persist.store.themes=w.persist.ghost.themes}function qe(e){if(!e?.url)throw new Error("theme was missing id.");_e.get(e.url)?.(),_e.delete(e.url);const t=w.persist.ghost.themes.findIndex(n=>n.url===e.url);let r={...e};r.enabled=!1,t===-1?w.persist.ghost.themes.push(r):w.persist.ghost.themes[t]=r,w.persist.store.themes=w.persist.ghost.themes}function pt(e){try{qe(e)}catch(t){if(t.message!=="theme was not loaded.")throw t}w.persist.store.themes=w.persist.ghost.themes.filter(t=>t.url!==e.url)}async function gr(e){_e.get(e.url)?.(await e.CSS());let t={...e};t.enabled=!0;const r=w.persist.ghost.themes.findIndex(n=>n.url===e.url);r!==-1&&(w.persist.ghost.themes[r]=t,w.persist.store.themes=w.persist.ghost.themes)}function pr(){_e.forEach(e=>e?.()),_e.clear()}var vr=()=>{let e=!1;return w.persist.ghost.themes&&w.persist.ghost.themes.filter(t=>t.enabled).forEach(t=>ye(t.url,t.repoUrl).then(r=>e||Ce(r))),()=>{pr(),e=!0}};const vt=(e,t)=>()=>u.createElement("img",{src:e,className:`ysink_stain_badge ysink_stain_${t}`}),yr=vt("https://betterdiscord.app/resources/branding/logo_small.svg","bd"),_r=vt("https://raw.githubusercontent.com/Cumcord/assets/main/logo/filled.svg","cc"),[yt,Re,Je,le,Er,br,wr,Sr,_t,Et,bt,{thin:kr},$e,{openModal:xr}]=ht.batchFind(({findByProps:e,findByDisplayName:t})=>{t("FormTitle"),t("FormText"),t("FormSection"),e("BorderColors"),t("Switch"),e("BadgeShapes"),t("Flex"),t("Select",!1),t("TextInput"),t("SmallMediaCarousel"),t("SearchBar"),e("scrollerBase","thin"),e("ModalCloseButton"),e("openModalLazy")});var Cr=({media:e})=>u.createElement("div",{class:"ysink_stain_carousel"},e?u.createElement(Et,{items:(typeof e=="string"?[e]:e).map(t=>({type:1,src:t})),autoplayInterval:5e3}):u.createElement("div",{className:"ysink_stain_noimg"},u.createElement(Re,{className:"ysink_stain_noimgtxt"},"No Image"),u.createElement(Et,{items:[{type:1,src:""}]})));const Mr=({e,media:t})=>u.createElement(oe.ErrorBoundary,null,u.createElement($e.ModalRoot,{transitionState:e.transitionState,size:"large"},u.createElement($e.ModalHeader,{separator:!1},u.createElement("div",{style:{flex:1}}),u.createElement($e.ModalCloseButton,{onClick:e.onClose})),u.createElement($e.ModalContent,null,u.createElement("div",{style:{marginBottom:"1rem"}},u.createElement(Cr,{media:t})))));var Ar=e=>xr(t=>u.createElement(Mr,{e:t,media:e}));const Ir=({onClick:e})=>u.createElement("svg",{onClick:e,className:"ysink_stain_delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},u.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),u.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),u.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}));function wt(e){for(const t of w.persist.ghost.themes)if(t.url===e&&t.enabled)return!0;return!1}const Or=e=>w.persist.ghost.themes.some(t=>t.url===e);var St=({theme:e,deleteHook:t,gap:r})=>(xe.useNest(w.persist,!1,(n,{path:s})=>s[0]==="themes"),u.createElement("div",{className:"ysink_stain_card ysink_stain_tcard",style:{marginBottom:r}},u.createElement("div",{className:"ysink_stain_tmedia",style:{backgroundImage:e.media&&`url(${Array.isArray(e.media)?e.media[0]:e.media})`},onClick:()=>e.media&&Ar(e.media)},e.media?u.createElement("div",{className:"ysink_stain_tview"},"VIEW MEDIA"):u.createElement("div",null,"NO MEDIA")),u.createElement("div",{className:"ysink_stain_title"},e.compat?u.createElement(yr,null):u.createElement(_r,null),e.name),u.createElement("div",{className:"ysink_stain_tdesc"},e.description),u.createElement("div",{className:"ysink_stain_tacts"},Or(e.url)?u.createElement(Ir,{onClick:()=>{pt(e),t?.()}}):[],u.createElement(Er,{checked:wt(e.url),onChange:async()=>wt(e.url)?qe(e):Ce(await ye(e.url))})),u.createElement("div",{className:"ysink_stain_taulic"},e.author?`by ${e.author} `:"",e.license?`under ${e.license}`:""))),Tr=()=>{xe.useNest(w.persist);let[e,t]=u.useState("");return u.createElement(oe.ErrorBoundary,null,u.createElement("div",{className:"ysink_stain_row"},u.createElement(_t,{className:"ysink_stain_input",placeholder:"Theme import URL",type:"text",value:e,onChange:r=>t(r)}),u.createElement(le,{className:"ysink_stain_button",onClick:()=>{ye(e).then(async r=>{await Ce(r),He.showToast({title:`Loaded theme ${r.name}`,duration:5e3}),t("")},()=>He.showToast({title:"Failed to fetch theme - check URL",duration:5e3}))}},"Install")))};function Z(e){return Array.isArray?Array.isArray(e):Ct(e)==="[object Array]"}const Rr=1/0;function $r(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Rr?"-0":t}function Nr(e){return e==null?"":$r(e)}function J(e){return typeof e=="string"}function kt(e){return typeof e=="number"}function Lr(e){return e===!0||e===!1||zr(e)&&Ct(e)=="[object Boolean]"}function xt(e){return typeof e=="object"}function zr(e){return xt(e)&&e!==null}function W(e){return e!=null}function De(e){return!e.trim().length}function Ct(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const As="Extended search is not available",Pr="Incorrect 'index' type",Fr=e=>`Invalid value for key ${e}`,Kr=e=>`Pattern length exceeds max of ${e}.`,Br=e=>`Missing ${e} property in key`,jr=e=>`Property 'weight' in key '${e}' must be a positive integer`,Mt=Object.prototype.hasOwnProperty;class Ur{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let s=At(n);r+=s.weight,this._keys.push(s),this._keyMap[s.id]=s,r+=s.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function At(e){let t=null,r=null,n=null,s=1,a=null;if(J(e)||Z(e))n=e,t=It(e),r=Qe(e);else{if(!Mt.call(e,"name"))throw new Error(Br("name"));const o=e.name;if(n=o,Mt.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(jr(o));t=It(o),r=Qe(o),a=e.getFn}return{path:t,id:r,weight:s,src:n,getFn:a}}function It(e){return Z(e)?e:e.split(".")}function Qe(e){return Z(e)?e.join("."):e}function Wr(e,t){let r=[],n=!1;const s=(a,o,i)=>{if(!!W(a))if(!o[i])r.push(a);else{let d=o[i];const g=a[d];if(!W(g))return;if(i===o.length-1&&(J(g)||kt(g)||Lr(g)))r.push(Nr(g));else if(Z(g)){n=!0;for(let h=0,v=g.length;h<v;h+=1)s(g[h],o,i+1)}else o.length&&s(g,o,i+1)}};return s(e,J(t)?t.split("."):t,0),n?r:r[0]}var k={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:Wr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const Hr=/[^ ]+/g;function Yr(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(s){const a=s.match(Hr).length;if(r.has(a))return r.get(a);const o=1/Math.pow(a,.5*e),i=parseFloat(Math.round(o*n)/n);return r.set(a,i),i},clear(){r.clear()}}}class Xe{constructor({getFn:t=k.getFn,fieldNormWeight:r=k.fieldNormWeight}={}){this.norm=Yr(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,J(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();J(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!W(t)||De(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((s,a)=>{let o=s.getFn?s.getFn(t):this.getFn(t,s.path);if(!!W(o)){if(Z(o)){let i=[];const d=[{nestedArrIndex:-1,value:o}];for(;d.length;){const{nestedArrIndex:g,value:h}=d.pop();if(!!W(h))if(J(h)&&!De(h)){let v={v:h,i:g,n:this.norm.get(h)};i.push(v)}else Z(h)&&h.forEach((v,E)=>{d.push({nestedArrIndex:E,value:v})})}n.$[a]=i}else if(J(o)&&!De(o)){let i={v:o,n:this.norm.get(o)};n.$[a]=i}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ot(e,t,{getFn:r=k.getFn,fieldNormWeight:n=k.fieldNormWeight}={}){const s=new Xe({getFn:r,fieldNormWeight:n});return s.setKeys(e.map(At)),s.setSources(t),s.create(),s}function Gr(e,{getFn:t=k.getFn,fieldNormWeight:r=k.fieldNormWeight}={}){const{keys:n,records:s}=e,a=new Xe({getFn:t,fieldNormWeight:r});return a.setKeys(n),a.setIndexRecords(s),a}function Ne(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:s=k.distance,ignoreLocation:a=k.ignoreLocation}={}){const o=t/e.length;if(a)return o;const i=Math.abs(n-r);return s?o+i/s:i?1:o}function Vr(e=[],t=k.minMatchCharLength){let r=[],n=-1,s=-1,a=0;for(let o=e.length;a<o;a+=1){let i=e[a];i&&n===-1?n=a:!i&&n!==-1&&(s=a-1,s-n+1>=t&&r.push([n,s]),n=-1)}return e[a-1]&&a-n>=t&&r.push([n,a-1]),r}const ue=32;function qr(e,t,r,{location:n=k.location,distance:s=k.distance,threshold:a=k.threshold,findAllMatches:o=k.findAllMatches,minMatchCharLength:i=k.minMatchCharLength,includeMatches:d=k.includeMatches,ignoreLocation:g=k.ignoreLocation}={}){if(t.length>ue)throw new Error(Kr(ue));const h=t.length,v=e.length,E=Math.max(0,Math.min(n,v));let S=a,M=E;const I=i>1||d,L=I?Array(v):[];let O;for(;(O=e.indexOf(t,M))>-1;){let y=Ne(t,{currentLocation:O,expectedLocation:E,distance:s,ignoreLocation:g});if(S=Math.min(y,S),M=O+h,I){let x=0;for(;x<h;)L[O+x]=1,x+=1}}M=-1;let l=[],c=1,f=h+v;const m=1<<h-1;for(let y=0;y<h;y+=1){let x=0,b=f;for(;x<b;)Ne(t,{errors:y,currentLocation:E+b,expectedLocation:E,distance:s,ignoreLocation:g})<=S?x=b:f=b,b=Math.floor((f-x)/2+x);f=b;let A=Math.max(1,E-b+1),C=o?v:Math.min(E+b,v)+h,T=Array(C+2);T[C+1]=(1<<y)-1;for(let P=C;P>=A;P-=1){let q=P-1,be=r[e.charAt(q)];if(I&&(L[q]=+!!be),T[P]=(T[P+1]<<1|1)&be,y&&(T[P]|=(l[P+1]|l[P])<<1|1|l[P+1]),T[P]&m&&(c=Ne(t,{errors:y,currentLocation:q,expectedLocation:E,distance:s,ignoreLocation:g}),c<=S)){if(S=c,M=q,M<=E)break;A=Math.max(1,2*E-M)}}if(Ne(t,{errors:y+1,currentLocation:E,expectedLocation:E,distance:s,ignoreLocation:g})>S)break;l=T}const p={isMatch:M>=0,score:Math.max(.001,c)};if(I){const y=Vr(L,i);y.length?d&&(p.indices=y):p.isMatch=!1}return p}function Jr(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const s=e.charAt(r);t[s]=(t[s]||0)|1<<n-r-1}return t}class Tt{constructor(t,{location:r=k.location,threshold:n=k.threshold,distance:s=k.distance,includeMatches:a=k.includeMatches,findAllMatches:o=k.findAllMatches,minMatchCharLength:i=k.minMatchCharLength,isCaseSensitive:d=k.isCaseSensitive,ignoreLocation:g=k.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:s,includeMatches:a,findAllMatches:o,minMatchCharLength:i,isCaseSensitive:d,ignoreLocation:g},this.pattern=d?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(E,S)=>{this.chunks.push({pattern:E,alphabet:Jr(E),startIndex:S})},v=this.pattern.length;if(v>ue){let E=0;const S=v%ue,M=v-S;for(;E<M;)h(this.pattern.substr(E,ue),E),E+=ue;if(S){const I=v-ue;h(this.pattern.substr(I),I)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let M={isMatch:!0,score:0};return n&&(M.indices=[[0,t.length-1]]),M}const{location:s,distance:a,threshold:o,findAllMatches:i,minMatchCharLength:d,ignoreLocation:g}=this.options;let h=[],v=0,E=!1;this.chunks.forEach(({pattern:M,alphabet:I,startIndex:L})=>{const{isMatch:O,score:l,indices:c}=qr(t,M,I,{location:s+L,distance:a,threshold:o,findAllMatches:i,minMatchCharLength:d,includeMatches:n,ignoreLocation:g});O&&(E=!0),v+=l,O&&c&&(h=[...h,...c])});let S={isMatch:E,score:E?v/this.chunks.length:1};return E&&n&&(S.indices=h),S}}class ne{constructor(t){this.pattern=t}static isMultiMatch(t){return Rt(t,this.multiRegex)}static isSingleMatch(t){return Rt(t,this.singleRegex)}search(){}}function Rt(e,t){const r=e.match(t);return r?r[1]:null}class Dr extends ne{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Qr extends ne{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Xr extends ne{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Zr extends ne{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class en extends ne{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class tn extends ne{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class $t extends ne{constructor(t,{location:r=k.location,threshold:n=k.threshold,distance:s=k.distance,includeMatches:a=k.includeMatches,findAllMatches:o=k.findAllMatches,minMatchCharLength:i=k.minMatchCharLength,isCaseSensitive:d=k.isCaseSensitive,ignoreLocation:g=k.ignoreLocation}={}){super(t);this._bitapSearch=new Tt(t,{location:r,threshold:n,distance:s,includeMatches:a,findAllMatches:o,minMatchCharLength:i,isCaseSensitive:d,ignoreLocation:g})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Nt extends ne{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const s=[],a=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+a,s.push([n,r-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const Ze=[Dr,Nt,Xr,Zr,tn,en,Qr,$t],Lt=Ze.length,rn=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,nn="|";function sn(e,t={}){return e.split(nn).map(r=>{let n=r.trim().split(rn).filter(a=>a&&!!a.trim()),s=[];for(let a=0,o=n.length;a<o;a+=1){const i=n[a];let d=!1,g=-1;for(;!d&&++g<Lt;){const h=Ze[g];let v=h.isMultiMatch(i);v&&(s.push(new h(v,t)),d=!0)}if(!d)for(g=-1;++g<Lt;){const h=Ze[g];let v=h.isSingleMatch(i);if(v){s.push(new h(v,t));break}}}return s})}const an=new Set([$t.type,Nt.type]);class on{constructor(t,{isCaseSensitive:r=k.isCaseSensitive,includeMatches:n=k.includeMatches,minMatchCharLength:s=k.minMatchCharLength,ignoreLocation:a=k.ignoreLocation,findAllMatches:o=k.findAllMatches,location:i=k.location,threshold:d=k.threshold,distance:g=k.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:s,findAllMatches:o,ignoreLocation:a,location:i,threshold:d,distance:g},this.pattern=r?t:t.toLowerCase(),this.query=sn(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let a=0,o=[],i=0;for(let d=0,g=r.length;d<g;d+=1){const h=r[d];o.length=0,a=0;for(let v=0,E=h.length;v<E;v+=1){const S=h[v],{isMatch:M,indices:I,score:L}=S.search(t);if(M){if(a+=1,i+=L,n){const O=S.constructor.type;an.has(O)?o=[...o,...I]:o.push(I)}}else{i=0,a=0,o.length=0;break}}if(a){let v={isMatch:!0,score:i/a};return n&&(v.indices=o),v}}return{isMatch:!1,score:1}}}const et=[];function cn(...e){et.push(...e)}function tt(e,t){for(let r=0,n=et.length;r<n;r+=1){let s=et[r];if(s.condition(e,t))return new s(e,t)}return new Tt(e,t)}const Le={AND:"$and",OR:"$or"},rt={PATH:"$path",PATTERN:"$val"},nt=e=>!!(e[Le.AND]||e[Le.OR]),ln=e=>!!e[rt.PATH],un=e=>!Z(e)&&xt(e)&&!nt(e),zt=e=>({[Le.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Pt(e,t,{auto:r=!0}={}){const n=s=>{let a=Object.keys(s);const o=ln(s);if(!o&&a.length>1&&!nt(s))return n(zt(s));if(un(s)){const d=o?s[rt.PATH]:a[0],g=o?s[rt.PATTERN]:s[d];if(!J(g))throw new Error(Fr(d));const h={keyId:Qe(d),pattern:g};return r&&(h.searcher=tt(g,t)),h}let i={children:[],operator:a[0]};return a.forEach(d=>{const g=s[d];Z(g)&&g.forEach(h=>{i.children.push(n(h))})}),i};return nt(e)||(e=zt(e)),n(e)}function hn(e,{ignoreFieldNorm:t=k.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:s,norm:a,score:o})=>{const i=s?s.weight:null;n*=Math.pow(o===0&&i?Number.EPSILON:o,(i||1)*(t?1:a))}),r.score=n})}function dn(e,t){const r=e.matches;t.matches=[],!!W(r)&&r.forEach(n=>{if(!W(n.indices)||!n.indices.length)return;const{indices:s,value:a}=n;let o={indices:s,value:a};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),t.matches.push(o)})}function fn(e,t){t.score=e.score}function mn(e,t,{includeMatches:r=k.includeMatches,includeScore:n=k.includeScore}={}){const s=[];return r&&s.push(dn),n&&s.push(fn),e.map(a=>{const{idx:o}=a,i={item:t[o],refIndex:o};return s.length&&s.forEach(d=>{d(a,i)}),i})}class Ee{constructor(t,r={},n){this.options={...k,...r},this.options.useExtendedSearch,this._keyStore=new Ur(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Xe))throw new Error(Pr);this._myIndex=r||Ot(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){!W(t)||(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,s=this._docs.length;n<s;n+=1){const a=this._docs[n];t(a,n)&&(this.removeAt(n),n-=1,s-=1,r.push(a))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:a,sortFn:o,ignoreFieldNorm:i}=this.options;let d=J(t)?J(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return hn(d,{ignoreFieldNorm:i}),a&&d.sort(o),kt(r)&&r>-1&&(d=d.slice(0,r)),mn(d,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(t){const r=tt(t,this.options),{records:n}=this._myIndex,s=[];return n.forEach(({v:a,i:o,n:i})=>{if(!W(a))return;const{isMatch:d,score:g,indices:h}=r.searchIn(a);d&&s.push({item:a,idx:o,matches:[{score:g,value:a,norm:i,indices:h}]})}),s}_searchLogical(t){const r=Pt(t,this.options),n=(i,d,g)=>{if(!i.children){const{keyId:v,searcher:E}=i,S=this._findMatches({key:this._keyStore.get(v),value:this._myIndex.getValueForItemAtKeyId(d,v),searcher:E});return S&&S.length?[{idx:g,item:d,matches:S}]:[]}const h=[];for(let v=0,E=i.children.length;v<E;v+=1){const S=i.children[v],M=n(S,d,g);if(M.length)h.push(...M);else if(i.operator===Le.AND)return[]}return h},s=this._myIndex.records,a={},o=[];return s.forEach(({$:i,i:d})=>{if(W(i)){let g=n(r,i,d);g.length&&(a[d]||(a[d]={idx:d,item:i,matches:[]},o.push(a[d])),g.forEach(({matches:h})=>{a[d].matches.push(...h)}))}}),o}_searchObjectList(t){const r=tt(t,this.options),{keys:n,records:s}=this._myIndex,a=[];return s.forEach(({$:o,i})=>{if(!W(o))return;let d=[];n.forEach((g,h)=>{d.push(...this._findMatches({key:g,value:o[h],searcher:r}))}),d.length&&a.push({idx:i,item:o,matches:d})}),a}_findMatches({key:t,value:r,searcher:n}){if(!W(r))return[];let s=[];if(Z(r))r.forEach(({v:a,i:o,n:i})=>{if(!W(a))return;const{isMatch:d,score:g,indices:h}=n.searchIn(a);d&&s.push({score:g,key:t,value:a,idx:o,norm:i,indices:h})});else{const{v:a,n:o}=r,{isMatch:i,score:d,indices:g}=n.searchIn(a);i&&s.push({score:d,key:t,value:a,norm:o,indices:g})}return s}}Ee.version="6.6.2",Ee.createIndex=Ot,Ee.parseIndex=Gr,Ee.config=k,Ee.parseQuery=Pt,cn(on);const gn={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]};var Ft=(e,t)=>!t||t==""?e:new Ee(e,gn).search(t).map(r=>r.item),Kt=({query:e,onChange:t})=>u.createElement(bt,{className:"ysink_stain_searchbar",query:e,onQueryChange:t,placeholder:"Search themes...",size:bt.Sizes.MEDIUM}),Bt=({filterMode:e,setFilterMode:t})=>u.createElement(Sr.SingleSelect,{options:[{value:0,label:"Show All"},{value:1,label:"CC Only"},{value:2,label:"BD Only"}],value:e,onChange:t,isDisabled:!1,className:"ysink_stain_dropdown"});const jt=({title:e,subtitle:t,onClick:r,btnText:n})=>u.createElement(Je,{className:"ysink_stain_nosplash"},u.createElement(yt,{tag:"h2"},e),u.createElement(Re,null,t),u.createElement(le,{className:"ysink_stain_button",color:le.Colors.GREEN,sizes:le.Sizes.LARGE,onClick:r},n)),pn=({goToRepos:e})=>u.createElement(jt,{title:"No Repos",subtitle:"Add one in the repo manager!",onClick:e,btnText:"Open repo manager"}),vn=({goToStore:e})=>u.createElement(jt,{title:"No Themes",subtitle:"Paste a link in above, or head over to the store",onClick:e,btnText:"Get some themes"});var Ut=()=>{const[e,t]=dt.useState(0);return()=>t(-e)},yn=({goTo:e})=>{xe.useNest(w.persist,!1,(o,{path:i})=>i[0]==="themes");const[t,r]=u.useState("");let[n,s]=u.useState(0);const a=Ut();return u.createElement(oe.ErrorBoundary,null,u.createElement(Tr,null),u.createElement("div",{className:"ysink_stain_search_row"},u.createElement(Kt,{query:t,onChange:r}),u.createElement(Bt,{filterMode:n,setFilterMode:s})),w.persist.ghost.themes.length===0?u.createElement(vn,{goToStore:()=>e(1)}):u.createElement("div",{className:"ysink_stain_cardcontainer"},Ft(w.persist.ghost.themes,t).filter(o=>n===0||n===1&&!o.compat||n===2&&o.compat).map(o=>u.createElement(St,{key:o.url,theme:o,deleteHook:a}))))},j=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Wt={},_n=j&&j.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n[a]=s[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=j&&j.__assign||function(){return F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},F.apply(this,arguments)},En=j&&j.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),bn=j&&j.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wn=j&&j.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&En(t,e,r);return bn(t,e),t},Sn=j&&j.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};Object.defineProperty(Wt,"__esModule",{value:!0});var Me=wn(N.default),kn=13,xn=9,Cn=8,Mn=89,ze=90,An=77,Ht=57,Yt=219,Gt=222,Vt=192,In=27,qt=100,On=3e3,Tn="navigator"in j&&/Win/i.test(navigator.platform),st="navigator"in j&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Pe="npm__react-simple-code-editor__textarea",Rn=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(Pe,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(Pe,` {
    color: transparent !important;
  }

  .`).concat(Pe,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),$n=function(e){_n(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={capture:!0},r._recordCurrentState=function(){var n=r._input;if(!!n){var s=n.value,a=n.selectionStart,o=n.selectionEnd;r._recordChange({value:s,selectionStart:a,selectionEnd:o})}},r._getLines=function(n,s){return n.substring(0,s).split(`
`)},r._recordChange=function(n,s){var a,o,i;s===void 0&&(s=!1);var d=r._history,g=d.stack,h=d.offset;if(g.length&&h>-1){r._history.stack=g.slice(0,h+1);var v=r._history.stack.length;if(v>qt){var E=v-qt;r._history.stack=g.slice(E,v),r._history.offset=Math.max(r._history.offset-E,0)}}var S=Date.now();if(s){var M=r._history.stack[r._history.offset];if(M&&S-M.timestamp<On){var I=/[^a-z0-9]([a-z0-9]+)$/i,L=(a=r._getLines(M.value,M.selectionStart).pop())===null||a===void 0?void 0:a.match(I),O=(o=r._getLines(n.value,n.selectionStart).pop())===null||o===void 0?void 0:o.match(I);if((L==null?void 0:L[1])&&((i=O==null?void 0:O[1])===null||i===void 0?void 0:i.startsWith(L[1]))){r._history.stack[r._history.offset]=F(F({},n),{timestamp:S});return}}}r._history.stack.push(F(F({},n),{timestamp:S})),r._history.offset++},r._updateInput=function(n){var s=r._input;!s||(s.value=n.value,s.selectionStart=n.selectionStart,s.selectionEnd=n.selectionEnd,r.props.onValueChange(n.value))},r._applyEdits=function(n){var s=r._input,a=r._history.stack[r._history.offset];a&&s&&(r._history.stack[r._history.offset]=F(F({},a),{selectionStart:s.selectionStart,selectionEnd:s.selectionEnd})),r._recordChange(n),r._updateInput(n)},r._undoEdit=function(){var n=r._history,s=n.stack,a=n.offset,o=s[a-1];o&&(r._updateInput(o),r._history.offset=Math.max(a-1,0))},r._redoEdit=function(){var n=r._history,s=n.stack,a=n.offset,o=s[a+1];o&&(r._updateInput(o),r._history.offset=Math.min(a+1,s.length-1))},r._handleKeyDown=function(n){var s=r.props,a=s.tabSize,o=s.insertSpaces,i=s.ignoreTabKey,d=s.onKeyDown;if(!(d&&(d(n),n.defaultPrevented))){n.keyCode===In&&n.currentTarget.blur();var g=n.currentTarget,h=g.value,v=g.selectionStart,E=g.selectionEnd,S=(o?" ":"	").repeat(a);if(n.keyCode===xn&&!i&&r.state.capture)if(n.preventDefault(),n.shiftKey){var M=r._getLines(h,v),I=M.length-1,L=r._getLines(h,E).length-1,O=h.split(`
`).map(function(T,ae){return ae>=I&&ae<=L&&T.startsWith(S)?T.substring(S.length):T}).join(`
`);if(h!==O){var l=M[I];r._applyEdits({value:O,selectionStart:(l==null?void 0:l.startsWith(S))?v-S.length:v,selectionEnd:E-(h.length-O.length)})}}else if(v!==E){var M=r._getLines(h,v),c=M.length-1,f=r._getLines(h,E).length-1,l=M[c];r._applyEdits({value:h.split(`
`).map(function(P,q){return q>=c&&q<=f?S+P:P}).join(`
`),selectionStart:l&&/\S/.test(l)?v+S.length:v,selectionEnd:E+S.length*(f-c+1)})}else{var m=v+S.length;r._applyEdits({value:h.substring(0,v)+S+h.substring(E),selectionStart:m,selectionEnd:m})}else if(n.keyCode===Cn){var p=v!==E,y=h.substring(0,v);if(y.endsWith(S)&&!p){n.preventDefault();var m=v-S.length;r._applyEdits({value:h.substring(0,v-S.length)+h.substring(E),selectionStart:m,selectionEnd:m})}}else if(n.keyCode===kn){if(v===E){var x=r._getLines(h,v).pop(),b=x==null?void 0:x.match(/^\s+/);if(b==null?void 0:b[0]){n.preventDefault();var A=`
`+b[0],m=v+A.length;r._applyEdits({value:h.substring(0,v)+A+h.substring(E),selectionStart:m,selectionEnd:m})}}}else if(n.keyCode===Ht||n.keyCode===Yt||n.keyCode===Gt||n.keyCode===Vt){var C=void 0;n.keyCode===Ht&&n.shiftKey?C=["(",")"]:n.keyCode===Yt?n.shiftKey?C=["{","}"]:C=["[","]"]:n.keyCode===Gt?n.shiftKey?C=['"','"']:C=["'","'"]:n.keyCode===Vt&&!n.shiftKey&&(C=["`","`"]),v!==E&&C&&(n.preventDefault(),r._applyEdits({value:h.substring(0,v)+C[0]+h.substring(v,E)+C[1]+h.substring(E),selectionStart:v,selectionEnd:E+2}))}else(st?n.metaKey&&n.keyCode===ze:n.ctrlKey&&n.keyCode===ze)&&!n.shiftKey&&!n.altKey?(n.preventDefault(),r._undoEdit()):(st?n.metaKey&&n.keyCode===ze&&n.shiftKey:Tn?n.ctrlKey&&n.keyCode===Mn:n.ctrlKey&&n.keyCode===ze&&n.shiftKey)&&!n.altKey?(n.preventDefault(),r._redoEdit()):n.keyCode===An&&n.ctrlKey&&(st?n.shiftKey:!0)&&(n.preventDefault(),r.setState(function(T){return{capture:!T.capture}}))}},r._handleChange=function(n){var s=n.currentTarget,a=s.value,o=s.selectionStart,i=s.selectionEnd;r._recordChange({value:a,selectionStart:o,selectionEnd:i},!0),r.props.onValueChange(a)},r._history={stack:[],offset:-1},r._input=null,r}return t.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(t.prototype,"session",{get:function(){return{history:this._history}},set:function(r){this._history=r.history},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this,n=this.props,s=n.value,a=n.style,o=n.padding,i=n.highlight,d=n.textareaId,g=n.textareaClassName,h=n.autoFocus,v=n.disabled,E=n.form,S=n.maxLength,M=n.minLength,I=n.name,L=n.placeholder,O=n.readOnly,l=n.required,c=n.onClick,f=n.onFocus,m=n.onBlur,p=n.onKeyUp;n.onKeyDown,n.onValueChange,n.tabSize,n.insertSpaces,n.ignoreTabKey;var y=n.preClassName,x=Sn(n,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),b={paddingTop:o,paddingRight:o,paddingBottom:o,paddingLeft:o},A=i(s);return Me.createElement("div",F({},x,{style:F(F({},Ae.container),a)}),Me.createElement("textarea",{ref:function(C){return r._input=C},style:F(F(F({},Ae.editor),Ae.textarea),b),className:Pe+(g?" ".concat(g):""),id:d,value:s,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:c,onKeyUp:p,onFocus:f,onBlur:m,disabled:v,form:E,maxLength:S,minLength:M,name:I,placeholder:L,readOnly:O,required:l,autoFocus:h,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Me.createElement("pre",F({className:y,"aria-hidden":"true",style:F(F(F({},Ae.editor),Ae.highlight),b)},typeof A=="string"?{dangerouslySetInnerHTML:{__html:A+"<br />"}}:{children:A})),Me.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:Rn}}))},t.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},t}(Me.Component),Nn=Wt.default=$n,Ae={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},at={exports:{}};(function(e){var t=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,o={},i={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function l(c){return c instanceof d?new d(c.type,l(c.content),c.alias):Array.isArray(c)?c.map(l):c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++a}),l.__id},clone:function l(c,f){f=f||{};var m,p;switch(i.util.type(c)){case"Object":if(p=i.util.objId(c),f[p])return f[p];m={},f[p]=m;for(var y in c)c.hasOwnProperty(y)&&(m[y]=l(c[y],f));return m;case"Array":return p=i.util.objId(c),f[p]?f[p]:(m=[],f[p]=m,c.forEach(function(x,b){m[b]=l(x,f)}),m);default:return c}},getLanguage:function(l){for(;l;){var c=s.exec(l.className);if(c)return c[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,c){l.className=l.className.replace(RegExp(s,"gi"),""),l.classList.add("language-"+c)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(m){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(m.stack)||[])[1];if(l){var c=document.getElementsByTagName("script");for(var f in c)if(c[f].src==l)return c[f]}return null}},isActive:function(l,c,f){for(var m="no-"+c;l;){var p=l.classList;if(p.contains(c))return!0;if(p.contains(m))return!1;l=l.parentElement}return!!f}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(l,c){var f=i.util.clone(i.languages[l]);for(var m in c)f[m]=c[m];return f},insertBefore:function(l,c,f,m){m=m||i.languages;var p=m[l],y={};for(var x in p)if(p.hasOwnProperty(x)){if(x==c)for(var b in f)f.hasOwnProperty(b)&&(y[b]=f[b]);f.hasOwnProperty(x)||(y[x]=p[x])}var A=m[l];return m[l]=y,i.languages.DFS(i.languages,function(C,T){T===A&&C!=l&&(this[C]=y)}),y},DFS:function l(c,f,m,p){p=p||{};var y=i.util.objId;for(var x in c)if(c.hasOwnProperty(x)){f.call(c,x,c[x],m||x);var b=c[x],A=i.util.type(b);A==="Object"&&!p[y(b)]?(p[y(b)]=!0,l(b,f,null,p)):A==="Array"&&!p[y(b)]&&(p[y(b)]=!0,l(b,f,x,p))}}},plugins:{},highlightAll:function(l,c){i.highlightAllUnder(document,l,c)},highlightAllUnder:function(l,c,f){var m={callback:f,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",m),m.elements=Array.prototype.slice.apply(m.container.querySelectorAll(m.selector)),i.hooks.run("before-all-elements-highlight",m);for(var p=0,y;y=m.elements[p++];)i.highlightElement(y,c===!0,m.callback)},highlightElement:function(l,c,f){var m=i.util.getLanguage(l),p=i.languages[m];i.util.setLanguage(l,m);var y=l.parentElement;y&&y.nodeName.toLowerCase()==="pre"&&i.util.setLanguage(y,m);var x=l.textContent,b={element:l,language:m,grammar:p,code:x};function A(T){b.highlightedCode=T,i.hooks.run("before-insert",b),b.element.innerHTML=b.highlightedCode,i.hooks.run("after-highlight",b),i.hooks.run("complete",b),f&&f.call(b.element)}if(i.hooks.run("before-sanity-check",b),y=b.element.parentElement,y&&y.nodeName.toLowerCase()==="pre"&&!y.hasAttribute("tabindex")&&y.setAttribute("tabindex","0"),!b.code){i.hooks.run("complete",b),f&&f.call(b.element);return}if(i.hooks.run("before-highlight",b),!b.grammar){A(i.util.encode(b.code));return}if(c&&n.Worker){var C=new Worker(i.filename);C.onmessage=function(T){A(T.data)},C.postMessage(JSON.stringify({language:b.language,code:b.code,immediateClose:!0}))}else A(i.highlight(b.code,b.grammar,b.language))},highlight:function(l,c,f){var m={code:l,grammar:c,language:f};if(i.hooks.run("before-tokenize",m),!m.grammar)throw new Error('The language "'+m.language+'" has no grammar.');return m.tokens=i.tokenize(m.code,m.grammar),i.hooks.run("after-tokenize",m),d.stringify(i.util.encode(m.tokens),m.language)},tokenize:function(l,c){var f=c.rest;if(f){for(var m in f)c[m]=f[m];delete c.rest}var p=new v;return E(p,p.head,l),h(l,p,c,p.head,0),M(p)},hooks:{all:{},add:function(l,c){var f=i.hooks.all;f[l]=f[l]||[],f[l].push(c)},run:function(l,c){var f=i.hooks.all[l];if(!(!f||!f.length))for(var m=0,p;p=f[m++];)p(c)}},Token:d};n.Prism=i;function d(l,c,f,m){this.type=l,this.content=c,this.alias=f,this.length=(m||"").length|0}d.stringify=function l(c,f){if(typeof c=="string")return c;if(Array.isArray(c)){var m="";return c.forEach(function(A){m+=l(A,f)}),m}var p={type:c.type,content:l(c.content,f),tag:"span",classes:["token",c.type],attributes:{},language:f},y=c.alias;y&&(Array.isArray(y)?Array.prototype.push.apply(p.classes,y):p.classes.push(y)),i.hooks.run("wrap",p);var x="";for(var b in p.attributes)x+=" "+b+'="'+(p.attributes[b]||"").replace(/"/g,"&quot;")+'"';return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+x+">"+p.content+"</"+p.tag+">"};function g(l,c,f,m){l.lastIndex=c;var p=l.exec(f);if(p&&m&&p[1]){var y=p[1].length;p.index+=y,p[0]=p[0].slice(y)}return p}function h(l,c,f,m,p,y){for(var x in f)if(!(!f.hasOwnProperty(x)||!f[x])){var b=f[x];b=Array.isArray(b)?b:[b];for(var A=0;A<b.length;++A){if(y&&y.cause==x+","+A)return;var C=b[A],T=C.inside,ae=!!C.lookbehind,P=!!C.greedy,q=C.alias;if(P&&!C.pattern.global){var be=C.pattern.toString().match(/[imsuy]*$/)[0];C.pattern=RegExp(C.pattern.source,be+"g")}for(var Be=C.pattern||C,z=m.next,H=p;z!==c.tail&&!(y&&H>=y.reach);H+=z.value.length,z=z.next){var ee=z.value;if(c.length>l.length)return;if(!(ee instanceof d)){var fe=1,U;if(P){if(U=g(Be,H,l,ae),!U||U.index>=l.length)break;var me=U.index,it=U.index+U[0].length,Y=H;for(Y+=z.value.length;me>=Y;)z=z.next,Y+=z.value.length;if(Y-=z.value.length,H=Y,z.value instanceof d)continue;for(var G=z;G!==c.tail&&(Y<it||typeof G.value=="string");G=G.next)fe++,Y+=G.value.length;fe--,ee=l.slice(H,Y),U.index-=H}else if(U=g(Be,0,ee,ae),!U)continue;var me=U.index,D=U[0],ge=ee.slice(0,me),Oe=ee.slice(me+D.length),we=H+ee.length;y&&we>y.reach&&(y.reach=we);var pe=z.prev;ge&&(pe=E(c,pe,ge),H+=ge.length),S(c,pe,fe);var Te=new d(x,T?i.tokenize(D,T):D,q,D);if(z=E(c,pe,Te),Oe&&E(c,z,Oe),fe>1){var Se={cause:x+","+A,reach:we};h(l,c,f,z.prev,H,Se),y&&Se.reach>y.reach&&(y.reach=Se.reach)}}}}}}function v(){var l={value:null,prev:null,next:null},c={value:null,prev:l,next:null};l.next=c,this.head=l,this.tail=c,this.length=0}function E(l,c,f){var m=c.next,p={value:f,prev:c,next:m};return c.next=p,m.prev=p,l.length++,p}function S(l,c,f){for(var m=c.next,p=0;p<f&&m!==l.tail;p++)m=m.next;c.next=m,m.prev=c,l.length-=p}function M(l){for(var c=[],f=l.head.next;f!==l.tail;)c.push(f.value),f=f.next;return c}if(!n.document)return n.addEventListener&&(i.disableWorkerMessageHandler||n.addEventListener("message",function(l){var c=JSON.parse(l.data),f=c.language,m=c.code,p=c.immediateClose;n.postMessage(i.highlight(m,i.languages[f],f)),p&&n.close()},!1)),i;var I=i.util.currentScript();I&&(i.filename=I.src,I.hasAttribute("data-manual")&&(i.manual=!0));function L(){i.manual||i.highlightAll()}if(!i.manual){var O=document.readyState;O==="loading"||O==="interactive"&&I&&I.defer?document.addEventListener("DOMContentLoaded",L):window.requestAnimationFrame?window.requestAnimationFrame(L):window.setTimeout(L,16)}return i}(t);e.exports&&(e.exports=r),typeof j!="undefined"&&(j.Prism=r)})(at),function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(Prism);const Ln=e=>w.persist.store.quickCSS=e,zn=_.debounce(Ln,250);var Pn=()=>{const[e,t]=u.useState(w.persist.ghost.quickCSS);return u.createElement(oe.ErrorBoundary,null,u.createElement(Nn,{className:"ysink_stain_cssedit",value:e??"",onValueChange:r=>{t(r),zn(r)},highlight:r=>at.exports.highlight(r,at.exports.languages.css),padding:10}),u.createElement("link",{href:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@master/themes/prism-atom-dark.css",rel:"stylesheet"}))};async function Fn(e){const t=new URL("repo.json",e).href,[r,n]=await gt(t);if(r!==200)throw new Error(`Repo manifest existed in cache with non-200 status ${r}`);if(!n.themes||n.themes?.length===0)throw new Error("No themes found in repo");if(!n.meta)throw new Error("No repo metadata");if(!n?.meta.name)throw new Error("Repo did not have a name");return n}var Fe=async e=>{const t=await Fn(e),r=await Promise.all(t.themes.map(n=>ye(n,e)));return{manifest:t,themes:r}};const Jt=["https://cumcordthemes.github.io/Cumsock/"],Kn=Jt;var Bn=async()=>{Array.isArray(w.persist.ghost.repos)||(w.persist.ghost.repos=[]);for(const e of Jt)if(!w.persist.ghost.repos.find(t=>t.url===e.url)){try{await Fe(e)}catch{continue}w.persist.ghost.repos.push(e)}w.persist.set({path:["repos"],value:w.persist.ghost.repos})},jn=({repo:e})=>{const[t,r]=u.useState(void 0);return u.useEffect(async()=>{t||r(await Fe(e))}),u.createElement("div",{className:"ysink_stain_card ysink_stain_row"},u.createElement("div",null,u.createElement("div",{className:"ysink_stain_title"},t?.manifest.meta.name,Kn.includes(e)?u.createElement(br.TextBadge,{className:"ysink_stain_officialbadge",text:"official repo",color:"var(--info-positive-foreground)"}):[]),u.createElement(Re,null,e)),u.createElement(le,{color:le.Colors.RED,className:"ysink_stain_button",onClick:()=>w.persist.store.repos=w.persist.ghost.repos.filter(n=>n!=e)},"Remove Repo"))};async function Un(e){try{return await Fe(e),!0}catch{return!1}}async function Dt(e,t,r){return e.endsWith("/")||(e+="/"),w.persist.ghost.repos.includes(e)?(r("You already have this repo!"),!1):await Un(e)?(w.persist.ghost.repos.push(e),w.persist.set({path:["repos"]}),t("Added repo"),!0):(r("Repo was invalid"),!1)}const Wn=e=>w.persist.ghost.themes.some(t=>t.url===e);async function Hn(e,t,r){if(Wn(e))return r("Theme is already installed!");const n=await ye(e).catch(r);!n||Ce(n).then(t,r)}const Qt=e=>He.showToast({title:e,duration:5e3});var Yn=()=>{const[e,t]=u.useState("");return xe.useNest(w.persist),u.createElement(oe.ErrorBoundary,null,u.createElement(Je,null,u.createElement(wr,{basis:"auto",grow:1,shrink:1,className:"ysink_stain_row"},u.createElement(_t,{placeholder:"https://example.com/repo",type:"text",value:e,onChange:r=>t(r)}),u.createElement(le,{className:"ysink_stain_button",onClick:async()=>{await Dt(e,Qt,Qt)&&t("")}},"Add")),u.createElement("div",{className:"ysink_stain_divide"}),u.createElement("div",{className:"ysink_stain_cardcontainer"},w.persist.ghost.repos.map(r=>u.createElement(jn,{repo:r})))))};function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(this,arguments)}function Gn(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var Vn=["bottom","height","left","right","top","width"],qn=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),Vn.some(function(n){return t[n]!==r[n]})},se=new Map,Xt,Jn=function e(){var t=[];se.forEach(function(r,n){var s=n.getBoundingClientRect();qn(s,r.rect)&&(r.rect=s,t.push(r))}),t.forEach(function(r){r.callbacks.forEach(function(n){return n(r.rect)})}),Xt=window.requestAnimationFrame(e)};function Dn(e,t){return{observe:function(){var n=se.size===0;se.has(e)?se.get(e).callbacks.push(t):se.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&Jn()},unobserve:function(){var n=se.get(e);if(n){var s=n.callbacks.indexOf(t);s>=0&&n.callbacks.splice(s,1),n.callbacks.length||se.delete(e),se.size||cancelAnimationFrame(Xt)}}}}var Ke=typeof window!="undefined"?N.default.useLayoutEffect:N.default.useEffect;function Qn(e,t){t===void 0&&(t={width:0,height:0});var r=N.default.useState(e.current),n=r[0],s=r[1],a=N.default.useReducer(Xn,t),o=a[0],i=a[1],d=N.default.useRef(!1);return Ke(function(){e.current!==n&&s(e.current)}),Ke(function(){if(n&&!d.current){d.current=!0;var g=n.getBoundingClientRect();i({rect:g})}},[n]),N.default.useEffect(function(){if(!!n){var g=Dn(n,function(h){i({rect:h})});return g.observe(),function(){g.unobserve()}}},[n]),o}function Xn(e,t){var r=t.rect;return e.height!==r.height||e.width!==r.width?r:e}var Zn=function(){return 50},es=function(t){return t},ts=function(t,r){var n=r?"offsetWidth":"offsetHeight";return t[n]},rs=function(t){for(var r=Math.max(t.start-t.overscan,0),n=Math.min(t.end+t.overscan,t.size-1),s=[],a=r;a<=n;a++)s.push(a);return s};function ns(e){var t,r=e.size,n=r===void 0?0:r,s=e.estimateSize,a=s===void 0?Zn:s,o=e.overscan,i=o===void 0?1:o,d=e.paddingStart,g=d===void 0?0:d,h=e.paddingEnd,v=h===void 0?0:h,E=e.parentRef,S=e.horizontal,M=e.scrollToFn,I=e.useObserver,L=e.initialRect,O=e.onScrollElement,l=e.scrollOffsetFn,c=e.keyExtractor,f=c===void 0?es:c,m=e.measureSize,p=m===void 0?ts:m,y=e.rangeExtractor,x=y===void 0?rs:y,b=S?"width":"height",A=S?"scrollLeft":"scrollTop",C=N.default.useRef({scrollOffset:0,measurements:[]}),T=N.default.useState(0),ae=T[0],P=T[1];C.current.scrollOffset=ae;var q=I||Qn,be=q(E,L),Be=be[b];C.current.outerSize=Be;var z=N.default.useCallback(function(R){E.current&&(E.current[A]=R)},[E,A]),H=M||z;M=N.default.useCallback(function(R){H(R,z)},[z,H]);var ee=N.default.useState({}),fe=ee[0],U=ee[1],it=N.default.useCallback(function(){return U({})},[]),Y=N.default.useRef([]),G=N.default.useMemo(function(){var R=Y.current.length>0?Math.min.apply(Math,Y.current):0;Y.current=[];for(var B=C.current.measurements.slice(0,R),$=R;$<n;$++){var V=f($),K=fe[V],te=B[$-1]?B[$-1].end:g,Q=typeof K=="number"?K:a($),X=te+Q;B[$]={index:$,start:te,size:Q,end:X,key:V}}return B},[a,fe,g,n,f]),me=(((t=G[n-1])==null?void 0:t.end)||g)+v;C.current.measurements=G,C.current.totalSize=me;var D=O?O.current:E.current,ge=N.default.useRef(l);ge.current=l,Ke(function(){if(!D){P(0);return}var R=function($){var V=ge.current?ge.current($):D[A];P(V)};return R(),D.addEventListener("scroll",R,{capture:!1,passive:!0}),function(){D.removeEventListener("scroll",R)}},[D,A]);var Oe=as(C.current),we=Oe.start,pe=Oe.end,Te=N.default.useMemo(function(){return x({start:we,end:pe,overscan:i,size:G.length})},[we,pe,i,G.length,x]),Se=N.default.useRef(p);Se.current=p;var xs=N.default.useMemo(function(){for(var R=[],B=function(te,Q){var X=Te[te],je=G[X],ve=he(he({},je),{},{measureRef:function(Ue){if(Ue){var lt=Se.current(Ue,S);if(lt!==ve.size){var nr=C.current.scrollOffset;ve.start<nr&&z(nr+(lt-ve.size)),Y.current.push(X),U(function(Ms){var ut;return he(he({},Ms),{},(ut={},ut[ve.key]=lt,ut))})}}}});R.push(ve)},$=0,V=Te.length;$<V;$++)B($);return R},[Te,z,S,G]),rr=N.default.useRef(!1);Ke(function(){rr.current&&U({}),rr.current=!0},[a]);var ot=N.default.useCallback(function(R,B){var $=B===void 0?{}:B,V=$.align,K=V===void 0?"start":V,te=C.current,Q=te.scrollOffset,X=te.outerSize;K==="auto"&&(R<=Q?K="start":R>=Q+X?K="end":K="start"),K==="start"?M(R):K==="end"?M(R-X):K==="center"&&M(R-X/2)},[M]),ct=N.default.useCallback(function(R,B){var $=B===void 0?{}:B,V=$.align,K=V===void 0?"auto":V,te=Gn($,["align"]),Q=C.current,X=Q.measurements,je=Q.scrollOffset,ve=Q.outerSize,ie=X[Math.max(0,Math.min(R,n-1))];if(!!ie){if(K==="auto")if(ie.end>=je+ve)K="end";else if(ie.start<=je)K="start";else return;var Ue=K==="center"?ie.start+ie.size/2:K==="end"?ie.end:ie.start;ot(Ue,he({align:K},te))}},[ot,n]),Cs=N.default.useCallback(function(){for(var R=arguments.length,B=new Array(R),$=0;$<R;$++)B[$]=arguments[$];ct.apply(void 0,B),requestAnimationFrame(function(){ct.apply(void 0,B)})},[ct]);return{virtualItems:xs,totalSize:me,scrollToOffset:ot,scrollToIndex:Cs,measure:it}}var ss=function(t,r,n,s){for(;t<=r;){var a=(t+r)/2|0,o=n(a);if(o<s)t=a+1;else if(o>s)r=a-1;else return a}return t>0?t-1:0};function as(e){for(var t=e.measurements,r=e.outerSize,n=e.scrollOffset,s=t.length-1,a=function(g){return t[g].start},o=ss(0,s,a,n),i=o;i<s&&t[i].end<n+r;)i++;return{start:o,end:i}}var is=({items:e,children:t,keySel:r,height:n,className:s})=>{const a=u.useRef(),o=ns({parentRef:a,size:e.length,keyExtractor:i=>r(e[i])});return u.createElement("div",{ref:a,style:{overflow:"auto",height:n},className:s},u.createElement("div",{style:{height:o.totalSize,width:"100%",position:"relative"}},o.virtualItems.map(i=>u.createElement("div",{ref:i.measureRef,key:i.key,style:{position:"absolute",top:0,left:0,width:"100%",height:i.height,transform:`translateY(${i.start}px)`}},t(e[i.index])))))};const os=()=>Promise.all(w.persist.ghost.repos.map(Fe)),cs=async()=>(await os()).flatMap(e=>e.themes),ls=(e,t)=>Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((r,n)=>r===t[n]);var us=({goTo:e})=>{xe.useNest(w.persist,!1,(h,{path:v})=>v[0]==="repos");const[t,r]=u.useState(""),[n,s]=u.useState([]),[a,o]=u.useState(void 0),[i,d]=u.useState(0);u.useEffect(()=>{(!ls(n,w.persist.ghost.repos)||!a)&&(s(w.persist.ghost.repos),cs().then(o))});const g=Ut();return u.createElement(oe.ErrorBoundary,null,u.createElement("div",{className:"ysink_stain_search_row"},u.createElement(Kt,{query:t,onChange:r}),u.createElement(Bt,{filterMode:i,setFilterMode:d})),w.persist.ghost.repos.length===0?u.createElement(pn,{goToRepos:()=>e(2)}):u.createElement(is,{className:kr,height:"50rem",keySel:h=>h.url,items:Ft(_.uniqBy(a??[],h=>h.url),t).filter(h=>i===0||i===1&&!h.compat||i===2&&h.compat)},h=>u.createElement(St,{theme:h,deleteHook:g,gap:".5rem"})))},hs=({items:e})=>{let[t,r]=u.useState(0);return u.createElement("div",{className:"ysink_stain_tabbar_root"},u.createElement("div",{className:"ysink_stain_tabbar"},e.map((n,s)=>u.createElement("button",{className:"ysink_stain_button"+(s===t?" ysink_stain_selected":""),onClick:()=>r(s)},u.createElement(Re,null,n.text)))),u.createElement("div",{className:"ysink_stain_divide"}),u.createElement("div",{className:"ysink_stain_tabbar_content"},u.createElement(e[t].component,{goTo:r})))},ds=()=>u.createElement(oe.ErrorBoundary,null,u.createElement(Je,null,u.createElement(yt,{tag:"h1"},"Cumstain Settings"),u.createElement(hs,{items:[{text:"Installed",component:yn},{text:"Store",component:us},{text:"Repos",component:Yn},{text:"Quick CSS",component:Pn}]}))),fs=()=>ke.findAndPatch(()=>ht.findByDisplayName("SettingsView"),e=>ke.after("getPredicateSections",e.prototype,(t,r)=>{if(r[1]?.section!="My Account")return;let n=r.findIndex(s=>s.section=="CUMCORD_PLUGINS")+1;return r.splice(n,0,{section:"ysink_stain_CUMSTAIN",label:"Themes",element:ds}),r})),ms=()=>{const e=ke.injectCSS(w.persist.ghost.quickCSS),t=(r,{path:[n]})=>{n==="quickCSS"&&e(w.persist.ghost.quickCSS)};return w.persist.on("SET",t),()=>{e(),w.persist.off("SET",t)}};const Ie=e=>w.persist.ghost.themes.find(t=>t.url===e),Zt=e=>!!Ie(e)?.enabled,er=e=>Zt(e.url)?gr(e):Ce(e),gs=async e=>await er(await ye(e)),ps=e=>pt(Ie(e)),vs=async e=>{if(!Ie(e))throw new Error(`Theme with ID ${e} was not installed`);Zt(e)?qe(Ie(e)):await er(Ie(e))},de=async()=>{if(!window.cumstain){Ye.error("|| CUMSTAIN || API was not found, so nests could not be updated.");return}for(const e in cumstain.installed.ghost)delete cumstain.installed.ghost[e],cumstain.installed.delete(e);for(const e of w.persist.ghost.themes)cumstain.installed.store[e.url]={enabled:e.enabled,manifest:e};for(const[e,t]of Object.entries(cumstain.installed.ghost))t.enabled?cumstain.enabled.store[e]=t:(delete cumstain.enabled.ghost[e],cumstain.installed.delete(e))};var ys=()=>(window.cumstain={installed:re.nests.make({}),enabled:re.nests.make({}),importTheme:gs,removeTheme:ps,toggleTheme:vs},de(),w.persist.on(re.nests.Events.UPDATE,de),w.persist.on(re.nests.Events.SET,de),w.persist.on(re.nests.Events.DELETE,de),Ye.log("|| CUMSTAIN || Initialised window.cumstain API"),()=>{w.persist.off(re.nests.Events.UPDATE,de),w.persist.off(re.nests.Events.SET,de),w.persist.off(re.nests.Events.DELETE,de),window.cumstain=void 0,delete window.cumstain,Ye.log("|| CUMSTAIN || Disposed window.cumstain API")});const tr="User confirmation declined";function _s(e,{ok:t,error:r}){if(typeof e?.repo!="string")return r("You must supply a repo");mt.showConfirmationModal({type:"confirm",confirmText:"Add Repo",header:"[Cumstain] Add Repo?",content:`A web page or another app on your PC just tried to add the following theme repo: \`${e.repo}\`. Allow this?`}).then(n=>{n?Dt(e.repo,t,r).catch(s=>r("Unhandled error: "+s)):r(tr)})}function Es(e,{ok:t,error:r}){if(typeof e?.url!="string")return r("You must supply a theme url");mt.showConfirmationModal({type:"confirm",confirmText:"Install Theme",header:"[Cumstain] Install theme?",content:`A web page or another app on your PC just tried to install the following theme: \`${e.url}\`. Allow this?`}).then(n=>{n?Hn(e.url,t,r).catch(s=>r("Unhandled error: "+s)):r(tr)})}var bs=()=>[ft.addHandler("ysink_stain_addrepo",_s),ft.addHandler("ysink_stain_addtheme",Es)],ws=()=>ke.injectCSS(".ysink_stain_card{background:var(--background-secondary-alt);padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;width:100%!important;color:var(--text-normal)}.ysink_stain_title{display:flex;align-items:center;font-size:1rem;color:var(--interactive-active)}.ysink_stain_cardcontainer>*{margin-bottom:.5rem}.ysink_stain_divide{margin:.5rem 0;width:100%;height:1px;border-top:thin solid var(--background-modifier-accent)}.ysink_stain_row{display:flex;gap:1rem}.ysink_stain_row>:not(:last-child){flex:1}.ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(255,255,255,.2666666667)}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:rgba(0,0,0,.2)}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_search_row{display:flex;gap:.75rem;margin:.75rem 0}.ysink_stain_search_row .ysink_stain_dropdown{height:2.25rem;flex-basis:10rem;padding-top:.3rem}.ysink_stain_search_row .ysink_stain_searchbar{margin:unset;flex:1}.ysink_stain_tcard{display:grid;grid-template-columns:auto 1fr min-content;grid-template-rows:auto 1fr;align-items:center}.ysink_stain_tcard .ysink_stain_tmedia{grid-row:1/3;height:4rem;width:7rem;margin-right:1rem;background-size:cover}.ysink_stain_tcard .ysink_stain_tmedia *{display:flex;justify-content:center;align-items:center;height:100%}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview{z-index:1;transition:opacity .25s ease;backdrop-filter:brightness(.3);cursor:pointer}.ysink_stain_tcard .ysink_stain_tmedia .ysink_stain_tview:not(:hover){opacity:0}.ysink_stain_tcard .ysink_stain_tdesc{grid-area:2/2}.ysink_stain_tcard .ysink_stain_tacts{grid-column:3;justify-self:right}.ysink_stain_tcard .ysink_stain_tacts>*{display:inline-block}.ysink_stain_tcard .ysink_stain_taulic{text-align:right;min-width:8rem}.ysink_stain_delete{margin-right:.5rem;fill:var(--interactive-normal);cursor:pointer}.ysink_stain_badge{width:1.5rem;height:1.5rem;margin-right:.5rem;border-radius:50%}.ysink_stain_badge.ysink_stain_bd{padding:.25rem;background:#040405}.ysink_stain_badge.ysink_stain_cc{padding:.1rem;background:#7289DA}.ysink_stain_cssedit{background:#1d1f21;color:#c5c8c6;border-radius:.3rem;font-family:var(--font-code);font-size:.9rem;line-height:1.1rem}.ysink_stain_nosplash{display:flex;flex-direction:column;align-items:center;margin-top:15rem;gap:.5rem}.ysink_stain_nosplash h2{margin-bottom:0}.ysink_stain_nosplash>*{flex:0}.ysink_stain_nosplash .ysink_stain_button{margin-top:2rem}.ysink_stain_officialbadge{display:inline;margin-left:.5rem}#ysink_stain_cumstain-tab{padding-bottom:0}");Array.isArray(w.persist.ghost.repos)||Bn(),Array.isArray(w.persist.ghost.themes)||(w.persist.store.themes=[]);const Ss=[ms(),vr(),ys(),...bs(),fs(),ws()],ks=()=>_.forEachRight(Ss,e=>e());return We.onUnload=ks,Object.defineProperty(We,"__esModule",{value:!0}),We})({},cumcord.pluginData,cumcord.patcher,cumcord.modules.webpack,cumcord.modules.common.React,cumcord.utils,cumcord.ui.components,cumcord.ui.toasts,cumcord.modules.common.React,cumcord.modules.internal,cumcord.utils.logger,cumcord.websocket,cumcord.ui.modals);
