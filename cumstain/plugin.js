(function(L,re,mt,I,Z,y,ie,De,_t,pe){"use strict";function ye(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var M=ye(L),vt=ye(mt),Et=ye(_t);function me(t){if(!t?.id||!t.CSS)throw new Error("theme was missing either id or css.");const e=re.injectCSS(t.CSS);M.default.state.ghost.unpatchCache.set(t.id,e);const s=M.default.persist.ghost.themes.findIndex(n=>n.id===t.id);let r={...t};r.enabled=!0,s===-1?M.default.persist.ghost.themes.push(r):M.default.persist.ghost.themes[s]=r,M.default.persist.store.themes=M.default.persist.ghost.themes}function Fe(t){if(!t?.id)throw new Error("theme was missing id.");M.default.state.ghost.unpatchCache.get(t.id)?.(),M.default.state.ghost.unpatchCache.delete(t.id);const s=M.default.persist.ghost.themes.findIndex(n=>n.id===t.id);let r={...t};r.enabled=!1,s===-1?M.default.persist.ghost.themes.push(r):M.default.persist.ghost.themes[s]=r,M.default.persist.store.themes=M.default.persist.ghost.themes}function St(t){try{Fe(t)}catch(e){if(e.message!=="theme was not loaded.")throw e}M.default.persist.store.themes=M.default.persist.ghost.themes.filter(e=>e.id!==t.id)}function kt(){M.default.state.ghost.unpatchCache.forEach(t=>t?.()),M.default.state.ghost.unpatchCache.clear()}var xt=()=>(L.persist.ghost.themes&&L.persist.ghost.themes.filter(t=>t.enabled).forEach(me),kt),bt=()=>(M.default.persist.ghost.repos||(M.default.persist.store.repos=[]),M.default.persist.ghost.themes||(M.default.persist.store.themes=[]),M.default.state=vt.default.make({unpatchCache:new Map}),()=>{M.default.state=void 0,delete M.default.state});const wt=y.React.useState,Ct=y.React.createElement,Rt=I.findByDisplayName("FormText"),Mt=I.findByDisplayName("FormDivider");var It=({items:t})=>{let[e,s]=wt(0);return y.React.createElement("div",{className:"ysink_stain_tabbar_root"},y.React.createElement("div",{className:"ysink_stain_tabbar"},t.map((r,n)=>y.React.createElement("button",{className:"ysink_stain_button"+(n===e?" ysink_stain_selected":""),onClick:()=>s(n)},y.React.createElement(Rt,null,r.text)))),y.React.createElement(Mt,{className:"ysink_stain_divide"}),y.React.createElement("div",{className:"ysink_stain_tabbar_content"},Ct(t[e].component,{goTo:s})))},At=()=>y.React.createElement("img",{src:"https://betterdiscord.app/resources/branding/logo_small.svg",className:"ysink_stain_badge ysink_stain_bd"}),Tt=()=>y.React.createElement("img",{src:"https://avatars.githubusercontent.com/u/81397549",className:"ysink_stain_badge ysink_stain_cc"}),Nt=({theme:t,onClick:e})=>y.React.createElement("svg",{onClick:e,className:"ysink_stain_delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},y.React.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),y.React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),y.React.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}));const Lt=I.findByDisplayName("FormText"),$e=I.findByDisplayName("SmallMediaCarousel");var Ot=({media:t})=>y.React.createElement("div",{class:"ysink_stain_carousel"},t?y.React.createElement($e,{items:(typeof t=="string"?[t]:t).map(e=>({type:1,src:e})),autoplayInterval:5e3}):y.React.createElement("div",{className:"ysink_stain_noimg"},y.React.createElement(Lt,{className:"ysink_stain_noimgtxt"},"No Image"),y.React.createElement($e,{items:[{type:1,src:""}]})));const Dt=I.findByDisplayName("FormTitle"),Be=I.findByDisplayName("FormText"),Ft=I.findByDisplayName("FormSection"),$t=I.findByDisplayName("FormDivider"),Bt=I.findByDisplayName("Switch"),Pe=t=>{for(const e of L.persist.ghost.themes)if(e.id===t&&e.enabled)return!0;return!1},Pt=t=>L.persist.ghost.themes.some(e=>e.id===t);var Ke=({theme:t,deleteHook:e})=>(ie.useNest(L.persist),y.React.createElement("div",{className:"ysink_stain_card"},y.React.createElement(Ft,null,y.React.createElement(Ot,{media:t.media}),y.React.createElement("div",{className:"ysink_stain_row"},t.compat?y.React.createElement(At,null):y.React.createElement(Tt,null),y.React.createElement(Dt,{tag:"p",className:"ysink_stain_title"},t.name),Pt(t.id)?y.React.createElement(Nt,{theme:t,onClick:()=>{St(t),e?.()}}):[],y.React.createElement(Bt,{checked:Pe(t.id),onChange:()=>Pe(t.id)?Fe(t):me(t)})),y.React.createElement(Be,{className:"ysink_stain_desc"},t.description),y.React.createElement($t,{className:"ysink_stain_divide"}),y.React.createElement(Be,{className:"ysink_stain_author_licence"},t.author?`by ${t.author} `:"",t.license?`under ${t.license}`:""))));const Kt=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,zt=/^\\@/;function Ut(t){try{return JSON.parse(t)}catch{}}function jt(t){const e=t.split(`
`)[0];if(e.includes("//META"))return Ht(t);if(e.includes("/**"))return Wt(t);throw new Error("META was not found.")}function Ht(t){const e=t.split(`
`)[0],s=e.substring(e.lastIndexOf("//META")+6,e.lastIndexOf("*//")),r=Ut(s);if(!r)throw new Error("META could not be parsed.");if(!r.name)throw new Error("META missing name data.");return r}function Wt(t){const e=t.split("/**",2)[1].split("*/",1)[0],s={};let r="",n="";for(const l of e.split(Kt))if(l.length!==0)if(l.charAt(0)==="@"&&l.charAt(1)!==" "){s[r]=n;const h=l.indexOf(" ");r=l.substr(1,h-1),n=l.substr(h+1)}else n+=" "+l.replace("\\n",`
`).replace(zt,"@");return s[r]=n.trim(),delete s[""],s}async function Yt(t,e){const s=await(await fetch(new URL(t,e).href)).text();return{id:t,CSS:s,compat:!0,...jt(s)}}async function Gt(t,e){const s=await(await fetch(new URL(t,e).href)).text();let r=new URL(t,e).pathname.split("/");r.splice(r.length-1,1,"cumcord_theme.json");const n=new URL(r.join("/"),new URL(t,e).origin),l=await(await fetch(n.href)).json();return{id:t,CSS:s,compat:!1,...l}}var _e=async(t,e)=>{try{return await Gt(t,e)}catch(s){try{return await Yt(t,e)}catch(r){let n=new Error("Failed to fetch theme - both CC and BD either failed to fetch or failed to parse");throw n.e1=s,n.e2=r,n}}};const{useState:Vt}=y.React,qt=I.findByProps("Sizes","Colors","Looks","DropdownSizes"),Qt=I.findByDisplayName("TextInput");var Jt=()=>{ie.useNest(L.persist);let[t,e]=Vt("");return y.React.createElement(Z.ErrorBoundary,null,y.React.createElement("div",{className:"ysink_stain_installbar"},y.React.createElement(Qt,{className:"ysink_stain_input",placeholder:"Theme import URL",type:"text",value:t,onChange:s=>e(s)}),y.React.createElement(qt,{className:"ysink_stain_button",onClick:()=>{_e(t).then(s=>{me(s),De.showToast({title:`Loaded theme ${s.name}`,duration:5e3})},()=>De.showToast({title:"Failed to fetch theme - check URL",duration:5e3})),e("")}},"Install")))};function z(t){return Array.isArray?Array.isArray(t):je(t)==="[object Array]"}const Xt=1/0;function Zt(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Xt?"-0":e}function en(t){return t==null?"":Zt(t)}function U(t){return typeof t=="string"}function ze(t){return typeof t=="number"}function tn(t){return t===!0||t===!1||nn(t)&&je(t)=="[object Boolean]"}function Ue(t){return typeof t=="object"}function nn(t){return Ue(t)&&t!==null}function P(t){return t!=null}function ve(t){return!t.trim().length}function je(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const As="Extended search is not available",sn="Incorrect 'index' type",rn=t=>`Invalid value for key ${t}`,an=t=>`Pattern length exceeds max of ${t}.`,on=t=>`Missing ${t} property in key`,ln=t=>`Property 'weight' in key '${t}' must be a positive integer`,He=Object.prototype.hasOwnProperty;class cn{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(r=>{let n=We(r);s+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,s+=n.weight}),this._keys.forEach(r=>{r.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function We(t){let e=null,s=null,r=null,n=1;if(U(t)||z(t))r=t,e=Ye(t),s=Ee(t);else{if(!He.call(t,"name"))throw new Error(on("name"));const l=t.name;if(r=l,He.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(ln(l));e=Ye(l),s=Ee(l)}return{path:e,id:s,weight:n,src:r}}function Ye(t){return z(t)?t:t.split(".")}function Ee(t){return z(t)?t.join("."):t}function hn(t,e){let s=[],r=!1;const n=(l,h,a)=>{if(!!P(l))if(!h[a])s.push(l);else{let f=h[a];const i=l[f];if(!P(i))return;if(a===h.length-1&&(U(i)||ze(i)||tn(i)))s.push(en(i));else if(z(i)){r=!0;for(let u=0,m=i.length;u<m;u+=1)n(i[u],h,a+1)}else h.length&&n(i,h,a+1)}};return n(t,U(e)?e.split("."):e,0),r?s:s[0]}var k={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:hn,ignoreLocation:!1,ignoreFieldNorm:!1}};const un=/[^ ]+/g;function dn(t=3){const e=new Map,s=Math.pow(10,t);return{get(r){const n=r.match(un).length;if(e.has(n))return e.get(n);const l=1/Math.sqrt(n),h=parseFloat(Math.round(l*s)/s);return e.set(n,h),h},clear(){e.clear()}}}class Se{constructor({getFn:e=k.getFn}={}){this.norm=dn(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,r)=>{this._keysMap[s.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,U(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();U(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,r=this.size();s<r;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!P(e)||ve(e))return;let r={v:e,i:s,n:this.norm.get(e)};this.records.push(r)}_addObject(e,s){let r={i:s,$:{}};this.keys.forEach((n,l)=>{let h=this.getFn(e,n.path);if(!!P(h)){if(z(h)){let a=[];const f=[{nestedArrIndex:-1,value:h}];for(;f.length;){const{nestedArrIndex:i,value:u}=f.pop();if(!!P(u))if(U(u)&&!ve(u)){let m={v:u,i,n:this.norm.get(u)};a.push(m)}else z(u)&&u.forEach((m,E)=>{f.push({nestedArrIndex:E,value:m})})}r.$[l]=a}else if(!ve(h)){let a={v:h,n:this.norm.get(h)};r.$[l]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Ge(t,e,{getFn:s=k.getFn}={}){const r=new Se({getFn:s});return r.setKeys(t.map(We)),r.setSources(e),r.create(),r}function fn(t,{getFn:e=k.getFn}={}){const{keys:s,records:r}=t,n=new Se({getFn:e});return n.setKeys(s),n.setIndexRecords(r),n}function ae(t,{errors:e=0,currentLocation:s=0,expectedLocation:r=0,distance:n=k.distance,ignoreLocation:l=k.ignoreLocation}={}){const h=e/t.length;if(l)return h;const a=Math.abs(r-s);return n?h+a/n:a?1:h}function gn(t=[],e=k.minMatchCharLength){let s=[],r=-1,n=-1,l=0;for(let h=t.length;l<h;l+=1){let a=t[l];a&&r===-1?r=l:!a&&r!==-1&&(n=l-1,n-r+1>=e&&s.push([r,n]),r=-1)}return t[l-1]&&l-r>=e&&s.push([r,l-1]),s}const q=32;function pn(t,e,s,{location:r=k.location,distance:n=k.distance,threshold:l=k.threshold,findAllMatches:h=k.findAllMatches,minMatchCharLength:a=k.minMatchCharLength,includeMatches:f=k.includeMatches,ignoreLocation:i=k.ignoreLocation}={}){if(e.length>q)throw new Error(an(q));const u=e.length,m=t.length,E=Math.max(0,Math.min(r,m));let R=l,C=E;const A=a>1||f,w=A?Array(m):[];let x;for(;(x=t.indexOf(e,C))>-1;){let v=ae(e,{currentLocation:x,expectedLocation:E,distance:n,ignoreLocation:i});if(R=Math.min(v,R),C=x+u,A){let b=0;for(;b<u;)w[x+b]=1,b+=1}}C=-1;let c=[],o=1,d=u+m;const g=1<<u-1;for(let v=0;v<u;v+=1){let b=0,S=d;for(;b<S;)ae(e,{errors:v,currentLocation:E+S,expectedLocation:E,distance:n,ignoreLocation:i})<=R?b=S:d=S,S=Math.floor((d-b)/2+b);d=S;let N=Math.max(1,E-S+1),T=h?m:Math.min(E+S,m)+u,F=Array(T+2);F[T+1]=(1<<v)-1;for(let $=T;$>=N;$-=1){let G=$-1,Q=s[t.charAt(G)];if(A&&(w[G]=+!!Q),F[$]=(F[$+1]<<1|1)&Q,v&&(F[$]|=(c[$+1]|c[$])<<1|1|c[$+1]),F[$]&g&&(o=ae(e,{errors:v,currentLocation:G,expectedLocation:E,distance:n,ignoreLocation:i}),o<=R)){if(R=o,C=G,C<=E)break;N=Math.max(1,2*E-C)}}if(ae(e,{errors:v+1,currentLocation:E,expectedLocation:E,distance:n,ignoreLocation:i})>R)break;c=F}const p={isMatch:C>=0,score:Math.max(.001,o)};if(A){const v=gn(w,a);v.length?f&&(p.indices=v):p.isMatch=!1}return p}function yn(t){let e={};for(let s=0,r=t.length;s<r;s+=1){const n=t.charAt(s);e[n]=(e[n]||0)|1<<r-s-1}return e}class Ve{constructor(e,{location:s=k.location,threshold:r=k.threshold,distance:n=k.distance,includeMatches:l=k.includeMatches,findAllMatches:h=k.findAllMatches,minMatchCharLength:a=k.minMatchCharLength,isCaseSensitive:f=k.isCaseSensitive,ignoreLocation:i=k.ignoreLocation}={}){if(this.options={location:s,threshold:r,distance:n,includeMatches:l,findAllMatches:h,minMatchCharLength:a,isCaseSensitive:f,ignoreLocation:i},this.pattern=f?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(E,R)=>{this.chunks.push({pattern:E,alphabet:yn(E),startIndex:R})},m=this.pattern.length;if(m>q){let E=0;const R=m%q,C=m-R;for(;E<C;)u(this.pattern.substr(E,q),E),E+=q;if(R){const A=m-q;u(this.pattern.substr(A),A)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:r}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let C={isMatch:!0,score:0};return r&&(C.indices=[[0,e.length-1]]),C}const{location:n,distance:l,threshold:h,findAllMatches:a,minMatchCharLength:f,ignoreLocation:i}=this.options;let u=[],m=0,E=!1;this.chunks.forEach(({pattern:C,alphabet:A,startIndex:w})=>{const{isMatch:x,score:c,indices:o}=pn(e,C,A,{location:n+w,distance:l,threshold:h,findAllMatches:a,minMatchCharLength:f,includeMatches:r,ignoreLocation:i});x&&(E=!0),m+=c,x&&o&&(u=[...u,...o])});let R={isMatch:E,score:E?m/this.chunks.length:1};return E&&r&&(R.indices=u),R}}class H{constructor(e){this.pattern=e}static isMultiMatch(e){return qe(e,this.multiRegex)}static isSingleMatch(e){return qe(e,this.singleRegex)}search(){}}function qe(t,e){const s=t.match(e);return s?s[1]:null}class mn extends H{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class _n extends H{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class vn extends H{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class En extends H{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Sn extends H{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class kn extends H{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Qe extends H{constructor(e,{location:s=k.location,threshold:r=k.threshold,distance:n=k.distance,includeMatches:l=k.includeMatches,findAllMatches:h=k.findAllMatches,minMatchCharLength:a=k.minMatchCharLength,isCaseSensitive:f=k.isCaseSensitive,ignoreLocation:i=k.ignoreLocation}={}){super(e);this._bitapSearch=new Ve(e,{location:s,threshold:r,distance:n,includeMatches:l,findAllMatches:h,minMatchCharLength:a,isCaseSensitive:f,ignoreLocation:i})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Je extends H{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,r;const n=[],l=this.pattern.length;for(;(r=e.indexOf(this.pattern,s))>-1;)s=r+l,n.push([r,s-1]);const h=!!n.length;return{isMatch:h,score:h?0:1,indices:n}}}const ke=[mn,Je,vn,En,kn,Sn,_n,Qe],Xe=ke.length,xn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,bn="|";function wn(t,e={}){return t.split(bn).map(s=>{let r=s.trim().split(xn).filter(l=>l&&!!l.trim()),n=[];for(let l=0,h=r.length;l<h;l+=1){const a=r[l];let f=!1,i=-1;for(;!f&&++i<Xe;){const u=ke[i];let m=u.isMultiMatch(a);m&&(n.push(new u(m,e)),f=!0)}if(!f)for(i=-1;++i<Xe;){const u=ke[i];let m=u.isSingleMatch(a);if(m){n.push(new u(m,e));break}}}return n})}const Cn=new Set([Qe.type,Je.type]);class Rn{constructor(e,{isCaseSensitive:s=k.isCaseSensitive,includeMatches:r=k.includeMatches,minMatchCharLength:n=k.minMatchCharLength,ignoreLocation:l=k.ignoreLocation,findAllMatches:h=k.findAllMatches,location:a=k.location,threshold:f=k.threshold,distance:i=k.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:r,minMatchCharLength:n,findAllMatches:h,ignoreLocation:l,location:a,threshold:f,distance:i},this.pattern=s?e:e.toLowerCase(),this.query=wn(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let l=0,h=[],a=0;for(let f=0,i=s.length;f<i;f+=1){const u=s[f];h.length=0,l=0;for(let m=0,E=u.length;m<E;m+=1){const R=u[m],{isMatch:C,indices:A,score:w}=R.search(e);if(C){if(l+=1,a+=w,r){const x=R.constructor.type;Cn.has(x)?h=[...h,...A]:h.push(A)}}else{a=0,l=0,h.length=0;break}}if(l){let m={isMatch:!0,score:a/l};return r&&(m.indices=h),m}}return{isMatch:!1,score:1}}}const xe=[];function Mn(...t){xe.push(...t)}function be(t,e){for(let s=0,r=xe.length;s<r;s+=1){let n=xe[s];if(n.condition(t,e))return new n(t,e)}return new Ve(t,e)}const ee={AND:"$and",OR:"$or"},we={PATH:"$path",PATTERN:"$val"},Ce=t=>!!(t[ee.AND]||t[ee.OR]),In=t=>!!t[we.PATH],An=t=>!z(t)&&Ue(t)&&!Ce(t),Ze=t=>({[ee.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function et(t,e,{auto:s=!0}={}){const r=n=>{let l=Object.keys(n);const h=In(n);if(!h&&l.length>1&&!Ce(n))return r(Ze(n));if(An(n)){const f=h?n[we.PATH]:l[0],i=h?n[we.PATTERN]:n[f];if(!U(i))throw new Error(rn(f));const u={keyId:Ee(f),pattern:i};return s&&(u.searcher=be(i,e)),u}let a={children:[],operator:l[0]};return l.forEach(f=>{const i=n[f];z(i)&&i.forEach(u=>{a.children.push(r(u))})}),a};return Ce(t)||(t=Ze(t)),r(t)}function Tn(t,{ignoreFieldNorm:e=k.ignoreFieldNorm}){t.forEach(s=>{let r=1;s.matches.forEach(({key:n,norm:l,score:h})=>{const a=n?n.weight:null;r*=Math.pow(h===0&&a?Number.EPSILON:h,(a||1)*(e?1:l))}),s.score=r})}function Nn(t,e){const s=t.matches;e.matches=[],!!P(s)&&s.forEach(r=>{if(!P(r.indices)||!r.indices.length)return;const{indices:n,value:l}=r;let h={indices:n,value:l};r.key&&(h.key=r.key.src),r.idx>-1&&(h.refIndex=r.idx),e.matches.push(h)})}function Ln(t,e){e.score=t.score}function On(t,e,{includeMatches:s=k.includeMatches,includeScore:r=k.includeScore}={}){const n=[];return s&&n.push(Nn),r&&n.push(Ln),t.map(l=>{const{idx:h}=l,a={item:e[h],refIndex:h};return n.length&&n.forEach(f=>{f(l,a)}),a})}class X{constructor(e,s={},r){this.options={...k,...s},this.options.useExtendedSearch,this._keyStore=new cn(this.options.keys),this.setCollection(e,r)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof Se))throw new Error(sn);this._myIndex=s||Ge(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){!P(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let r=0,n=this._docs.length;r<n;r+=1){const l=this._docs[r];e(l,r)&&(this.removeAt(r),r-=1,n-=1,s.push(l))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:r,includeScore:n,shouldSort:l,sortFn:h,ignoreFieldNorm:a}=this.options;let f=U(e)?U(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Tn(f,{ignoreFieldNorm:a}),l&&f.sort(h),ze(s)&&s>-1&&(f=f.slice(0,s)),On(f,this._docs,{includeMatches:r,includeScore:n})}_searchStringList(e){const s=be(e,this.options),{records:r}=this._myIndex,n=[];return r.forEach(({v:l,i:h,n:a})=>{if(!P(l))return;const{isMatch:f,score:i,indices:u}=s.searchIn(l);f&&n.push({item:l,idx:h,matches:[{score:i,value:l,norm:a,indices:u}]})}),n}_searchLogical(e){const s=et(e,this.options),r=(a,f,i)=>{if(!a.children){const{keyId:u,searcher:m}=a,E=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(f,u),searcher:m});return E&&E.length?[{idx:i,item:f,matches:E}]:[]}switch(a.operator){case ee.AND:{const u=[];for(let m=0,E=a.children.length;m<E;m+=1){const R=a.children[m],C=r(R,f,i);if(C.length)u.push(...C);else return[]}return u}case ee.OR:{const u=[];for(let m=0,E=a.children.length;m<E;m+=1){const R=a.children[m],C=r(R,f,i);if(C.length){u.push(...C);break}}return u}}},n=this._myIndex.records,l={},h=[];return n.forEach(({$:a,i:f})=>{if(P(a)){let i=r(s,a,f);i.length&&(l[f]||(l[f]={idx:f,item:a,matches:[]},h.push(l[f])),i.forEach(({matches:u})=>{l[f].matches.push(...u)}))}}),h}_searchObjectList(e){const s=be(e,this.options),{keys:r,records:n}=this._myIndex,l=[];return n.forEach(({$:h,i:a})=>{if(!P(h))return;let f=[];r.forEach((i,u)=>{f.push(...this._findMatches({key:i,value:h[u],searcher:s}))}),f.length&&l.push({idx:a,item:h,matches:f})}),l}_findMatches({key:e,value:s,searcher:r}){if(!P(s))return[];let n=[];if(z(s))s.forEach(({v:l,i:h,n:a})=>{if(!P(l))return;const{isMatch:f,score:i,indices:u}=r.searchIn(l);f&&n.push({score:i,key:e,value:l,idx:h,norm:a,indices:u})});else{const{v:l,n:h}=s,{isMatch:a,score:f,indices:i}=r.searchIn(l);a&&n.push({score:f,key:e,value:l,norm:h,indices:i})}return n}}X.version="6.4.6",X.createIndex=Ge,X.parseIndex=fn,X.config=k,X.parseQuery=et,Mn(Rn);const Dn={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]};var tt=(t,e)=>!e||e==""?t:new X(t,Dn).search(e).map(s=>s.item);const nt=I.findByDisplayName("SearchBar");var st=({query:t,onChange:e})=>y.React.createElement(nt,{className:"ysink_stain_searchbar",query:t,onQueryChange:e,placeholder:"Search themes...",size:nt.Sizes.MEDIUM});const{SingleSelect:Fn}=I.findByDisplayName("Select",!1);var rt=({filterMode:t,setFilterMode:e})=>y.React.createElement(Fn,{options:[{value:0,label:"Show All"},{value:1,label:"CC Only"},{value:2,label:"BD Only"}],value:t,onChange:e,isDisabled:!1,className:"ysink_stain_dropdown"});const $n=I.findByDisplayName("FormTitle"),Bn=I.findByDisplayName("FormText"),Pn=I.findByDisplayName("FormSection"),Re=I.findByProps("Sizes","Colors","Looks","DropdownSizes");var Kn=({goToStore:t})=>y.React.createElement(Pn,{className:"ysink_stain_nosplash"},y.React.createElement($n,{tag:"h2"},"No Themes"),y.React.createElement(Bn,null,"Paste a link in above, or head over to the store"),y.React.createElement(Re,{className:"ysink_stain_button",color:Re.Colors.GREEN,sizes:Re.Sizes.LARGE,onClick:t},"Get some themes"));const{useState:it,useReducer:zn}=y.React;var Un=({goTo:t})=>{ie.useNest(L.persist);const[e,s]=it("");let[r,n]=it(0);const[,l]=zn(h=>~h,0);return y.React.createElement(Z.ErrorBoundary,null,y.React.createElement(Jt,null),y.React.createElement("div",{className:"ysink_stain_search_row"},y.React.createElement(st,{query:e,onChange:s}),y.React.createElement(rt,{filterMode:r,setFilterMode:n})),L.persist.ghost.themes.length===0?y.React.createElement(Kn,{goToStore:()=>t(1)}):y.React.createElement("div",{className:"ysink_stain_cardcontainer"},tt(L.persist.ghost.themes,e).filter(h=>r===0||r===1&&!h.compat||r===2&&h.compat).map(h=>y.React.createElement(Ke,{theme:h,deleteHook:l}))))},oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},at={};Object.defineProperty(at,"__esModule",{value:!0});var W=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},jn=function(){function t(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),Hn=Et.default,te=Wn(Hn);function Wn(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function Yn(t,e){var s={};for(var r in t)e.indexOf(r)>=0||!Object.prototype.hasOwnProperty.call(t,r)||(s[r]=t[r]);return s}function Gn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ot(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Vn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var qn=13,Qn=9,Jn=8,Xn=89,le=90,Zn=77,lt=57,ct=219,ht=222,ut=192,es=27,dt=100,ts=3e3,ns="navigator"in oe&&/Win/i.test(navigator.platform),Me="navigator"in oe&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),ce="npm__react-simple-code-editor__textarea",ss=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+ce+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+ce+` {
    color: transparent !important;
  }

  .`+ce+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,ft=function(t){Vn(e,t);function e(){var s,r,n,l;Gn(this,e);for(var h=arguments.length,a=Array(h),f=0;f<h;f++)a[f]=arguments[f];return l=(r=(n=ot(this,(s=e.__proto__||Object.getPrototypeOf(e)).call.apply(s,[this].concat(a))),n),n.state={capture:!0},n._recordCurrentState=function(){var i=n._input;if(!!i){var u=i.value,m=i.selectionStart,E=i.selectionEnd;n._recordChange({value:u,selectionStart:m,selectionEnd:E})}},n._getLines=function(i,u){return i.substring(0,u).split(`
`)},n._recordChange=function(i){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=n._history,E=m.stack,R=m.offset;if(E.length&&R>-1){n._history.stack=E.slice(0,R+1);var C=n._history.stack.length;if(C>dt){var A=C-dt;n._history.stack=E.slice(A,C),n._history.offset=Math.max(n._history.offset-A,0)}}var w=Date.now();if(u){var x=n._history.stack[n._history.offset];if(x&&w-x.timestamp<ts){var c=/[^a-z0-9]([a-z0-9]+)$/i,o=n._getLines(x.value,x.selectionStart).pop().match(c),d=n._getLines(i.value,i.selectionStart).pop().match(c);if(o&&d&&d[1].startsWith(o[1])){n._history.stack[n._history.offset]=W({},i,{timestamp:w});return}}}n._history.stack.push(W({},i,{timestamp:w})),n._history.offset++},n._updateInput=function(i){var u=n._input;!u||(u.value=i.value,u.selectionStart=i.selectionStart,u.selectionEnd=i.selectionEnd,n.props.onValueChange(i.value))},n._applyEdits=function(i){var u=n._input,m=n._history.stack[n._history.offset];m&&u&&(n._history.stack[n._history.offset]=W({},m,{selectionStart:u.selectionStart,selectionEnd:u.selectionEnd})),n._recordChange(i),n._updateInput(i)},n._undoEdit=function(){var i=n._history,u=i.stack,m=i.offset,E=u[m-1];E&&(n._updateInput(E),n._history.offset=Math.max(m-1,0))},n._redoEdit=function(){var i=n._history,u=i.stack,m=i.offset,E=u[m+1];E&&(n._updateInput(E),n._history.offset=Math.min(m+1,u.length-1))},n._handleKeyDown=function(i){var u=n.props,m=u.tabSize,E=u.insertSpaces,R=u.ignoreTabKey,C=u.onKeyDown;if(!(C&&(C(i),i.defaultPrevented))){i.keyCode===es&&i.target.blur();var A=i.target,w=A.value,x=A.selectionStart,c=A.selectionEnd,o=(E?" ":"	").repeat(m);if(i.keyCode===Qn&&!R&&n.state.capture)if(i.preventDefault(),i.shiftKey){var d=n._getLines(w,x),g=d.length-1,p=n._getLines(w,c).length-1,v=w.split(`
`).map(function(D,J){return J>=g&&J<=p&&D.startsWith(o)?D.substring(o.length):D}).join(`
`);if(w!==v){var b=d[g];n._applyEdits({value:v,selectionStart:b.startsWith(o)?x-o.length:x,selectionEnd:c-(w.length-v.length)})}}else if(x!==c){var S=n._getLines(w,x),N=S.length-1,T=n._getLines(w,c).length-1,F=S[N];n._applyEdits({value:w.split(`
`).map(function(D,J){return J>=N&&J<=T?o+D:D}).join(`
`),selectionStart:/\S/.test(F)?x+o.length:x,selectionEnd:c+o.length*(T-N+1)})}else{var Y=x+o.length;n._applyEdits({value:w.substring(0,x)+o+w.substring(c),selectionStart:Y,selectionEnd:Y})}else if(i.keyCode===Jn){var $=x!==c,G=w.substring(0,x);if(G.endsWith(o)&&!$){i.preventDefault();var Q=x-o.length;n._applyEdits({value:w.substring(0,x-o.length)+w.substring(c),selectionStart:Q,selectionEnd:Q})}}else if(i.keyCode===qn){if(x===c){var ue=n._getLines(w,x).pop(),O=ue.match(/^\s+/);if(O&&O[0]){i.preventDefault();var K=`
`+O[0],j=x+K.length;n._applyEdits({value:w.substring(0,x)+K+w.substring(c),selectionStart:j,selectionEnd:j})}}}else if(i.keyCode===lt||i.keyCode===ct||i.keyCode===ht||i.keyCode===ut){var B=void 0;i.keyCode===lt&&i.shiftKey?B=["(",")"]:i.keyCode===ct?i.shiftKey?B=["{","}"]:B=["[","]"]:i.keyCode===ht?i.shiftKey?B=['"','"']:B=["'","'"]:i.keyCode===ut&&!i.shiftKey&&(B=["`","`"]),x!==c&&B&&(i.preventDefault(),n._applyEdits({value:w.substring(0,x)+B[0]+w.substring(x,c)+B[1]+w.substring(c),selectionStart:x,selectionEnd:c+2}))}else(Me?i.metaKey&&i.keyCode===le:i.ctrlKey&&i.keyCode===le)&&!i.shiftKey&&!i.altKey?(i.preventDefault(),n._undoEdit()):(Me?i.metaKey&&i.keyCode===le&&i.shiftKey:ns?i.ctrlKey&&i.keyCode===Xn:i.ctrlKey&&i.keyCode===le&&i.shiftKey)&&!i.altKey?(i.preventDefault(),n._redoEdit()):i.keyCode===Zn&&i.ctrlKey&&(Me?i.shiftKey:!0)&&(i.preventDefault(),n.setState(function(D){return{capture:!D.capture}}))}},n._handleChange=function(i){var u=i.target,m=u.value,E=u.selectionStart,R=u.selectionEnd;n._recordChange({value:m,selectionStart:E,selectionEnd:R},!0),n.props.onValueChange(m)},n._history={stack:[],offset:-1},r),ot(n,l)}return jn(e,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var r=this,n=this.props,l=n.value,h=n.style,a=n.padding,f=n.highlight,i=n.textareaId,u=n.textareaClassName,m=n.autoFocus,E=n.disabled,R=n.form,C=n.maxLength,A=n.minLength,w=n.name,x=n.placeholder,c=n.readOnly,o=n.required,d=n.onClick,g=n.onFocus,p=n.onBlur,v=n.onKeyUp;n.onKeyDown,n.onValueChange,n.tabSize,n.insertSpaces,n.ignoreTabKey;var b=n.preClassName,S=Yn(n,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),N={paddingTop:a,paddingRight:a,paddingBottom:a,paddingLeft:a},T=f(l);return te.createElement("div",W({},S,{style:W({},ne.container,h)}),te.createElement("textarea",{ref:function(Y){return r._input=Y},style:W({},ne.editor,ne.textarea,N),className:ce+(u?" "+u:""),id:i,value:l,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:d,onKeyUp:v,onFocus:g,onBlur:p,disabled:E,form:R,maxLength:C,minLength:A,name:w,placeholder:x,readOnly:c,required:o,autoFocus:m,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),te.createElement("pre",W({className:b,"aria-hidden":"true",style:W({},ne.editor,ne.highlight,N)},typeof T=="string"?{dangerouslySetInnerHTML:{__html:T+"<br />"}}:{children:T})),te.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:ss}}))}},{key:"session",get:function(){return{history:this._history}},set:function(r){this._history=r.history}}]),e}(te.Component);ft.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var rs=at.default=ft,ne={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},Ie={exports:{}};(function(t){var e=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var s=function(r){var n=/\blang(?:uage)?-([\w-]+)\b/i,l=0,h={},a={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function c(o){return o instanceof f?new f(o.type,c(o.content),o.alias):Array.isArray(o)?o.map(c):o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++l}),c.__id},clone:function c(o,d){d=d||{};var g,p;switch(a.util.type(o)){case"Object":if(p=a.util.objId(o),d[p])return d[p];g={},d[p]=g;for(var v in o)o.hasOwnProperty(v)&&(g[v]=c(o[v],d));return g;case"Array":return p=a.util.objId(o),d[p]?d[p]:(g=[],d[p]=g,o.forEach(function(b,S){g[S]=c(b,d)}),g);default:return o}},getLanguage:function(c){for(;c&&!n.test(c.className);)c=c.parentElement;return c?(c.className.match(n)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(g){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(g.stack)||[])[1];if(c){var o=document.getElementsByTagName("script");for(var d in o)if(o[d].src==c)return o[d]}return null}},isActive:function(c,o,d){for(var g="no-"+o;c;){var p=c.classList;if(p.contains(o))return!0;if(p.contains(g))return!1;c=c.parentElement}return!!d}},languages:{plain:h,plaintext:h,text:h,txt:h,extend:function(c,o){var d=a.util.clone(a.languages[c]);for(var g in o)d[g]=o[g];return d},insertBefore:function(c,o,d,g){g=g||a.languages;var p=g[c],v={};for(var b in p)if(p.hasOwnProperty(b)){if(b==o)for(var S in d)d.hasOwnProperty(S)&&(v[S]=d[S]);d.hasOwnProperty(b)||(v[b]=p[b])}var N=g[c];return g[c]=v,a.languages.DFS(a.languages,function(T,F){F===N&&T!=c&&(this[T]=v)}),v},DFS:function c(o,d,g,p){p=p||{};var v=a.util.objId;for(var b in o)if(o.hasOwnProperty(b)){d.call(o,b,o[b],g||b);var S=o[b],N=a.util.type(S);N==="Object"&&!p[v(S)]?(p[v(S)]=!0,c(S,d,null,p)):N==="Array"&&!p[v(S)]&&(p[v(S)]=!0,c(S,d,b,p))}}},plugins:{},highlightAll:function(c,o){a.highlightAllUnder(document,c,o)},highlightAllUnder:function(c,o,d){var g={callback:d,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",g),g.elements=Array.prototype.slice.apply(g.container.querySelectorAll(g.selector)),a.hooks.run("before-all-elements-highlight",g);for(var p=0,v;v=g.elements[p++];)a.highlightElement(v,o===!0,g.callback)},highlightElement:function(c,o,d){var g=a.util.getLanguage(c),p=a.languages[g];c.className=c.className.replace(n,"").replace(/\s+/g," ")+" language-"+g;var v=c.parentElement;v&&v.nodeName.toLowerCase()==="pre"&&(v.className=v.className.replace(n,"").replace(/\s+/g," ")+" language-"+g);var b=c.textContent,S={element:c,language:g,grammar:p,code:b};function N(F){S.highlightedCode=F,a.hooks.run("before-insert",S),S.element.innerHTML=S.highlightedCode,a.hooks.run("after-highlight",S),a.hooks.run("complete",S),d&&d.call(S.element)}if(a.hooks.run("before-sanity-check",S),v=S.element.parentElement,v&&v.nodeName.toLowerCase()==="pre"&&!v.hasAttribute("tabindex")&&v.setAttribute("tabindex","0"),!S.code){a.hooks.run("complete",S),d&&d.call(S.element);return}if(a.hooks.run("before-highlight",S),!S.grammar){N(a.util.encode(S.code));return}if(o&&r.Worker){var T=new Worker(a.filename);T.onmessage=function(F){N(F.data)},T.postMessage(JSON.stringify({language:S.language,code:S.code,immediateClose:!0}))}else N(a.highlight(S.code,S.grammar,S.language))},highlight:function(c,o,d){var g={code:c,grammar:o,language:d};return a.hooks.run("before-tokenize",g),g.tokens=a.tokenize(g.code,g.grammar),a.hooks.run("after-tokenize",g),f.stringify(a.util.encode(g.tokens),g.language)},tokenize:function(c,o){var d=o.rest;if(d){for(var g in d)o[g]=d[g];delete o.rest}var p=new m;return E(p,p.head,c),u(c,p,o,p.head,0),C(p)},hooks:{all:{},add:function(c,o){var d=a.hooks.all;d[c]=d[c]||[],d[c].push(o)},run:function(c,o){var d=a.hooks.all[c];if(!(!d||!d.length))for(var g=0,p;p=d[g++];)p(o)}},Token:f};r.Prism=a;function f(c,o,d,g){this.type=c,this.content=o,this.alias=d,this.length=(g||"").length|0}f.stringify=function c(o,d){if(typeof o=="string")return o;if(Array.isArray(o)){var g="";return o.forEach(function(N){g+=c(N,d)}),g}var p={type:o.type,content:c(o.content,d),tag:"span",classes:["token",o.type],attributes:{},language:d},v=o.alias;v&&(Array.isArray(v)?Array.prototype.push.apply(p.classes,v):p.classes.push(v)),a.hooks.run("wrap",p);var b="";for(var S in p.attributes)b+=" "+S+'="'+(p.attributes[S]||"").replace(/"/g,"&quot;")+'"';return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+b+">"+p.content+"</"+p.tag+">"};function i(c,o,d,g){c.lastIndex=o;var p=c.exec(d);if(p&&g&&p[1]){var v=p[1].length;p.index+=v,p[0]=p[0].slice(v)}return p}function u(c,o,d,g,p,v){for(var b in d)if(!(!d.hasOwnProperty(b)||!d[b])){var S=d[b];S=Array.isArray(S)?S:[S];for(var N=0;N<S.length;++N){if(v&&v.cause==b+","+N)return;var T=S[N],F=T.inside,Y=!!T.lookbehind,$=!!T.greedy,G=T.alias;if($&&!T.pattern.global){var Q=T.pattern.toString().match(/[imsuy]*$/)[0];T.pattern=RegExp(T.pattern.source,Q+"g")}for(var ue=T.pattern||T,O=g.next,K=p;O!==o.tail&&!(v&&K>=v.reach);K+=O.value.length,O=O.next){var j=O.value;if(o.length>c.length)return;if(!(j instanceof f)){var B=1,D;if($){if(D=i(ue,K,c,Y),!D)break;var de=D.index,J=D.index+D[0].length,V=K;for(V+=O.value.length;de>=V;)O=O.next,V+=O.value.length;if(V-=O.value.length,K=V,O.value instanceof f)continue;for(var se=O;se!==o.tail&&(V<J||typeof se.value=="string");se=se.next)B++,V+=se.value.length;B--,j=c.slice(K,V),D.index-=K}else if(D=i(ue,0,j,Y),!D)continue;var de=D.index,fe=D[0],Ne=j.slice(0,de),yt=j.slice(de+fe.length),Le=K+j.length;v&&Le>v.reach&&(v.reach=Le);var ge=O.prev;Ne&&(ge=E(o,ge,Ne),K+=Ne.length),R(o,ge,B);var Is=new f(b,F?a.tokenize(fe,F):fe,G,fe);if(O=E(o,ge,Is),yt&&E(o,O,yt),B>1){var Oe={cause:b+","+N,reach:Le};u(c,o,d,O.prev,K,Oe),v&&Oe.reach>v.reach&&(v.reach=Oe.reach)}}}}}}function m(){var c={value:null,prev:null,next:null},o={value:null,prev:c,next:null};c.next=o,this.head=c,this.tail=o,this.length=0}function E(c,o,d){var g=o.next,p={value:d,prev:o,next:g};return o.next=p,g.prev=p,c.length++,p}function R(c,o,d){for(var g=o.next,p=0;p<d&&g!==c.tail;p++)g=g.next;o.next=g,g.prev=o,c.length-=p}function C(c){for(var o=[],d=c.head.next;d!==c.tail;)o.push(d.value),d=d.next;return o}if(!r.document)return r.addEventListener&&(a.disableWorkerMessageHandler||r.addEventListener("message",function(c){var o=JSON.parse(c.data),d=o.language,g=o.code,p=o.immediateClose;r.postMessage(a.highlight(g,a.languages[d],d)),p&&r.close()},!1)),a;var A=a.util.currentScript();A&&(a.filename=A.src,A.hasAttribute("data-manual")&&(a.manual=!0));function w(){a.manual||a.highlightAll()}if(!a.manual){var x=document.readyState;x==="loading"||x==="interactive"&&A&&A.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return a}(e);t.exports&&(t.exports=s),typeof oe!="undefined"&&(oe.Prism=s)})(Ie),function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var s=t.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(Prism);const is=I.findByProps("contentColumn").contentColumn,{useState:as,useCallback:os}=y.React;var ls=()=>{const[t,e]=as(L.persist.ghost.quickCSS),s=n=>{L.persist.store.quickCSS=n,L.reloadCSS()},r=os(_.throttle(s,250,{leading:!0,trailing:!0}),[]);return y.React.createElement(Z.ErrorBoundary,null,y.React.createElement("div",{class:"ysink_stain_quickcss"},y.React.createElement(rs,{className:"ysink_stain_editorroot",value:t??"",onValueChange:n=>{e(n),r(n)},highlight:n=>Ie.exports.highlight(n,Ie.exports.languages.css),padding:10}),y.React.createElement("link",{href:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@master/themes/prism-atom-dark.css",rel:"stylesheet"}),y.React.createElement("style",null,`:root { --background-primary: #1d1f21; } .theme-light .${is} { --text-normal: white; }`)))};async function cs(t){const e=new URL("repo.json",t).href,s=await(await fetch(e)).json();if(!s.themes||s.themes?.length===0)throw new Error("No themes found in repo");if(!s.meta)throw new Error("No repo metadata");if(!s?.meta.name)throw new Error("Repo did not have a name");return s}var gt=async t=>{const e=await cs(t),s=await Promise.all(e.themes.map(r=>_e(r,t)));return{manifest:e,themes:s}};const hs=I.findByDisplayName("FormTitle"),us=I.findByDisplayName("FormText"),ds=I.findByDisplayName("FormSection"),Ae=I.findByProps("Sizes","Colors","Looks","DropdownSizes");var fs=({})=>y.React.createElement(ds,{className:"ysink_stain_nosplash"},y.React.createElement(hs,{tag:"h2"},"No Repos"),y.React.createElement(us,null,"Add one in the repo manager!"),y.React.createElement(Ae,{className:"ysink_stain_button",color:Ae.Colors.GREEN,sizes:Ae.Sizes.LARGE,onClick:()=>{}},"Open repo manager"));const{useState:he,useEffect:gs,useReducer:ps}=y.React,ys=()=>Promise.all(L.persist.ghost.repos.map(gt)),ms=t=>t.flatMap(e=>e.themes);async function _s(){let t=await ys();return{repos:t,themes:ms(t)}}var vs=()=>{ie.useNest(L.persist,!1,(i,u)=>u?.[0]==="repos");const[t,e]=he("");let[s,r]=he(void 0),[n,l]=he(void 0),[h,a]=he(0);gs(()=>{(!s||!n)&&_s().then(({repos:i,themes:u})=>{r(i),l(u)})});const[,f]=ps(i=>~i,0);return y.React.createElement(Z.ErrorBoundary,null,y.React.createElement("div",{className:"ysink_stain_search_row"},y.React.createElement(st,{query:t,onChange:e}),y.React.createElement(rt,{filterMode:h,setFilterMode:a})),L.persist.ghost.repos.length===0?y.React.createElement(fs,null):y.React.createElement("div",{className:"ysink_stain_cardcontainer"},tt(n??[],t).filter(i=>h===0||h===1&&!i.compat||h===2&&i.compat).map(i=>y.React.createElement(Ke,{theme:i,deleteHook:f}))))};const Es=I.findByDisplayName("FormTitle"),Ss=I.findByDisplayName("FormSection");I.findByDisplayName("FormText");var ks=()=>y.React.createElement(Z.ErrorBoundary,null,y.React.createElement(Ss,null,y.React.createElement(Es,{tag:"h1"},"Cumstain Settings"),y.React.createElement(It,{items:[{text:"Installed",component:Un},{text:"Store",component:vs},{text:"Quick CSS",component:ls}]}))),xs=()=>re.after("getPredicateSections",I.findByDisplayName("SettingsView").prototype,(t,e)=>{if(e[1]?.section!="My Account")return;let s=e.findIndex(r=>r.section=="CUMCORD_PLUGINS")+1;return e.splice(s,0,{section:"ysink_stain_CUMSTAIN",label:"Themes",element:ks}),e}),bs=()=>cumcord.patcher.injectCSS(".ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:#fff4}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:#0003}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_cardcontainer{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.ysink_stain_card{padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;display:flex;flex-direction:column;z-index:1;background-color:var(--deprecated-card-bg)}.ysink_stain_card .ysink_stain_title{font-size:1rem;padding-top:.2rem;display:inline;flex:1;margin:0}.ysink_stain_card .ysink_stain_button{display:inline;padding:0}.ysink_stain_card .ysink_stain_button>div{padding:2px 16px}.ysink_stain_card .ysink_stain_row{display:flex;margin-bottom:.5rem}.ysink_stain_card .ysink_stain_author_licence{font-style:italic}.ysink_stain_card .ysink_stain_desc{flex:1}.ysink_stain_card .ysink_stain_carousel{margin-bottom:1rem}.ysink_stain_card .ysink_stain_carousel>div:not(.ysink_stain_noimg)>:last-child,.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg>div>:last-child{height:2.25rem}.ysink_stain_card .ysink_stain_carousel>div{border-radius:.5rem}.theme-dark .ysink_stain_card .ysink_stain_carousel>:not(.ysink_stain_noimg){background:#0005}.theme-light .ysink_stain_card .ysink_stain_carousel>:not(.ysink_stain_noimg){background:#000d}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg{display:grid}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg div{grid-area:1/1}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg div:not(.ysink_stain_noimgtxt){visibility:hidden;z-index:-1}.ysink_stain_card .ysink_stain_carousel .ysink_stain_noimg div.ysink_stain_noimgtxt{grid-area:1/1;font-size:1.5rem;text-align:center;padding-top:35%;text-transform:uppercase;opacity:.8}.ysink_stain_divide{margin:0 0 1rem}.ysink_stain_card .ysink_stain_divide{margin:.2rem 0}.ysink_stain_delete{margin-right:.5rem;fill:var(--interactive-normal)}.ysink_stain_installbar{display:flex}.ysink_stain_installbar>*{flex:1}.ysink_stain_installbar>:last-child{flex:unset;margin-left:1rem}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_search_row{display:flex;gap:.75rem;margin:.75rem 0}.ysink_stain_search_row .ysink_stain_dropdown{height:2.25rem;flex-basis:10rem;padding-top:.3rem}.ysink_stain_search_row .ysink_stain_searchbar{margin:unset;flex:1}.ysink_stain_editorroot{background:tranparent;color:#c5c8c6;font-family:var(--font-code);font-size:.9rem;line-height:1.1rem}.ysink_stain_badge{width:1.5rem;height:1.5rem;margin-right:.5rem;border-radius:50%}.ysink_stain_badge.ysink_stain_bd{padding:.25rem;background:#040405}.ysink_stain_badge.ysink_stain_cc{padding:.1rem;background:#f8f8f8;background:#7289DA}.ysink_stain_nosplash{display:flex;flex-direction:column;align-items:center;margin-top:15rem;gap:.5rem}.ysink_stain_nosplash h2{margin-bottom:0}.ysink_stain_nosplash>*{flex:0}.ysink_stain_nosplash .ysink_stain_button{margin-top:2rem}"),ws=()=>{const t=re.injectCSS(M.default.persist.ghost.quickCSS);return M.default.reloadCSS=()=>t(M.default.persist.ghost.quickCSS),()=>{t(),M.default.reloadCSS=void 0,delete M.default.reloadCSS}};const pt=async()=>{pe.log("|| CUMSTAIN || Started periodic theme update check");const e=(await Promise.all(L.persist.ghost.repos.map(gt))).flatMap(s=>s.themes);for(let s=0;s<L.persist.ghost.themes.length;s++){const r=L.persist.ghost.themes[s],n=e.find(l=>l.id===r.id);if(n)L.persist.ghost.themes[s]=n;else{const l=await _e(r.url).catch(()=>{});l&&(L.persist.ghost.themes[s]=l)}L.persist.store.themes[s].enabled=r.enabled,r.enabled&&L.state.ghost.unpatchCache.get(r.id)?.(L.persist.ghost.themes[s].CSS),pe.log(`|| CUMSTAIN || Updated theme ${L.persist.ghost.themes[s].name}`)}pe.log("|| CUMSTAIN || Completed periodic theme update check")};var Cs=()=>{setTimeout(pt,10);const t=setInterval(pt,6e5);return()=>clearInterval(t)};const Te=I.findByDisplayName("Text");var Rs=()=>re.after("default",I.findByDisplayName("ClientDebugInfo",!1),(t,e)=>(e.props.children.push(y.React.createElement(Te,{color:Te.Colors.MUTED,tag:"span",size:Te.Sizes.SIZE_12},["cumstain"," ","pre0.1"," "])),e)),Ms=({persist:t})=>{let e=[];return Array.isArray(t.ghost.repos)||(t.store.repos=[]),{onLoad:async()=>{t.store.repos=["http://127.0.0.1:8080/"],e.push(Rs(),bs(),bt(),xt(),ws(),xs(),Cs())},onUnload:()=>e.reduceRight((s,r)=>r?.(),null)}};return Ms})(cumcord.pluginData,cumcord.patcher,cumcord.modules.internal.nests,cumcord.modules.webpack,cumcord.ui.components,cumcord.modules.common,cumcord.utils,cumcord.ui.toasts,cumcord.modules.common.React,cumcord.utils.logger);
