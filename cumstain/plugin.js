(function(T,fe,ut,$,X,E,Z,Oe,ht,de){"use strict";function ge(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var C=ge(T),ft=ge(ut),dt=ge(ht);function pe(t){if(!t?.id||!t.CSS)throw new Error("theme was missing either id or css.");const e=fe.injectCSS(t.CSS);C.default.state.ghost.unpatchCache.set(t.id,e);const r=C.default.persist.ghost.themes.findIndex(n=>n.id===t.id);let s={...t};s.enabled=!0,r===-1?C.default.persist.ghost.themes.push(s):C.default.persist.ghost.themes[r]=s,C.default.persist.store.themes=C.default.persist.ghost.themes}function Ne(t){if(!t?.id)throw new Error("theme was missing id.");C.default.state.ghost.unpatchCache.get(t.id)?.(),C.default.state.ghost.unpatchCache.delete(t.id);const r=C.default.persist.ghost.themes.findIndex(n=>n.id===t.id);let s={...t};s.enabled=!1,r===-1?C.default.persist.ghost.themes.push(s):C.default.persist.ghost.themes[r]=s,C.default.persist.store.themes=C.default.persist.ghost.themes}function gt(t){try{Ne(t)}catch(e){if(e.message!=="theme was not loaded.")throw e}C.default.persist.store.themes=C.default.persist.ghost.themes.filter(e=>e.id!==t.id)}function pt(){C.default.state.ghost.unpatchCache.forEach(t=>t?.()),C.default.state.ghost.unpatchCache.clear()}var yt=()=>(T.persist.ghost.themes&&T.persist.ghost.themes.filter(t=>t.enabled).forEach(pe),pt),mt=()=>(C.default.persist.ghost.repos||(C.default.persist.store.repos=[]),C.default.persist.ghost.themes||(C.default.persist.store.themes=[]),C.default.state=ft.default.make({unpatchCache:new Map}),()=>{C.default.state=void 0,delete C.default.state});const vt=E.React.useState,_t=E.React.createElement,Et=$.findByDisplayName("FormText"),St=$.findByDisplayName("FormDivider");var xt=({items:t})=>{let[e,r]=vt(0);return E.React.createElement("div",{className:"ysink_stain_tabbar_root"},E.React.createElement("div",{className:"ysink_stain_tabbar"},t.map((s,n)=>E.React.createElement("button",{className:"ysink_stain_button"+(n===e?" ysink_stain_selected":""),onClick:()=>r(n)},E.React.createElement(Et,null,s.text)))),E.React.createElement(St,{className:"ysink_stain_divide"}),E.React.createElement("div",{className:"ysink_stain_tabbar_content"},_t(t[e].component)))},bt=({theme:t,onClick:e})=>E.React.createElement("svg",{onClick:e,className:"ysink_stain_delete",xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px"},E.React.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),E.React.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"}),E.React.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}));const kt=$.findByDisplayName("FormTitle"),ye=$.findByDisplayName("FormText"),wt=$.findByDisplayName("FormSection"),Mt=$.findByDisplayName("FormDivider"),Ct=$.findByDisplayName("Switch"),Le=t=>{for(const e of T.persist.ghost.themes)if(e.id===t&&e.enabled)return!0;return!1},Rt=t=>T.persist.ghost.themes.some(e=>e.id===t);var De=({theme:t,deleteHook:e})=>(Z.useNest(T.persist),E.React.createElement("div",{className:"ysink_stain_card"},E.React.createElement(wt,null,E.React.createElement("div",{className:"ysink_stain_img",style:{backgroundImage:`url(${t.media})`}},t.media?[]:E.React.createElement(ye,null,"No Image")),E.React.createElement("div",{className:"ysink_stain_row"},E.React.createElement(kt,{tag:"p",className:"ysink_stain_title"},t.name),Rt(t.id)?E.React.createElement(bt,{theme:t,onClick:()=>{gt(t),e?.()}}):[],E.React.createElement(Ct,{checked:Le(t.id),onChange:()=>Le(t.id)?Ne(t):pe(t)})),E.React.createElement(ye,{className:"ysink_stain_desc"},t.description),E.React.createElement(Mt,{className:"ysink_stain_divide"}),E.React.createElement(ye,{className:"ysink_stain_author_licence"},t.author?`by ${t.author} `:"",t.license?`under ${t.license}`:""))));const It=/[^\S\r\n]*?\r?\n[^\S\r\n]*?\*[^\S\r\n]?/,At=/^\\@/;function Tt(t){try{return JSON.parse(t)}catch{}}function Ot(t){const e=t.split(`
`)[0];if(e.includes("//META"))return Nt(t);if(e.includes("/**"))return Lt(t);throw new Error("META was not found.")}function Nt(t){const e=t.split(`
`)[0],r=e.substring(e.lastIndexOf("//META")+6,e.lastIndexOf("*//")),s=Tt(r);if(!s)throw new Error("META could not be parsed.");if(!s.name)throw new Error("META missing name data.");return s}function Lt(t){const e=t.split("/**",2)[1].split("*/",1)[0],r={};let s="",n="";for(const l of e.split(It))if(l.length!==0)if(l.charAt(0)==="@"&&l.charAt(1)!==" "){r[s]=n;const h=l.indexOf(" ");s=l.substr(1,h-1),n=l.substr(h+1)}else n+=" "+l.replace("\\n",`
`).replace(At,"@");return r[s]=n.trim(),delete r[""],r}var me=async(t,e)=>{const r=await(await fetch(new URL(t,e).href)).text();return{id:t,CSS:r,...Ot(r)}};const{useState:Dt}=E.React,Ft=$.findByProps("Sizes","Colors","Looks","DropdownSizes"),$t=$.findByDisplayName("TextInput");var Kt=()=>{Z.useNest(T.persist);let[t,e]=Dt("");return E.React.createElement(X.ErrorBoundary,null,E.React.createElement("div",{className:"ysink_stain_installbar"},E.React.createElement($t,{className:"ysink_stain_input",placeholder:"Theme import URL",type:"text",value:t,onChange:r=>e(r)}),E.React.createElement(Ft,{className:"ysink_stain_button",onClick:()=>{me(t).then(r=>{pe(r),Oe.showToast({title:`Loaded theme ${r.name}`,duration:5e3})},()=>Oe.showToast({title:"Failed to fetch theme - check URL",duration:5e3})),e("")}},"Install")))};function z(t){return Array.isArray?Array.isArray(t):Ke(t)==="[object Array]"}const Pt=1/0;function zt(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Pt?"-0":e}function Bt(t){return t==null?"":zt(t)}function B(t){return typeof t=="string"}function Fe(t){return typeof t=="number"}function Ut(t){return t===!0||t===!1||jt(t)&&Ke(t)=="[object Boolean]"}function $e(t){return typeof t=="object"}function jt(t){return $e(t)&&t!==null}function K(t){return t!=null}function ve(t){return!t.trim().length}function Ke(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ir="Extended search is not available",Ht="Incorrect 'index' type",Wt=t=>`Invalid value for key ${t}`,Yt=t=>`Pattern length exceeds max of ${t}.`,Vt=t=>`Missing ${t} property in key`,Gt=t=>`Property 'weight' in key '${t}' must be a positive integer`,Pe=Object.prototype.hasOwnProperty;class qt{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(s=>{let n=ze(s);r+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(s=>{s.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ze(t){let e=null,r=null,s=null,n=1;if(B(t)||z(t))s=t,e=Be(t),r=_e(t);else{if(!Pe.call(t,"name"))throw new Error(Vt("name"));const l=t.name;if(s=l,Pe.call(t,"weight")&&(n=t.weight,n<=0))throw new Error(Gt(l));e=Be(l),r=_e(l)}return{path:e,id:r,weight:n,src:s}}function Be(t){return z(t)?t:t.split(".")}function _e(t){return z(t)?t.join("."):t}function Qt(t,e){let r=[],s=!1;const n=(l,h,a)=>{if(!!K(l))if(!h[a])r.push(l);else{let d=h[a];const i=l[d];if(!K(i))return;if(a===h.length-1&&(B(i)||Fe(i)||Ut(i)))r.push(Bt(i));else if(z(i)){s=!0;for(let u=0,y=i.length;u<y;u+=1)n(i[u],h,a+1)}else h.length&&n(i,h,a+1)}};return n(t,B(e)?e.split("."):e,0),s?r:r[0]}var S={...{isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},...{includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},...{location:0,threshold:.6,distance:100},...{useExtendedSearch:!1,getFn:Qt,ignoreLocation:!1,ignoreFieldNorm:!1}};const Jt=/[^ ]+/g;function Xt(t=3){const e=new Map,r=Math.pow(10,t);return{get(s){const n=s.match(Jt).length;if(e.has(n))return e.get(n);const l=1/Math.sqrt(n),h=parseFloat(Math.round(l*r)/r);return e.set(n,h),h},clear(){e.clear()}}}class Ee{constructor({getFn:e=S.getFn}={}){this.norm=Xt(3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,B(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();B(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!K(e)||ve(e))return;let s={v:e,i:r,n:this.norm.get(e)};this.records.push(s)}_addObject(e,r){let s={i:r,$:{}};this.keys.forEach((n,l)=>{let h=this.getFn(e,n.path);if(!!K(h)){if(z(h)){let a=[];const d=[{nestedArrIndex:-1,value:h}];for(;d.length;){const{nestedArrIndex:i,value:u}=d.pop();if(!!K(u))if(B(u)&&!ve(u)){let y={v:u,i,n:this.norm.get(u)};a.push(y)}else z(u)&&u.forEach((y,v)=>{d.push({nestedArrIndex:v,value:y})})}s.$[l]=a}else if(!ve(h)){let a={v:h,n:this.norm.get(h)};s.$[l]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Ue(t,e,{getFn:r=S.getFn}={}){const s=new Ee({getFn:r});return s.setKeys(t.map(ze)),s.setSources(e),s.create(),s}function Zt(t,{getFn:e=S.getFn}={}){const{keys:r,records:s}=t,n=new Ee({getFn:e});return n.setKeys(r),n.setIndexRecords(s),n}function se(t,{errors:e=0,currentLocation:r=0,expectedLocation:s=0,distance:n=S.distance,ignoreLocation:l=S.ignoreLocation}={}){const h=e/t.length;if(l)return h;const a=Math.abs(s-r);return n?h+a/n:a?1:h}function en(t=[],e=S.minMatchCharLength){let r=[],s=-1,n=-1,l=0;for(let h=t.length;l<h;l+=1){let a=t[l];a&&s===-1?s=l:!a&&s!==-1&&(n=l-1,n-s+1>=e&&r.push([s,n]),s=-1)}return t[l-1]&&l-s>=e&&r.push([s,l-1]),r}const G=32;function tn(t,e,r,{location:s=S.location,distance:n=S.distance,threshold:l=S.threshold,findAllMatches:h=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,includeMatches:d=S.includeMatches,ignoreLocation:i=S.ignoreLocation}={}){if(e.length>G)throw new Error(Yt(G));const u=e.length,y=t.length,v=Math.max(0,Math.min(s,y));let M=l,w=v;const R=a>1||d,k=R?Array(y):[];let x;for(;(x=t.indexOf(e,w))>-1;){let m=se(e,{currentLocation:x,expectedLocation:v,distance:n,ignoreLocation:i});if(M=Math.min(m,M),w=x+u,R){let b=0;for(;b<u;)k[x+b]=1,b+=1}}w=-1;let c=[],o=1,f=u+y;const g=1<<u-1;for(let m=0;m<u;m+=1){let b=0,_=f;for(;b<_;)se(e,{errors:m,currentLocation:v+_,expectedLocation:v,distance:n,ignoreLocation:i})<=M?b=_:f=_,_=Math.floor((f-b)/2+b);f=_;let A=Math.max(1,v-_+1),I=h?y:Math.min(v+_,y)+u,L=Array(I+2);L[I+1]=(1<<m)-1;for(let D=I;D>=A;D-=1){let Y=D-1,q=r[t.charAt(Y)];if(R&&(k[Y]=+!!q),L[D]=(L[D+1]<<1|1)&q,m&&(L[D]|=(c[D+1]|c[D])<<1|1|c[D+1]),L[D]&g&&(o=se(e,{errors:m,currentLocation:Y,expectedLocation:v,distance:n,ignoreLocation:i}),o<=M)){if(M=o,w=Y,w<=v)break;A=Math.max(1,2*v-w)}}if(se(e,{errors:m+1,currentLocation:v,expectedLocation:v,distance:n,ignoreLocation:i})>M)break;c=L}const p={isMatch:w>=0,score:Math.max(.001,o)};if(R){const m=en(k,a);m.length?d&&(p.indices=m):p.isMatch=!1}return p}function nn(t){let e={};for(let r=0,s=t.length;r<s;r+=1){const n=t.charAt(r);e[n]=(e[n]||0)|1<<s-r-1}return e}class je{constructor(e,{location:r=S.location,threshold:s=S.threshold,distance:n=S.distance,includeMatches:l=S.includeMatches,findAllMatches:h=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,isCaseSensitive:d=S.isCaseSensitive,ignoreLocation:i=S.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:n,includeMatches:l,findAllMatches:h,minMatchCharLength:a,isCaseSensitive:d,ignoreLocation:i},this.pattern=d?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(v,M)=>{this.chunks.push({pattern:v,alphabet:nn(v),startIndex:M})},y=this.pattern.length;if(y>G){let v=0;const M=y%G,w=y-M;for(;v<w;)u(this.pattern.substr(v,G),v),v+=G;if(M){const R=y-G;u(this.pattern.substr(R),R)}}else u(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,includeMatches:s}=this.options;if(r||(e=e.toLowerCase()),this.pattern===e){let w={isMatch:!0,score:0};return s&&(w.indices=[[0,e.length-1]]),w}const{location:n,distance:l,threshold:h,findAllMatches:a,minMatchCharLength:d,ignoreLocation:i}=this.options;let u=[],y=0,v=!1;this.chunks.forEach(({pattern:w,alphabet:R,startIndex:k})=>{const{isMatch:x,score:c,indices:o}=tn(e,w,R,{location:n+k,distance:l,threshold:h,findAllMatches:a,minMatchCharLength:d,includeMatches:s,ignoreLocation:i});x&&(v=!0),y+=c,x&&o&&(u=[...u,...o])});let M={isMatch:v,score:v?y/this.chunks.length:1};return v&&s&&(M.indices=u),M}}class j{constructor(e){this.pattern=e}static isMultiMatch(e){return He(e,this.multiRegex)}static isSingleMatch(e){return He(e,this.singleRegex)}search(){}}function He(t,e){const r=t.match(e);return r?r[1]:null}class rn extends j{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class sn extends j{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class an extends j{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class on extends j{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class cn extends j{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ln extends j{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class We extends j{constructor(e,{location:r=S.location,threshold:s=S.threshold,distance:n=S.distance,includeMatches:l=S.includeMatches,findAllMatches:h=S.findAllMatches,minMatchCharLength:a=S.minMatchCharLength,isCaseSensitive:d=S.isCaseSensitive,ignoreLocation:i=S.ignoreLocation}={}){super(e);this._bitapSearch=new je(e,{location:r,threshold:s,distance:n,includeMatches:l,findAllMatches:h,minMatchCharLength:a,isCaseSensitive:d,ignoreLocation:i})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Ye extends j{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,s;const n=[],l=this.pattern.length;for(;(s=e.indexOf(this.pattern,r))>-1;)r=s+l,n.push([s,r-1]);const h=!!n.length;return{isMatch:h,score:h?0:1,indices:n}}}const Se=[rn,Ye,an,on,ln,cn,sn,We],Ve=Se.length,un=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,hn="|";function fn(t,e={}){return t.split(hn).map(r=>{let s=r.trim().split(un).filter(l=>l&&!!l.trim()),n=[];for(let l=0,h=s.length;l<h;l+=1){const a=s[l];let d=!1,i=-1;for(;!d&&++i<Ve;){const u=Se[i];let y=u.isMultiMatch(a);y&&(n.push(new u(y,e)),d=!0)}if(!d)for(i=-1;++i<Ve;){const u=Se[i];let y=u.isSingleMatch(a);if(y){n.push(new u(y,e));break}}}return n})}const dn=new Set([We.type,Ye.type]);class gn{constructor(e,{isCaseSensitive:r=S.isCaseSensitive,includeMatches:s=S.includeMatches,minMatchCharLength:n=S.minMatchCharLength,ignoreLocation:l=S.ignoreLocation,findAllMatches:h=S.findAllMatches,location:a=S.location,threshold:d=S.threshold,distance:i=S.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:s,minMatchCharLength:n,findAllMatches:h,ignoreLocation:l,location:a,threshold:d,distance:i},this.pattern=r?e:e.toLowerCase(),this.query=fn(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:n}=this.options;e=n?e:e.toLowerCase();let l=0,h=[],a=0;for(let d=0,i=r.length;d<i;d+=1){const u=r[d];h.length=0,l=0;for(let y=0,v=u.length;y<v;y+=1){const M=u[y],{isMatch:w,indices:R,score:k}=M.search(e);if(w){if(l+=1,a+=k,s){const x=M.constructor.type;dn.has(x)?h=[...h,...R]:h.push(R)}}else{a=0,l=0,h.length=0;break}}if(l){let y={isMatch:!0,score:a/l};return s&&(y.indices=h),y}}return{isMatch:!1,score:1}}}const xe=[];function pn(...t){xe.push(...t)}function be(t,e){for(let r=0,s=xe.length;r<s;r+=1){let n=xe[r];if(n.condition(t,e))return new n(t,e)}return new je(t,e)}const ee={AND:"$and",OR:"$or"},ke={PATH:"$path",PATTERN:"$val"},we=t=>!!(t[ee.AND]||t[ee.OR]),yn=t=>!!t[ke.PATH],mn=t=>!z(t)&&$e(t)&&!we(t),Ge=t=>({[ee.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function qe(t,e,{auto:r=!0}={}){const s=n=>{let l=Object.keys(n);const h=yn(n);if(!h&&l.length>1&&!we(n))return s(Ge(n));if(mn(n)){const d=h?n[ke.PATH]:l[0],i=h?n[ke.PATTERN]:n[d];if(!B(i))throw new Error(Wt(d));const u={keyId:_e(d),pattern:i};return r&&(u.searcher=be(i,e)),u}let a={children:[],operator:l[0]};return l.forEach(d=>{const i=n[d];z(i)&&i.forEach(u=>{a.children.push(s(u))})}),a};return we(t)||(t=Ge(t)),s(t)}function vn(t,{ignoreFieldNorm:e=S.ignoreFieldNorm}){t.forEach(r=>{let s=1;r.matches.forEach(({key:n,norm:l,score:h})=>{const a=n?n.weight:null;s*=Math.pow(h===0&&a?Number.EPSILON:h,(a||1)*(e?1:l))}),r.score=s})}function _n(t,e){const r=t.matches;e.matches=[],!!K(r)&&r.forEach(s=>{if(!K(s.indices)||!s.indices.length)return;const{indices:n,value:l}=s;let h={indices:n,value:l};s.key&&(h.key=s.key.src),s.idx>-1&&(h.refIndex=s.idx),e.matches.push(h)})}function En(t,e){e.score=t.score}function Sn(t,e,{includeMatches:r=S.includeMatches,includeScore:s=S.includeScore}={}){const n=[];return r&&n.push(_n),s&&n.push(En),t.map(l=>{const{idx:h}=l,a={item:e[h],refIndex:h};return n.length&&n.forEach(d=>{d(l,a)}),a})}class J{constructor(e,r={},s){this.options={...S,...r},this.options.useExtendedSearch,this._keyStore=new qt(this.options.keys),this.setCollection(e,s)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof Ee))throw new Error(Ht);this._myIndex=r||Ue(this.options.keys,this._docs,{getFn:this.options.getFn})}add(e){!K(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let s=0,n=this._docs.length;s<n;s+=1){const l=this._docs[s];e(l,s)&&(this.removeAt(s),s-=1,n-=1,r.push(l))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:s,includeScore:n,shouldSort:l,sortFn:h,ignoreFieldNorm:a}=this.options;let d=B(e)?B(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return vn(d,{ignoreFieldNorm:a}),l&&d.sort(h),Fe(r)&&r>-1&&(d=d.slice(0,r)),Sn(d,this._docs,{includeMatches:s,includeScore:n})}_searchStringList(e){const r=be(e,this.options),{records:s}=this._myIndex,n=[];return s.forEach(({v:l,i:h,n:a})=>{if(!K(l))return;const{isMatch:d,score:i,indices:u}=r.searchIn(l);d&&n.push({item:l,idx:h,matches:[{score:i,value:l,norm:a,indices:u}]})}),n}_searchLogical(e){const r=qe(e,this.options),s=(a,d,i)=>{if(!a.children){const{keyId:u,searcher:y}=a,v=this._findMatches({key:this._keyStore.get(u),value:this._myIndex.getValueForItemAtKeyId(d,u),searcher:y});return v&&v.length?[{idx:i,item:d,matches:v}]:[]}switch(a.operator){case ee.AND:{const u=[];for(let y=0,v=a.children.length;y<v;y+=1){const M=a.children[y],w=s(M,d,i);if(w.length)u.push(...w);else return[]}return u}case ee.OR:{const u=[];for(let y=0,v=a.children.length;y<v;y+=1){const M=a.children[y],w=s(M,d,i);if(w.length){u.push(...w);break}}return u}}},n=this._myIndex.records,l={},h=[];return n.forEach(({$:a,i:d})=>{if(K(a)){let i=s(r,a,d);i.length&&(l[d]||(l[d]={idx:d,item:a,matches:[]},h.push(l[d])),i.forEach(({matches:u})=>{l[d].matches.push(...u)}))}}),h}_searchObjectList(e){const r=be(e,this.options),{keys:s,records:n}=this._myIndex,l=[];return n.forEach(({$:h,i:a})=>{if(!K(h))return;let d=[];s.forEach((i,u)=>{d.push(...this._findMatches({key:i,value:h[u],searcher:r}))}),d.length&&l.push({idx:a,item:h,matches:d})}),l}_findMatches({key:e,value:r,searcher:s}){if(!K(r))return[];let n=[];if(z(r))r.forEach(({v:l,i:h,n:a})=>{if(!K(l))return;const{isMatch:d,score:i,indices:u}=s.searchIn(l);d&&n.push({score:i,key:e,value:l,idx:h,norm:a,indices:u})});else{const{v:l,n:h}=r,{isMatch:a,score:d,indices:i}=s.searchIn(l);a&&n.push({score:d,key:e,value:l,norm:h,indices:i})}return n}}J.version="6.4.6",J.createIndex=Ue,J.parseIndex=Zt,J.config=S,J.parseQuery=qe,pn(gn);const xn={threshold:.5,useExtendedSearch:!0,keys:["name","author","description"]};var Qe=(t,e)=>!e||e==""?t:new J(t,xn).search(e).map(r=>r.item);const Je=$.findByDisplayName("SearchBar");var Xe=({query:t,onChange:e})=>E.React.createElement(Je,{className:"ysink_stain_searchbar",query:t,onQueryChange:e,placeholder:"Search themes...",size:Je.Sizes.MEDIUM});const{useState:bn,useReducer:kn}=E.React;var wn=()=>{Z.useNest(T.persist);const[t,e]=bn(""),[,r]=kn(s=>~s,0);return E.React.createElement(X.ErrorBoundary,null,E.React.createElement(Kt,null),E.React.createElement(Xe,{query:t,onChange:e}),E.React.createElement("div",{className:"ysink_stain_cardcontainer"},Qe(T.persist.ghost.themes,t).map(s=>E.React.createElement(De,{theme:s,deleteHook:r}))))},ie=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0});var H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Mn=function(){function t(e,r){for(var s=0;s<r.length;s++){var n=r[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,s){return r&&t(e.prototype,r),s&&t(e,s),e}}(),Cn=dt.default,te=Rn(Cn);function Rn(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function In(t,e){var r={};for(var s in t)e.indexOf(s)>=0||!Object.prototype.hasOwnProperty.call(t,s)||(r[s]=t[s]);return r}function An(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function et(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Tn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var On=13,Nn=9,Ln=8,Dn=89,ae=90,Fn=77,tt=57,nt=219,rt=222,st=192,$n=27,it=100,Kn=3e3,Pn="navigator"in ie&&/Win/i.test(navigator.platform),Me="navigator"in ie&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),oe="npm__react-simple-code-editor__textarea",zn=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+oe+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+oe+` {
    color: transparent !important;
  }

  .`+oe+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,at=function(t){Tn(e,t);function e(){var r,s,n,l;An(this,e);for(var h=arguments.length,a=Array(h),d=0;d<h;d++)a[d]=arguments[d];return l=(s=(n=et(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(a))),n),n.state={capture:!0},n._recordCurrentState=function(){var i=n._input;if(!!i){var u=i.value,y=i.selectionStart,v=i.selectionEnd;n._recordChange({value:u,selectionStart:y,selectionEnd:v})}},n._getLines=function(i,u){return i.substring(0,u).split(`
`)},n._recordChange=function(i){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=n._history,v=y.stack,M=y.offset;if(v.length&&M>-1){n._history.stack=v.slice(0,M+1);var w=n._history.stack.length;if(w>it){var R=w-it;n._history.stack=v.slice(R,w),n._history.offset=Math.max(n._history.offset-R,0)}}var k=Date.now();if(u){var x=n._history.stack[n._history.offset];if(x&&k-x.timestamp<Kn){var c=/[^a-z0-9]([a-z0-9]+)$/i,o=n._getLines(x.value,x.selectionStart).pop().match(c),f=n._getLines(i.value,i.selectionStart).pop().match(c);if(o&&f&&f[1].startsWith(o[1])){n._history.stack[n._history.offset]=H({},i,{timestamp:k});return}}}n._history.stack.push(H({},i,{timestamp:k})),n._history.offset++},n._updateInput=function(i){var u=n._input;!u||(u.value=i.value,u.selectionStart=i.selectionStart,u.selectionEnd=i.selectionEnd,n.props.onValueChange(i.value))},n._applyEdits=function(i){var u=n._input,y=n._history.stack[n._history.offset];y&&u&&(n._history.stack[n._history.offset]=H({},y,{selectionStart:u.selectionStart,selectionEnd:u.selectionEnd})),n._recordChange(i),n._updateInput(i)},n._undoEdit=function(){var i=n._history,u=i.stack,y=i.offset,v=u[y-1];v&&(n._updateInput(v),n._history.offset=Math.max(y-1,0))},n._redoEdit=function(){var i=n._history,u=i.stack,y=i.offset,v=u[y+1];v&&(n._updateInput(v),n._history.offset=Math.min(y+1,u.length-1))},n._handleKeyDown=function(i){var u=n.props,y=u.tabSize,v=u.insertSpaces,M=u.ignoreTabKey,w=u.onKeyDown;if(!(w&&(w(i),i.defaultPrevented))){i.keyCode===$n&&i.target.blur();var R=i.target,k=R.value,x=R.selectionStart,c=R.selectionEnd,o=(v?" ":"	").repeat(y);if(i.keyCode===Nn&&!M&&n.state.capture)if(i.preventDefault(),i.shiftKey){var f=n._getLines(k,x),g=f.length-1,p=n._getLines(k,c).length-1,m=k.split(`
`).map(function(N,Q){return Q>=g&&Q<=p&&N.startsWith(o)?N.substring(o.length):N}).join(`
`);if(k!==m){var b=f[g];n._applyEdits({value:m,selectionStart:b.startsWith(o)?x-o.length:x,selectionEnd:c-(k.length-m.length)})}}else if(x!==c){var _=n._getLines(k,x),A=_.length-1,I=n._getLines(k,c).length-1,L=_[A];n._applyEdits({value:k.split(`
`).map(function(N,Q){return Q>=A&&Q<=I?o+N:N}).join(`
`),selectionStart:/\S/.test(L)?x+o.length:x,selectionEnd:c+o.length*(I-A+1)})}else{var W=x+o.length;n._applyEdits({value:k.substring(0,x)+o+k.substring(c),selectionStart:W,selectionEnd:W})}else if(i.keyCode===Ln){var D=x!==c,Y=k.substring(0,x);if(Y.endsWith(o)&&!D){i.preventDefault();var q=x-o.length;n._applyEdits({value:k.substring(0,x-o.length)+k.substring(c),selectionStart:q,selectionEnd:q})}}else if(i.keyCode===On){if(x===c){var ce=n._getLines(k,x).pop(),O=ce.match(/^\s+/);if(O&&O[0]){i.preventDefault();var P=`
`+O[0],U=x+P.length;n._applyEdits({value:k.substring(0,x)+P+k.substring(c),selectionStart:U,selectionEnd:U})}}}else if(i.keyCode===tt||i.keyCode===nt||i.keyCode===rt||i.keyCode===st){var F=void 0;i.keyCode===tt&&i.shiftKey?F=["(",")"]:i.keyCode===nt?i.shiftKey?F=["{","}"]:F=["[","]"]:i.keyCode===rt?i.shiftKey?F=['"','"']:F=["'","'"]:i.keyCode===st&&!i.shiftKey&&(F=["`","`"]),x!==c&&F&&(i.preventDefault(),n._applyEdits({value:k.substring(0,x)+F[0]+k.substring(x,c)+F[1]+k.substring(c),selectionStart:x,selectionEnd:c+2}))}else(Me?i.metaKey&&i.keyCode===ae:i.ctrlKey&&i.keyCode===ae)&&!i.shiftKey&&!i.altKey?(i.preventDefault(),n._undoEdit()):(Me?i.metaKey&&i.keyCode===ae&&i.shiftKey:Pn?i.ctrlKey&&i.keyCode===Dn:i.ctrlKey&&i.keyCode===ae&&i.shiftKey)&&!i.altKey?(i.preventDefault(),n._redoEdit()):i.keyCode===Fn&&i.ctrlKey&&(Me?i.shiftKey:!0)&&(i.preventDefault(),n.setState(function(N){return{capture:!N.capture}}))}},n._handleChange=function(i){var u=i.target,y=u.value,v=u.selectionStart,M=u.selectionEnd;n._recordChange({value:y,selectionStart:v,selectionEnd:M},!0),n.props.onValueChange(y)},n._history={stack:[],offset:-1},s),et(n,l)}return Mn(e,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var s=this,n=this.props,l=n.value,h=n.style,a=n.padding,d=n.highlight,i=n.textareaId,u=n.textareaClassName,y=n.autoFocus,v=n.disabled,M=n.form,w=n.maxLength,R=n.minLength,k=n.name,x=n.placeholder,c=n.readOnly,o=n.required,f=n.onClick,g=n.onFocus,p=n.onBlur,m=n.onKeyUp;n.onKeyDown,n.onValueChange,n.tabSize,n.insertSpaces,n.ignoreTabKey;var b=n.preClassName,_=In(n,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),A={paddingTop:a,paddingRight:a,paddingBottom:a,paddingLeft:a},I=d(l);return te.createElement("div",H({},_,{style:H({},ne.container,h)}),te.createElement("textarea",{ref:function(W){return s._input=W},style:H({},ne.editor,ne.textarea,A),className:oe+(u?" "+u:""),id:i,value:l,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:f,onKeyUp:m,onFocus:g,onBlur:p,disabled:v,form:M,maxLength:w,minLength:R,name:k,placeholder:x,readOnly:c,required:o,autoFocus:y,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),te.createElement("pre",H({className:b,"aria-hidden":"true",style:H({},ne.editor,ne.highlight,A)},typeof I=="string"?{dangerouslySetInnerHTML:{__html:I+"<br />"}}:{children:I})),te.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:zn}}))}},{key:"session",get:function(){return{history:this._history}},set:function(s){this._history=s.history}}]),e}(te.Component);at.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var Bn=Ze.default=at,ne={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},Ce={exports:{}};(function(t){var e=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=function(s){var n=/\blang(?:uage)?-([\w-]+)\b/i,l=0,h={},a={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function c(o){return o instanceof d?new d(o.type,c(o.content),o.alias):Array.isArray(o)?o.map(c):o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(c){return Object.prototype.toString.call(c).slice(8,-1)},objId:function(c){return c.__id||Object.defineProperty(c,"__id",{value:++l}),c.__id},clone:function c(o,f){f=f||{};var g,p;switch(a.util.type(o)){case"Object":if(p=a.util.objId(o),f[p])return f[p];g={},f[p]=g;for(var m in o)o.hasOwnProperty(m)&&(g[m]=c(o[m],f));return g;case"Array":return p=a.util.objId(o),f[p]?f[p]:(g=[],f[p]=g,o.forEach(function(b,_){g[_]=c(b,f)}),g);default:return o}},getLanguage:function(c){for(;c&&!n.test(c.className);)c=c.parentElement;return c?(c.className.match(n)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(g){var c=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(g.stack)||[])[1];if(c){var o=document.getElementsByTagName("script");for(var f in o)if(o[f].src==c)return o[f]}return null}},isActive:function(c,o,f){for(var g="no-"+o;c;){var p=c.classList;if(p.contains(o))return!0;if(p.contains(g))return!1;c=c.parentElement}return!!f}},languages:{plain:h,plaintext:h,text:h,txt:h,extend:function(c,o){var f=a.util.clone(a.languages[c]);for(var g in o)f[g]=o[g];return f},insertBefore:function(c,o,f,g){g=g||a.languages;var p=g[c],m={};for(var b in p)if(p.hasOwnProperty(b)){if(b==o)for(var _ in f)f.hasOwnProperty(_)&&(m[_]=f[_]);f.hasOwnProperty(b)||(m[b]=p[b])}var A=g[c];return g[c]=m,a.languages.DFS(a.languages,function(I,L){L===A&&I!=c&&(this[I]=m)}),m},DFS:function c(o,f,g,p){p=p||{};var m=a.util.objId;for(var b in o)if(o.hasOwnProperty(b)){f.call(o,b,o[b],g||b);var _=o[b],A=a.util.type(_);A==="Object"&&!p[m(_)]?(p[m(_)]=!0,c(_,f,null,p)):A==="Array"&&!p[m(_)]&&(p[m(_)]=!0,c(_,f,b,p))}}},plugins:{},highlightAll:function(c,o){a.highlightAllUnder(document,c,o)},highlightAllUnder:function(c,o,f){var g={callback:f,container:c,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};a.hooks.run("before-highlightall",g),g.elements=Array.prototype.slice.apply(g.container.querySelectorAll(g.selector)),a.hooks.run("before-all-elements-highlight",g);for(var p=0,m;m=g.elements[p++];)a.highlightElement(m,o===!0,g.callback)},highlightElement:function(c,o,f){var g=a.util.getLanguage(c),p=a.languages[g];c.className=c.className.replace(n,"").replace(/\s+/g," ")+" language-"+g;var m=c.parentElement;m&&m.nodeName.toLowerCase()==="pre"&&(m.className=m.className.replace(n,"").replace(/\s+/g," ")+" language-"+g);var b=c.textContent,_={element:c,language:g,grammar:p,code:b};function A(L){_.highlightedCode=L,a.hooks.run("before-insert",_),_.element.innerHTML=_.highlightedCode,a.hooks.run("after-highlight",_),a.hooks.run("complete",_),f&&f.call(_.element)}if(a.hooks.run("before-sanity-check",_),m=_.element.parentElement,m&&m.nodeName.toLowerCase()==="pre"&&!m.hasAttribute("tabindex")&&m.setAttribute("tabindex","0"),!_.code){a.hooks.run("complete",_),f&&f.call(_.element);return}if(a.hooks.run("before-highlight",_),!_.grammar){A(a.util.encode(_.code));return}if(o&&s.Worker){var I=new Worker(a.filename);I.onmessage=function(L){A(L.data)},I.postMessage(JSON.stringify({language:_.language,code:_.code,immediateClose:!0}))}else A(a.highlight(_.code,_.grammar,_.language))},highlight:function(c,o,f){var g={code:c,grammar:o,language:f};return a.hooks.run("before-tokenize",g),g.tokens=a.tokenize(g.code,g.grammar),a.hooks.run("after-tokenize",g),d.stringify(a.util.encode(g.tokens),g.language)},tokenize:function(c,o){var f=o.rest;if(f){for(var g in f)o[g]=f[g];delete o.rest}var p=new y;return v(p,p.head,c),u(c,p,o,p.head,0),w(p)},hooks:{all:{},add:function(c,o){var f=a.hooks.all;f[c]=f[c]||[],f[c].push(o)},run:function(c,o){var f=a.hooks.all[c];if(!(!f||!f.length))for(var g=0,p;p=f[g++];)p(o)}},Token:d};s.Prism=a;function d(c,o,f,g){this.type=c,this.content=o,this.alias=f,this.length=(g||"").length|0}d.stringify=function c(o,f){if(typeof o=="string")return o;if(Array.isArray(o)){var g="";return o.forEach(function(A){g+=c(A,f)}),g}var p={type:o.type,content:c(o.content,f),tag:"span",classes:["token",o.type],attributes:{},language:f},m=o.alias;m&&(Array.isArray(m)?Array.prototype.push.apply(p.classes,m):p.classes.push(m)),a.hooks.run("wrap",p);var b="";for(var _ in p.attributes)b+=" "+_+'="'+(p.attributes[_]||"").replace(/"/g,"&quot;")+'"';return"<"+p.tag+' class="'+p.classes.join(" ")+'"'+b+">"+p.content+"</"+p.tag+">"};function i(c,o,f,g){c.lastIndex=o;var p=c.exec(f);if(p&&g&&p[1]){var m=p[1].length;p.index+=m,p[0]=p[0].slice(m)}return p}function u(c,o,f,g,p,m){for(var b in f)if(!(!f.hasOwnProperty(b)||!f[b])){var _=f[b];_=Array.isArray(_)?_:[_];for(var A=0;A<_.length;++A){if(m&&m.cause==b+","+A)return;var I=_[A],L=I.inside,W=!!I.lookbehind,D=!!I.greedy,Y=I.alias;if(D&&!I.pattern.global){var q=I.pattern.toString().match(/[imsuy]*$/)[0];I.pattern=RegExp(I.pattern.source,q+"g")}for(var ce=I.pattern||I,O=g.next,P=p;O!==o.tail&&!(m&&P>=m.reach);P+=O.value.length,O=O.next){var U=O.value;if(o.length>c.length)return;if(!(U instanceof d)){var F=1,N;if(D){if(N=i(ce,P,c,W),!N)break;var le=N.index,Q=N.index+N[0].length,V=P;for(V+=O.value.length;le>=V;)O=O.next,V+=O.value.length;if(V-=O.value.length,P=V,O.value instanceof d)continue;for(var re=O;re!==o.tail&&(V<Q||typeof re.value=="string");re=re.next)F++,V+=re.value.length;F--,U=c.slice(P,V),N.index-=P}else if(N=i(ce,0,U,W),!N)continue;var le=N.index,ue=N[0],Ie=U.slice(0,le),lt=U.slice(le+ue.length),Ae=P+U.length;m&&Ae>m.reach&&(m.reach=Ae);var he=O.prev;Ie&&(he=v(o,he,Ie),P+=Ie.length),M(o,he,F);var sr=new d(b,L?a.tokenize(ue,L):ue,Y,ue);if(O=v(o,he,sr),lt&&v(o,O,lt),F>1){var Te={cause:b+","+A,reach:Ae};u(c,o,f,O.prev,P,Te),m&&Te.reach>m.reach&&(m.reach=Te.reach)}}}}}}function y(){var c={value:null,prev:null,next:null},o={value:null,prev:c,next:null};c.next=o,this.head=c,this.tail=o,this.length=0}function v(c,o,f){var g=o.next,p={value:f,prev:o,next:g};return o.next=p,g.prev=p,c.length++,p}function M(c,o,f){for(var g=o.next,p=0;p<f&&g!==c.tail;p++)g=g.next;o.next=g,g.prev=o,c.length-=p}function w(c){for(var o=[],f=c.head.next;f!==c.tail;)o.push(f.value),f=f.next;return o}if(!s.document)return s.addEventListener&&(a.disableWorkerMessageHandler||s.addEventListener("message",function(c){var o=JSON.parse(c.data),f=o.language,g=o.code,p=o.immediateClose;s.postMessage(a.highlight(g,a.languages[f],f)),p&&s.close()},!1)),a;var R=a.util.currentScript();R&&(a.filename=R.src,R.hasAttribute("data-manual")&&(a.manual=!0));function k(){a.manual||a.highlightAll()}if(!a.manual){var x=document.readyState;x==="loading"||x==="interactive"&&R&&R.defer?document.addEventListener("DOMContentLoaded",k):window.requestAnimationFrame?window.requestAnimationFrame(k):window.setTimeout(k,16)}return a}(e);t.exports&&(t.exports=r),typeof ie!="undefined"&&(ie.Prism=r)})(Ce),function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var r=t.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))}(Prism);var Un=()=>(Z.useNest(T.persist),E.React.createElement(X.ErrorBoundary,null,E.React.createElement("div",{class:"ysink_stain_quickcss"},E.React.createElement(Bn,{className:"ysink_stain_editorroot",value:T.persist.ghost.quickCSS??"",onValueChange:t=>{T.persist.store.quickCSS=t,T.reloadCSS()},highlight:t=>Ce.exports.highlight(t,Ce.exports.languages.css),padding:10}),E.React.createElement("link",{href:"https://cdn.jsdelivr.net/gh/PrismJS/prism-themes@master/themes/prism-atom-dark.css",rel:"stylesheet"}),E.React.createElement("style",null,":root { --background-primary: 1d1f21; }"))));async function jn(t){const e=new URL("repo.json",t).href,r=await(await fetch(e)).json();if(!r.themes||r.themes?.length===0)throw new Error("No themes found in repo");if(!r.meta)throw new Error("No repo metadata");if(!r?.meta.name)throw new Error("Repo did not have a name");return r}var ot=async t=>{const e=await jn(t),r=await Promise.all(e.themes.map(s=>me(s,t)));return{manifest:e,themes:r}};const{useState:Re,useEffect:Hn,useReducer:Wn}=E.React,Yn=()=>Promise.all(T.persist.ghost.repos.map(ot)),Vn=t=>t.flatMap(e=>e.themes);async function Gn(){let t=await Yn();return{repos:t,themes:Vn(t)}}var qn=()=>{Z.useNest(T.persist,!1,(a,d)=>d?.[0]==="repos");const[t,e]=Re("");let[r,s]=Re(void 0),[n,l]=Re(void 0);Hn(()=>{(!r||!n)&&Gn().then(({repos:a,themes:d})=>{s(a),l(d)})});const[,h]=Wn(a=>~a,0);return E.React.createElement(X.ErrorBoundary,null,E.React.createElement(Xe,{query:t,onChange:e}),E.React.createElement("div",{className:"ysink_stain_cardcontainer"},Qe(n??[],t).map(a=>E.React.createElement(De,{theme:a,deleteHook:h}))))};const Qn=$.findByDisplayName("FormTitle"),Jn=$.findByDisplayName("FormSection");var Xn=()=>E.React.createElement(X.ErrorBoundary,null,E.React.createElement(Jn,null,E.React.createElement(Qn,{tag:"h1"},"Cumstain"),E.React.createElement(xt,{items:[{text:"Installed",component:wn},{text:"Store",component:qn},{text:"Quick CSS",component:Un}]}))),Zn=()=>fe.after("getPredicateSections",$.findByDisplayName("SettingsView").prototype,(t,e)=>{if(e[1]?.section!="My Account")return;let r=e.findIndex(s=>s.section=="CUMCORD_PLUGINS")+1;return e.splice(r,0,{section:"ysink_stain_CUMSTAIN",label:"Themes",element:Xn}),e}),er=()=>cumcord.patcher.injectCSS(".ysink_stain_tabbar{padding:.5rem 1rem;display:grid;grid-auto-flow:column;grid-auto-columns:7rem}.ysink_stain_tabbar .ysink_stain_button *{cursor:pointer}.ysink_stain_tabbar>*{margin-right:1rem;padding:.2rem;border-radius:.3rem;min-width:5rem;text-align:center;background:none}.theme-dark .ysink_stain_tabbar>*.ysink_stain_selected{background:#fff4}.theme-light .ysink_stain_tabbar>*.ysink_stain_selected{background:#0003}.ysink_stain_tabbar>*:last-child{margin-right:0}.ysink_stain_cardcontainer{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}.ysink_stain_card{padding:1rem;border:1px solid var(--background-modifier-accent);border-radius:.5rem;display:flex;flex-direction:column;z-index:1;background-color:var(--deprecated-card-bg)}.ysink_stain_card .ysink_stain_title{font-size:1rem;padding-bottom:.25rem;display:inline;flex:1;margin:0}.ysink_stain_card .ysink_stain_button{display:inline;padding:0}.ysink_stain_card .ysink_stain_button>div{padding:2px 16px}.ysink_stain_card .ysink_stain_row{display:flex}.ysink_stain_card .ysink_stain_row>:first-child{flex:1}.ysink_stain_card .ysink_stain_row>*{flex:unset}.ysink_stain_card .ysink_stain_author_licence{font-style:italic}.ysink_stain_card .ysink_stain_desc{flex:1}.ysink_stain_card .ysink_stain_img{height:13rem;background-repeat:no-repeat;background-size:cover;background-position:center;margin:-1rem -1rem 1rem;border-radius:.5rem .5rem 0 0}.ysink_stain_card .ysink_stain_img div{font-size:1.5rem;text-align:center;padding-top:calc(6.5rem - .5em);text-transform:uppercase;opacity:.8}.ysink_stain_divide{margin:0 0 1rem}.ysink_stain_card .ysink_stain_divide{margin:.2rem 0}.ysink_stain_delete{margin-left:.5rem;fill:var(--interactive-normal)}.ysink_stain_installbar{display:flex}.ysink_stain_installbar>*{flex:1}.ysink_stain_installbar>:last-child{flex:unset;margin-left:1rem}.ysink_stain_searchbar{margin:.75rem 0}.ysink_stain_editorroot{background:tranparent;color:#c5c8c6;font-family:var(--font-code);font-size:.9rem;line-height:1.1rem}"),tr=()=>{const t=fe.injectCSS(C.default.persist.ghost.quickCSS);return C.default.reloadCSS=()=>t(C.default.persist.ghost.quickCSS),()=>{t(),C.default.reloadCSS=void 0,delete C.default.reloadCSS}};const ct=async()=>{de.log("|| CUMSTAIN || Started periodic theme update check");const e=(await Promise.all(T.persist.ghost.repos.map(ot))).flatMap(r=>r.themes);for(let r=0;r<T.persist.ghost.themes.length;r++){const s=T.persist.ghost.themes[r],n=e.find(l=>l.id===s.id);if(n)T.persist.ghost.themes[r]=n;else{const l=await me(s.url).catch(()=>{});l&&(T.persist.ghost.themes[r]=l)}T.persist.store.themes[r].enabled=s.enabled,s.enabled&&T.state.ghost.unpatchCache.get(s.id)?.(T.persist.ghost.themes[r].CSS),de.log(`|| CUMSTAIN || Updated theme ${T.persist.ghost.themes[r].name}`)}de.log("|| CUMSTAIN || Completed periodic theme update check")};var nr=()=>{setTimeout(ct,10);const t=setInterval(ct,6e5);return()=>clearInterval(t)},rr=({persist:t})=>{let e=[];return{onLoad:async()=>{t.store.repos=["http://127.0.0.1:8080/"],e.push(er(),mt(),yt(),tr(),Zn(),nr())},onUnload:()=>e.reduceRight((r,s)=>s?.(),null)}};return rr})(cumcord.pluginData,cumcord.patcher,cumcord.modules.internal.nests,cumcord.modules.webpack,cumcord.ui.components,cumcord.modules.common,cumcord.utils,cumcord.ui.toasts,cumcord.modules.common.React,cumcord.utils.logger);
